{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ArcElement,PointElement,LineElement,Filler}from'chart.js';import{Bar,Doughnut}from'react-chartjs-2';import{useAuth}from'../App';import{useNavigate}from'react-router-dom';import{Container,Row,Col,Card,Button,Table,Badge,Tab,Tabs,Nav,Alert,Spinner,ProgressBar}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,PointElement,LineElement,Title,Tooltip,Legend,ArcElement,Filler);const ManagerDashboard=()=>{var _analytics$division_s,_analytics$division_s2,_analytics$division_s3,_analytics$division_s4,_analytics$division_s5,_analytics$division_s6,_analytics$division_s7,_analytics$division_s8,_analytics$division_s9,_analytics$division_s0,_analytics$division_s1,_analytics$division_s10,_analytics$division_s11,_analytics$employees;const[analytics,setAnalytics]=useState(null);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('overview');const[processedRecommendations,setProcessedRecommendations]=useState([]);const[error,setError]=useState(null);const{user}=useAuth();const navigate=useNavigate();useEffect(()=>{if((user===null||user===void 0?void 0:user.role)==='manager'){fetchManagerData();fetchProcessedRecommendations();// Auto refresh processed recommendations every 30 seconds\nconst interval=setInterval(()=>{fetchProcessedRecommendations();},30000);return()=>clearInterval(interval);}else if((user===null||user===void 0?void 0:user.role)==='hr'){showAlert('HR tidak dapat membuat rekomendasi. Hanya manager yang dapat membuat rekomendasi karyawan.','warning');}},[user]);const fetchManagerData=async()=>{try{setLoading(true);const response=await fetch(\"/backend/manager_analytics_by_division.php?division_id=\".concat(user.division_id),{credentials:'include',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const result=await response.json();console.log('📊 Manager Analytics Result:',result);if(result.success){setAnalytics(result.data);}else{console.error('❌ Failed to fetch analytics:',result.message);setError(result.message||'Failed to fetch analytics data');}}catch(error){console.error('Error fetching manager data:',error);}finally{setLoading(false);}};const fetchProcessedRecommendations=async()=>{try{const response=await fetch('/backend/api/recommendations.php?action=processed',{credentials:'include',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const result=await response.json();if(result.success){setProcessedRecommendations(result.data||[]);}}catch(error){console.error('Error fetching processed recommendations:',error);}};const fetchEmployeeDetail=async eid=>{try{console.log('Fetching employee detail for eid:',eid);const response=await fetch(\"http://localhost/web_srk_BI/backend/api/employees.php?action=employee_data_mining_detail&eid=\".concat(eid),{credentials:'include',headers:{'Content-Type':'application/json'}});console.log('Response status:',response.status);console.log('Response OK:',response.ok);if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const responseText=await response.text();console.log('Raw response text (first 200 chars):',responseText.substring(0,200));let result;try{result=JSON.parse(responseText);}catch(jsonError){console.error('JSON Parse Error:',jsonError);console.log('Full response text:',responseText);throw new Error('Server returned invalid JSON. Check browser console for details.');}console.log('Employee detail API Response:',result);if(result.success){console.log('Employee detail loaded successfully');return result.data;// Return the data for await\n}else{console.error('API Error:',result.error);throw new Error(result.error||'Failed to load employee data');}}catch(error){console.error('Network/Parse error:',error);throw error;// Re-throw for handleEmployeeClick to catch\n}};const handleEmployeeClick=async employee=>{console.log('🔍 handleEmployeeClick called for:',employee.name,'EID:',employee.eid);// Reset state and show loading\nsetEmployeeDetail(null);setLoadingDetail(true);setShowEmployeeModal(true);try{var _employeeData$dynamic,_employeeData$dynamic2;console.log('📞 Calling fetchEmployeeDetail...');const employeeData=await fetchEmployeeDetail(employee.eid);console.log('✅ Employee data received:',employeeData);console.log('   - Employee:',employeeData===null||employeeData===void 0?void 0:employeeData.employee);console.log('   - Dynamic Intelligence:',employeeData===null||employeeData===void 0?void 0:employeeData.dynamic_intelligence);console.log('   - Match Category:',employeeData===null||employeeData===void 0?void 0:(_employeeData$dynamic=employeeData.dynamic_intelligence)===null||_employeeData$dynamic===void 0?void 0:_employeeData$dynamic.match_category);console.log('   - Optimal Duration:',employeeData===null||employeeData===void 0?void 0:(_employeeData$dynamic2=employeeData.dynamic_intelligence)===null||_employeeData$dynamic2===void 0?void 0:_employeeData$dynamic2.optimal_duration);setEmployeeDetail(employeeData);}catch(error){console.error('❌ Failed to fetch employee detail:',error);setEmployeeDetail({error:true,errorMessage:error.message,employee:{name:employee.name,eid:employee.eid,role:employee.role||'N/A',current_contract_type:employee.current_contract_type||'Unknown'}});}finally{setLoadingDetail(false);}};const handleEmployeeDetail=employee=>{navigate(\"/manager/employee/\".concat(employee.eid));};const handleCreateRecommendation=employee=>{navigate(\"/manager/recommendation/\".concat(employee.eid));};const showAlert=(message,type)=>{setAlert({show:true,message,type});setTimeout(()=>setAlert({show:false,message:'',type:''}),5000);};const getRiskLevelChart=()=>{if(!(analytics!==null&&analytics!==void 0&&analytics.employees)||analytics.employees.length===0){return{labels:['Low Risk','Medium Risk','High Risk'],datasets:[{label:'Distribusi Risk Level',data:[0,0,0],backgroundColor:['#28a745','#ffc107','#dc3545'],borderWidth:1}]};}const employees=analytics.employees;const lowRisk=employees.filter(emp=>{var _emp$data_mining_reco;return((_emp$data_mining_reco=emp.data_mining_recommendation)===null||_emp$data_mining_reco===void 0?void 0:_emp$data_mining_reco.risk_level)==='Low';}).length;const mediumRisk=employees.filter(emp=>{var _emp$data_mining_reco2;return((_emp$data_mining_reco2=emp.data_mining_recommendation)===null||_emp$data_mining_reco2===void 0?void 0:_emp$data_mining_reco2.risk_level)==='Medium';}).length;const highRisk=employees.filter(emp=>{var _emp$data_mining_reco3;return((_emp$data_mining_reco3=emp.data_mining_recommendation)===null||_emp$data_mining_reco3===void 0?void 0:_emp$data_mining_reco3.risk_level)==='High';}).length;return{labels:['Low Risk','Medium Risk','High Risk'],datasets:[{label:'Distribusi Risk Level',data:[lowRisk,mediumRisk,highRisk],backgroundColor:['#28a745','#ffc107','#dc3545'],borderWidth:1}]};};const getContractRecommendationChart=()=>{if(!(analytics!==null&&analytics!==void 0&&analytics.employees)||analytics.employees.length===0){return{labels:['6 bulan','12 bulan','18 bulan','24 bulan','36 bulan'],datasets:[{label:'Jumlah Rekomendasi',data:[0,0,0,0,0],backgroundColor:'rgba(0, 123, 255, 0.8)',borderColor:'#007bff',borderWidth:2}]};}const employees=analytics.employees;const duration6=employees.filter(emp=>{var _emp$data_mining_reco4;return((_emp$data_mining_reco4=emp.data_mining_recommendation)===null||_emp$data_mining_reco4===void 0?void 0:_emp$data_mining_reco4.recommended_duration)===6;}).length;const duration12=employees.filter(emp=>{var _emp$data_mining_reco5;return((_emp$data_mining_reco5=emp.data_mining_recommendation)===null||_emp$data_mining_reco5===void 0?void 0:_emp$data_mining_reco5.recommended_duration)===12;}).length;const duration18=employees.filter(emp=>{var _emp$data_mining_reco6;return((_emp$data_mining_reco6=emp.data_mining_recommendation)===null||_emp$data_mining_reco6===void 0?void 0:_emp$data_mining_reco6.recommended_duration)===18;}).length;const duration24=employees.filter(emp=>{var _emp$data_mining_reco7;return((_emp$data_mining_reco7=emp.data_mining_recommendation)===null||_emp$data_mining_reco7===void 0?void 0:_emp$data_mining_reco7.recommended_duration)===24;}).length;const duration36=employees.filter(emp=>{var _emp$data_mining_reco8;return((_emp$data_mining_reco8=emp.data_mining_recommendation)===null||_emp$data_mining_reco8===void 0?void 0:_emp$data_mining_reco8.recommended_duration)===36;}).length;return{labels:['6 bulan','12 bulan','18 bulan','24 bulan','36 bulan'],datasets:[{label:'Jumlah Rekomendasi',data:[duration6,duration12,duration18,duration24,duration36],backgroundColor:'rgba(0, 123, 255, 0.8)',borderColor:'#007bff',borderWidth:2}]};};// Fungsi untuk mendapatkan status match dengan warna\nconst getMatchLevelBadge=matchStatus=>{if(matchStatus==='Match')return/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Match\"});return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"Unmatch\"});};const getContractStatusBadge=(contractType,tenure)=>{const badges={'probation':{variant:'warning',text:'Probation'},'1':{variant:'info',text:'Kontrak 1'},'2':{variant:'primary',text:'Kontrak 2'},'3':{variant:'secondary',text:'Kontrak 3'},'permanent':{variant:'success',text:'Permanent'},null:{variant:'light',text:'N/A'}};const badge=badges[contractType]||badges[null];if(contractType==='probation'&&tenure>=3){return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",className:\"border border-danger\",children:\"Probation (Ready for Review)\"});}return/*#__PURE__*/_jsx(Badge,{bg:badge.variant,children:badge.text});};const getRecommendationStatusBadge=employee=>{if(employee.current_contract_type==='permanent'){return/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"-\"});}else if(employee.education_job_match==='Unmatch'){return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"TIDAK DIREKOMENDASIKAN\"});}else{// Match - show recommended duration from Data Intelligence\nconst existingRecommendation=processedRecommendations.find(rec=>rec.employee_id===employee.eid);if(existingRecommendation&&existingRecommendation.recommended_duration){return/*#__PURE__*/_jsxs(Badge,{bg:\"success\",children:[existingRecommendation.recommended_duration,\" bulan\"]});}else{var _employee$data_mining;// Use Data Intelligence dari backend\nconst duration=(_employee$data_mining=employee.data_mining_recommendation)===null||_employee$data_mining===void 0?void 0:_employee$data_mining.recommended_duration;// Untuk Kontrak 3, duration 0 berarti Permanent\nif((employee.current_contract_type==='3'||employee.current_contract_type==='kontrak3')&&duration===0){return/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"PERMANENT\"});}// Untuk yang lain, gunakan duration dari Data Intelligence\nelse if(duration&&duration>0){return/*#__PURE__*/_jsxs(Badge,{bg:\"success\",children:[duration,\" bulan\"]});}// Default fallback\nelse{if(employee.current_contract_type==='3'){return/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:\"PERMANENT\"});}else if(employee.current_contract_type==='2'){return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"6 bulan (Evaluasi)\"});}else{return/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"Tidak Ada Data\"});}}}}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"Memuat data intelligence...\"})]})});}return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"mt-3\",children:[alert.show&&/*#__PURE__*/_jsx(Alert,{variant:alert.type,dismissible:true,onClose:()=>setAlert({show:false,message:'',type:''}),children:alert.message}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 rounded\",style:{background:'linear-gradient(135deg, #007bff 0%, #0056b3 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manager Dashboard - Data Intelligence\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:\"Analisis Kecocokan Pendidikan & Rekomendasi Kontrak untuk Divisi\"}),/*#__PURE__*/_jsxs(\"small\",{children:[user.division_name,\" | Business Intelligence System\"]})]}),/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s=analytics.division_stats)===null||_analytics$division_s===void 0?void 0:_analytics$division_s.total_employees)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Karyawan Aktif\"})]})})]})}),/*#__PURE__*/_jsxs(Tab.Container,{activeKey:activeTab,onSelect:setActiveTab,children:[/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",className:\"mb-4\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"overview\",style:{color:activeTab==='overview'?'#fff':'#007bff',backgroundColor:activeTab==='overview'?'#007bff':'transparent',borderColor:'#007bff'},children:\"Overview\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"education\",style:{color:activeTab==='education'?'#fff':'#007bff',backgroundColor:activeTab==='education'?'#007bff':'transparent',borderColor:'#007bff'},children:\"Analisis Pendidikan\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"employees\",style:{color:activeTab==='employees'?'#fff':'#007bff',backgroundColor:activeTab==='employees'?'#007bff':'transparent',borderColor:'#007bff'},children:\"Detail Karyawan\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"processed\",style:{color:activeTab==='processed'?'#fff':'#007bff',backgroundColor:activeTab==='processed'?'#007bff':'transparent',borderColor:'#007bff'},children:[\"Rekomendasi Diproses (\",processedRecommendations.length,\")\"]})})]}),/*#__PURE__*/_jsxs(Tab.Content,{children:[/*#__PURE__*/_jsxs(Tab.Pane,{eventKey:\"overview\",children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"h-100\",style:{background:'linear-gradient(135deg, #28a745 0%, #1e7e34 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s2=analytics.division_stats)===null||_analytics$division_s2===void 0?void 0:(_analytics$division_s3=_analytics$division_s2.data_mining_summary)===null||_analytics$division_s3===void 0?void 0:_analytics$division_s3.match_employees)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Match Employees\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"h-100\",style:{background:'linear-gradient(135deg, #ffc107 0%, #e0a800 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s4=analytics.division_stats)===null||_analytics$division_s4===void 0?void 0:(_analytics$division_s5=_analytics$division_s4.data_mining_summary)===null||_analytics$division_s5===void 0?void 0:_analytics$division_s5.recommended_extensions)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Rekomendasi Perpanjangan\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"h-100\",style:{background:'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s6=analytics.division_stats)===null||_analytics$division_s6===void 0?void 0:(_analytics$division_s7=_analytics$division_s6.data_mining_summary)===null||_analytics$division_s7===void 0?void 0:_analytics$division_s7.high_risk_employees)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"High Risk Employees\"})]})})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83D\\uDCCA Distribusi Tingkat Risiko\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Doughnut,{data:getRiskLevelChart(),options:{responsive:true,plugins:{legend:{position:'bottom'}}}})})]})}),/*#__PURE__*/_jsx(Col,{md:6,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83D\\uDCC8 Rekomendasi Durasi Kontrak\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Bar,{data:getContractRecommendationChart(),options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}})})]})})]}),/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83E\\uDDE0 Contract Intelligence Summary\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 border rounded\",style:{backgroundColor:'#e3f2fd'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-primary\",children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s8=analytics.division_stats)===null||_analytics$division_s8===void 0?void 0:(_analytics$division_s9=_analytics$division_s8.contract_summary)===null||_analytics$division_s9===void 0?void 0:_analytics$division_s9.probation_ready)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Probation Ready for Review\"})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 border rounded\",style:{backgroundColor:'#fff3e0'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-warning\",children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s0=analytics.division_stats)===null||_analytics$division_s0===void 0?void 0:(_analytics$division_s1=_analytics$division_s0.contract_summary)===null||_analytics$division_s1===void 0?void 0:_analytics$division_s1.contracts_ending)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Contracts Ending Soon\"})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 border rounded\",style:{backgroundColor:'#e8f5e8'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-success\",children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s10=analytics.division_stats)===null||_analytics$division_s10===void 0?void 0:(_analytics$division_s11=_analytics$division_s10.contract_summary)===null||_analytics$division_s11===void 0?void 0:_analytics$division_s11.permanent_eligible)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Permanent Eligible\"})]})})]})})]})]}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"education\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83C\\uDF93 Analisis Kecocokan Pendidikan-Pekerjaan (Data Mining)\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nama\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pendidikan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Posisi\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Match\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rekomendasi Durasi\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$employees=analytics.employees)===null||_analytics$employees===void 0?void 0:_analytics$employees.map((emp,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:emp.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[emp.tenure_months,\" bulan\"]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:emp.major}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:emp.education_level})]}),/*#__PURE__*/_jsx(\"td\",{children:emp.role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:getMatchLevelBadge(emp.education_job_match)})}),/*#__PURE__*/_jsx(\"td\",{children:emp.current_contract_type==='permanent'?/*#__PURE__*/_jsx(\"span\",{children:\"-\"}):emp.education_job_match==='Unmatch'?/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:(_emp$data_mining_reco9=>{const duration=(_emp$data_mining_reco9=emp.data_mining_recommendation)===null||_emp$data_mining_reco9===void 0?void 0:_emp$data_mining_reco9.recommended_duration;if(duration&&duration>0){return\"\".concat(duration,\" bulan (Evaluasi)\");}else{return'6 bulan (Evaluasi)';}})()}):/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:(_emp$data_mining_reco0=>{const duration=(_emp$data_mining_reco0=emp.data_mining_recommendation)===null||_emp$data_mining_reco0===void 0?void 0:_emp$data_mining_reco0.recommended_duration;// FIX: Kontrak 3 dengan duration 0 = Permanent\nif((emp.current_contract_type==='3'||emp.current_contract_type==='kontrak3')&&(duration===0||duration===null)){return'Permanent';}else if(duration&&duration>0){return\"\".concat(duration,\" bulan\");}else{return'6 bulan (Default)';}})()})})]},index)))||[]})]})})]})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"employees\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83D\\uDC65 Detail Karyawan Divisi\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:'#e3f2fd'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nama & Departemen\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pendidikan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Join Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Years Of Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Kontrak\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Match\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rekomendasi Kontrak\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Rekomendasi\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:analytics===null||analytics===void 0?void 0:analytics.employees.map((emp,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:emp.name}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:emp.role})]})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[emp.major,/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:emp.education_level})]})]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(emp.join_date).toLocaleDateString('id-ID')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Badge,{bg:\"info\",children:[emp.tenure_months,\" bulan\"]})}),/*#__PURE__*/_jsx(\"td\",{children:getContractStatusBadge(emp.current_contract_type,emp.days_to_contract_end)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:getMatchLevelBadge(emp.education_job_match)})}),/*#__PURE__*/_jsx(\"td\",{children:emp.current_contract_type==='permanent'?/*#__PURE__*/_jsx(\"span\",{children:\"-\"}):emp.education_job_match==='Unmatch'?/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:(_emp$data_mining_reco1=>{const duration=(_emp$data_mining_reco1=emp.data_mining_recommendation)===null||_emp$data_mining_reco1===void 0?void 0:_emp$data_mining_reco1.recommended_duration;if(duration&&duration>0){return\"\".concat(duration,\" bulan (Evaluasi)\");}else{return'6 bulan (Evaluasi)';}})()}):/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:(_emp$data_mining_reco10=>{const duration=(_emp$data_mining_reco10=emp.data_mining_recommendation)===null||_emp$data_mining_reco10===void 0?void 0:_emp$data_mining_reco10.recommended_duration;// FIX: Kontrak 3 dengan duration 0 = Permanent\nif((emp.current_contract_type==='3'||emp.current_contract_type==='kontrak3')&&(duration===0||duration===null)){return'Permanent';}else if(duration&&duration>0){return\"\".concat(duration,\" bulan\");}else{return'6 bulan (Default)';}})()})}),/*#__PURE__*/_jsx(\"td\",{children:getRecommendationStatusBadge(emp)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"primary\",onClick:()=>handleEmployeeDetail(emp),title:\"Lihat detail analisis karyawan\",children:\"Detail\"}),emp.current_contract_type==='permanent'?/*#__PURE__*/_jsxs(Button,{size:\"sm\",variant:\"outline-danger\",disabled:true,title:\"Karyawan memiliki kontrak permanent\",style:{backgroundColor:'#f8f9fa',borderColor:'#dc3545',color:'#dc3545',cursor:'not-allowed',opacity:0.7,fontSize:'0.7rem',padding:'0.25rem 0.4rem',lineHeight:'1.2'},children:[\"\\u274C Tidak Dapat\",/*#__PURE__*/_jsx(\"br\",{}),\"Direkomendasikan\"]}):/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"success\",onClick:()=>handleCreateRecommendation(emp),disabled:emp.has_pending_recommendation||emp.days_to_contract_end>30,title:emp.has_pending_recommendation?'Sudah ada rekomendasi pending':emp.days_to_contract_end>30?\"Kontrak masih berlaku \".concat(emp.days_to_contract_end,\" hari lagi\"):'Buat rekomendasi untuk karyawan ini',children:\"Rekomendasi\"})]})})]},index))})]})})]})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"processed\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{style:{backgroundColor:'#28a745',color:'white'},className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\u2705 Rekomendasi yang Sudah Diproses HR\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Lihat status rekomendasi Anda dan kontrak yang telah diperpanjang\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-light\",size:\"sm\",onClick:fetchProcessedRecommendations,className:\"ms-2\",children:\"\\uD83D\\uDD04 Refresh\"})]}),/*#__PURE__*/_jsx(Card.Body,{children:processedRecommendations.length>0?/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:'#e8f5e8'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Karyawan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rekomendasi Anda\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status HR\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kontrak Baru\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tanggal Diproses\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:processedRecommendations.map((rec,index)=>{var _rec$new_contract,_rec$new_contract2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:rec.employee.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:rec.employee.role})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"primary\",className:\"me-1\",children:rec.recommendation_type==='kontrak1'?'Kontrak 1':rec.recommendation_type==='kontrak2'?'Kontrak 2':rec.recommendation_type==='kontrak3'?'Kontrak 3':rec.recommendation_type}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[rec.recommended_duration,\" bulan\"]})]}),/*#__PURE__*/_jsx(\"td\",{children:rec.status==='approved'?/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"\\u2705 Disetujui\"}):/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"\\u274C Ditolak\"})}),/*#__PURE__*/_jsx(\"td\",{children:rec.status==='approved'&&(_rec$new_contract=rec.new_contract)!==null&&_rec$new_contract!==void 0&&_rec$new_contract.is_created?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"mb-1\",children:rec.new_contract.type}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-success\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2705 Kontrak Aktif:\"}),/*#__PURE__*/_jsx(\"br\",{}),rec.new_contract.end_date?\"\".concat(new Date(rec.new_contract.start_date).toLocaleDateString('id-ID'),\" - \").concat(new Date(rec.new_contract.end_date).toLocaleDateString('id-ID')):\"Mulai: \".concat(new Date(rec.new_contract.start_date).toLocaleDateString('id-ID'),\" (Permanent)\"),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",children:[\"Durasi: \",rec.recommended_duration==='permanent'?'Permanent':\"\".concat(rec.recommended_duration,\" bulan\")]})]})]}):rec.status==='approved'?/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"\\u23F3 Kontrak sedang dibuat\"}):/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Tidak ada kontrak baru\"})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(rec.updated_at).toLocaleDateString('id-ID')}),/*#__PURE__*/_jsx(\"td\",{children:rec.status==='approved'&&(_rec$new_contract2=rec.new_contract)!==null&&_rec$new_contract2!==void 0&&_rec$new_contract2.is_created?/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"\\uD83C\\uDF89 Kontrak Berhasil Diperpanjang\"}):rec.status==='approved'?/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"\\u23F3 Sedang Memproses Kontrak\"}):/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"\\u274C Rekomendasi Ditolak\"})})]},index);})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"display-1 mb-3\",children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Belum Ada Rekomendasi yang Diproses\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Rekomendasi yang Anda buat akan muncul di sini setelah diproses oleh HR.\"})]})})]})})]})]})]});};export default ManagerDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ArcElement","PointElement","LineElement","Filler","Bar","Doughnut","useAuth","useNavigate","Container","Row","Col","Card","Button","Table","Badge","Tab","Tabs","Nav","Alert","Spinner","ProgressBar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","register","ManagerDashboard","_analytics$division_s","_analytics$division_s2","_analytics$division_s3","_analytics$division_s4","_analytics$division_s5","_analytics$division_s6","_analytics$division_s7","_analytics$division_s8","_analytics$division_s9","_analytics$division_s0","_analytics$division_s1","_analytics$division_s10","_analytics$division_s11","_analytics$employees","analytics","setAnalytics","loading","setLoading","activeTab","setActiveTab","processedRecommendations","setProcessedRecommendations","error","setError","user","navigate","role","fetchManagerData","fetchProcessedRecommendations","interval","setInterval","clearInterval","showAlert","response","fetch","concat","division_id","credentials","headers","ok","Error","status","result","json","console","log","success","data","message","fetchEmployeeDetail","eid","responseText","text","substring","JSON","parse","jsonError","handleEmployeeClick","employee","name","setEmployeeDetail","setLoadingDetail","setShowEmployeeModal","_employeeData$dynamic","_employeeData$dynamic2","employeeData","dynamic_intelligence","match_category","optimal_duration","errorMessage","current_contract_type","handleEmployeeDetail","handleCreateRecommendation","type","setAlert","show","setTimeout","getRiskLevelChart","employees","length","labels","datasets","label","backgroundColor","borderWidth","lowRisk","filter","emp","_emp$data_mining_reco","data_mining_recommendation","risk_level","mediumRisk","_emp$data_mining_reco2","highRisk","_emp$data_mining_reco3","getContractRecommendationChart","borderColor","duration6","_emp$data_mining_reco4","recommended_duration","duration12","_emp$data_mining_reco5","duration18","_emp$data_mining_reco6","duration24","_emp$data_mining_reco7","duration36","_emp$data_mining_reco8","getMatchLevelBadge","matchStatus","bg","children","getContractStatusBadge","contractType","tenure","badges","variant","null","badge","className","getRecommendationStatusBadge","education_job_match","existingRecommendation","find","rec","employee_id","_employee$data_mining","duration","fluid","alert","dismissible","onClose","style","background","color","division_name","xs","division_stats","total_employees","activeKey","onSelect","Item","Link","eventKey","Content","Pane","md","Body","data_mining_summary","match_employees","recommended_extensions","high_risk_employees","Header","options","responsive","plugins","legend","position","display","scales","y","beginAtZero","contract_summary","probation_ready","contracts_ending","permanent_eligible","striped","map","index","tenure_months","major","education_level","_emp$data_mining_reco9","_emp$data_mining_reco0","hover","Date","join_date","toLocaleDateString","days_to_contract_end","_emp$data_mining_reco1","_emp$data_mining_reco10","size","onClick","title","disabled","cursor","opacity","fontSize","padding","lineHeight","has_pending_recommendation","_rec$new_contract","_rec$new_contract2","recommendation_type","new_contract","is_created","end_date","start_date","updated_at"],"sources":["C:/xampp/htdocs/web_srk_BI/frontend/src/pages/ManagerDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n  PointElement,\n  LineElement,\n  Filler,\n} from 'chart.js';\nimport { Bar, Doughnut } from 'react-chartjs-2';\nimport { useAuth } from '../App';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  Button,\n  Table,\n  Badge,\n  Tab,\n  Tabs,\n  Nav,\n  Alert,\n  Spinner,\n  ProgressBar\n} from 'react-bootstrap';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n  Filler\n);\n\nconst ManagerDashboard = () => {\n  const [analytics, setAnalytics] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [processedRecommendations, setProcessedRecommendations] = useState([]);\n  const [error, setError] = useState(null);\n  \n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (user?.role === 'manager') {\n      fetchManagerData();\n      fetchProcessedRecommendations();\n      \n      // Auto refresh processed recommendations every 30 seconds\n      const interval = setInterval(() => {\n        fetchProcessedRecommendations();\n      }, 30000);\n      \n      return () => clearInterval(interval);\n    } else if (user?.role === 'hr') {\n      showAlert('HR tidak dapat membuat rekomendasi. Hanya manager yang dapat membuat rekomendasi karyawan.', 'warning');\n    }\n  }, [user]);\n\n  const fetchManagerData = async () => {\n    try {\n      setLoading(true);\n      \n      const response = await fetch(`/backend/manager_analytics_by_division.php?division_id=${user.division_id}`, {\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      console.log('📊 Manager Analytics Result:', result);\n\n      if (result.success) {\n        setAnalytics(result.data);\n      } else {\n        console.error('❌ Failed to fetch analytics:', result.message);\n        setError(result.message || 'Failed to fetch analytics data');\n      }\n    } catch (error) {\n      console.error('Error fetching manager data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchProcessedRecommendations = async () => {\n    try {\n      const response = await fetch('/backend/api/recommendations.php?action=processed', {\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      if (result.success) {\n        setProcessedRecommendations(result.data || []);\n      }\n    } catch (error) {\n      console.error('Error fetching processed recommendations:', error);\n    }\n  };\n\n  const fetchEmployeeDetail = async (eid) => {\n    try {\n      console.log('Fetching employee detail for eid:', eid);\n      const response = await fetch(`http://localhost/web_srk_BI/backend/api/employees.php?action=employee_data_mining_detail&eid=${eid}`, {\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n      \n      console.log('Response status:', response.status);\n      console.log('Response OK:', response.ok);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      const responseText = await response.text();\n      console.log('Raw response text (first 200 chars):', responseText.substring(0, 200));\n      \n      let result;\n      try {\n        result = JSON.parse(responseText);\n      } catch (jsonError) {\n        console.error('JSON Parse Error:', jsonError);\n        console.log('Full response text:', responseText);\n        throw new Error('Server returned invalid JSON. Check browser console for details.');\n      }\n      \n      console.log('Employee detail API Response:', result);\n      \n      if (result.success) {\n        console.log('Employee detail loaded successfully');\n        return result.data; // Return the data for await\n      } else {\n        console.error('API Error:', result.error);\n        throw new Error(result.error || 'Failed to load employee data');\n      }\n    } catch (error) {\n      console.error('Network/Parse error:', error);\n      throw error; // Re-throw for handleEmployeeClick to catch\n    }\n  };\n\n  const handleEmployeeClick = async (employee) => {\n    console.log('🔍 handleEmployeeClick called for:', employee.name, 'EID:', employee.eid);\n    \n    // Reset state and show loading\n    setEmployeeDetail(null);\n    setLoadingDetail(true);\n    setShowEmployeeModal(true);\n    \n    try {\n      console.log('📞 Calling fetchEmployeeDetail...');\n      const employeeData = await fetchEmployeeDetail(employee.eid);\n      console.log('✅ Employee data received:', employeeData);\n      console.log('   - Employee:', employeeData?.employee);\n      console.log('   - Dynamic Intelligence:', employeeData?.dynamic_intelligence);\n      console.log('   - Match Category:', employeeData?.dynamic_intelligence?.match_category);\n      console.log('   - Optimal Duration:', employeeData?.dynamic_intelligence?.optimal_duration);\n      setEmployeeDetail(employeeData);\n    } catch (error) {\n      console.error('❌ Failed to fetch employee detail:', error);\n      setEmployeeDetail({\n        error: true,\n        errorMessage: error.message,\n        employee: {\n          name: employee.name,\n          eid: employee.eid,\n          role: employee.role || 'N/A',\n          current_contract_type: employee.current_contract_type || 'Unknown'\n        }\n      });\n    } finally {\n      setLoadingDetail(false);\n    }\n  };\n\n  const handleEmployeeDetail = (employee) => {\n    navigate(`/manager/employee/${employee.eid}`);\n  };\n\n  const handleCreateRecommendation = (employee) => {\n    navigate(`/manager/recommendation/${employee.eid}`);\n  };\n\n  const showAlert = (message, type) => {\n    setAlert({ show: true, message, type });\n    setTimeout(() => setAlert({ show: false, message: '', type: '' }), 5000);\n  };\n\n  const getRiskLevelChart = () => {\n    if (!analytics?.employees || analytics.employees.length === 0) {\n      return {\n        labels: ['Low Risk', 'Medium Risk', 'High Risk'],\n        datasets: [{\n          label: 'Distribusi Risk Level',\n          data: [0, 0, 0],\n          backgroundColor: ['#28a745', '#ffc107', '#dc3545'],\n          borderWidth: 1\n        }]\n      };\n    }\n\n    const employees = analytics.employees;\n    const lowRisk = employees.filter(emp => emp.data_mining_recommendation?.risk_level === 'Low').length;\n    const mediumRisk = employees.filter(emp => emp.data_mining_recommendation?.risk_level === 'Medium').length;\n    const highRisk = employees.filter(emp => emp.data_mining_recommendation?.risk_level === 'High').length;\n\n    return {\n      labels: ['Low Risk', 'Medium Risk', 'High Risk'],\n      datasets: [{\n        label: 'Distribusi Risk Level',\n        data: [lowRisk, mediumRisk, highRisk],\n        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],\n        borderWidth: 1\n      }]\n    };\n  };\n\n  const getContractRecommendationChart = () => {\n    if (!analytics?.employees || analytics.employees.length === 0) {\n      return {\n        labels: ['6 bulan', '12 bulan', '18 bulan', '24 bulan', '36 bulan'],\n        datasets: [{\n          label: 'Jumlah Rekomendasi',\n          data: [0, 0, 0, 0, 0],\n          backgroundColor: 'rgba(0, 123, 255, 0.8)',\n          borderColor: '#007bff',\n          borderWidth: 2\n        }]\n      };\n    }\n\n    const employees = analytics.employees;\n    const duration6 = employees.filter(emp => emp.data_mining_recommendation?.recommended_duration === 6).length;\n    const duration12 = employees.filter(emp => emp.data_mining_recommendation?.recommended_duration === 12).length;\n    const duration18 = employees.filter(emp => emp.data_mining_recommendation?.recommended_duration === 18).length;\n    const duration24 = employees.filter(emp => emp.data_mining_recommendation?.recommended_duration === 24).length;\n    const duration36 = employees.filter(emp => emp.data_mining_recommendation?.recommended_duration === 36).length;\n\n    return {\n      labels: ['6 bulan', '12 bulan', '18 bulan', '24 bulan', '36 bulan'],\n      datasets: [{\n        label: 'Jumlah Rekomendasi',\n        data: [duration6, duration12, duration18, duration24, duration36],\n        backgroundColor: 'rgba(0, 123, 255, 0.8)',\n        borderColor: '#007bff',\n        borderWidth: 2\n      }]\n    };\n  };\n\n  // Fungsi untuk mendapatkan status match dengan warna\n  const getMatchLevelBadge = (matchStatus) => {\n    if (matchStatus === 'Match') return <Badge bg=\"success\">Match</Badge>;\n    return <Badge bg=\"danger\">Unmatch</Badge>;\n  };\n\n  const getContractStatusBadge = (contractType, tenure) => {\n    const badges = {\n      'probation': { variant: 'warning', text: 'Probation' },\n      '1': { variant: 'info', text: 'Kontrak 1' },\n      '2': { variant: 'primary', text: 'Kontrak 2' },\n      '3': { variant: 'secondary', text: 'Kontrak 3' },\n      'permanent': { variant: 'success', text: 'Permanent' },\n      null: { variant: 'light', text: 'N/A' }\n    };\n\n    const badge = badges[contractType] || badges[null];\n    \n    if (contractType === 'probation' && tenure >= 3) {\n      return <Badge bg=\"warning\" className=\"border border-danger\">Probation (Ready for Review)</Badge>;\n    }\n\n    return <Badge bg={badge.variant}>{badge.text}</Badge>;\n  };\n\n  const getRecommendationStatusBadge = (employee) => {\n    if (employee.current_contract_type === 'permanent') {\n      return <Badge bg=\"secondary\">-</Badge>;\n    } else if (employee.education_job_match === 'Unmatch') {\n      return <Badge bg=\"danger\">TIDAK DIREKOMENDASIKAN</Badge>;\n    } else {\n      // Match - show recommended duration from Data Intelligence\n      const existingRecommendation = processedRecommendations.find(rec => rec.employee_id === employee.eid);\n      if (existingRecommendation && existingRecommendation.recommended_duration) {\n        return <Badge bg=\"success\">{existingRecommendation.recommended_duration} bulan</Badge>;\n      } else {\n        // Use Data Intelligence dari backend\n        const duration = employee.data_mining_recommendation?.recommended_duration;\n        \n        // Untuk Kontrak 3, duration 0 berarti Permanent\n        if ((employee.current_contract_type === '3' || employee.current_contract_type === 'kontrak3') && duration === 0) {\n          return <Badge bg=\"success\">PERMANENT</Badge>;\n        }\n        // Untuk yang lain, gunakan duration dari Data Intelligence\n        else if (duration && duration > 0) {\n          return <Badge bg=\"success\">{duration} bulan</Badge>;\n        }\n        // Default fallback\n        else {\n          if (employee.current_contract_type === '3') {\n            return <Badge bg=\"info\">PERMANENT</Badge>;\n          } else if (employee.current_contract_type === '2') {\n            return <Badge bg=\"warning\">6 bulan (Evaluasi)</Badge>;\n          } else {\n            return <Badge bg=\"secondary\">Tidak Ada Data</Badge>;\n          }\n        }\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container-fluid mt-4\">\n        <div className=\"text-center\">\n          <div className=\"spinner-border text-primary\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n          <p className=\"mt-2\">Memuat data intelligence...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Container fluid className=\"mt-3\">\n      {alert.show && (\n        <Alert variant={alert.type} dismissible onClose={() => setAlert({ show: false, message: '', type: '' })}>\n          {alert.message}\n        </Alert>\n      )}\n      \n      {/* Header dengan tema biru konsisten */}\n      <div className=\"mb-4 p-4 rounded\" style={{\n        background: 'linear-gradient(135deg, #007bff 0%, #0056b3 100%)',\n        color: 'white'\n      }}>\n        <Row className=\"align-items-center\">\n          <Col>\n            <h2>Manager Dashboard - Data Intelligence</h2>\n            <p className=\"mb-0\">Analisis Kecocokan Pendidikan & Rekomendasi Kontrak untuk Divisi</p>\n            <small>{user.division_name} | Business Intelligence System</small>\n          </Col>\n          <Col xs=\"auto\">\n            <div className=\"text-end\">\n              <h3 className=\"mb-0\">{analytics?.division_stats?.total_employees || 0}</h3>\n              <small>Karyawan Aktif</small>\n            </div>\n          </Col>\n        </Row>\n      </div>\n\n      {/* Navigation Tabs dengan tema biru */}\n      <Tab.Container activeKey={activeTab} onSelect={setActiveTab}>\n        <Nav variant=\"tabs\" className=\"mb-4\">\n          <Nav.Item>\n            <Nav.Link eventKey=\"overview\" style={{\n              color: activeTab === 'overview' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'overview' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Overview\n            </Nav.Link>\n          </Nav.Item>\n          <Nav.Item>\n            <Nav.Link eventKey=\"education\" style={{\n              color: activeTab === 'education' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'education' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Analisis Pendidikan\n            </Nav.Link>\n          </Nav.Item>\n\n          <Nav.Item>\n            <Nav.Link eventKey=\"employees\" style={{\n              color: activeTab === 'employees' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'employees' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Detail Karyawan\n            </Nav.Link>\n          </Nav.Item>\n          <Nav.Item>\n            <Nav.Link eventKey=\"processed\" style={{\n              color: activeTab === 'processed' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'processed' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Rekomendasi Diproses ({processedRecommendations.length})\n            </Nav.Link>\n          </Nav.Item>\n        </Nav>\n\n        <Tab.Content>\n          {/* Overview Tab */}\n          <Tab.Pane eventKey=\"overview\">\n            <Row className=\"mb-4\">\n              {/* Key Metrics Cards dengan gradient biru */}\n              <Col md={4} className=\"mb-3\">\n                <Card className=\"h-100\" style={{\n                  background: 'linear-gradient(135deg, #28a745 0%, #1e7e34 100%)',\n                  color: 'white'\n                }}>\n                  <Card.Body className=\"text-center\">\n                    <h3>{analytics?.division_stats?.data_mining_summary?.match_employees || 0}</h3>\n                    <small>Match Employees</small>\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={4} className=\"mb-3\">\n                <Card className=\"h-100\" style={{\n                  background: 'linear-gradient(135deg, #ffc107 0%, #e0a800 100%)',\n                  color: 'white'\n                }}>\n                  <Card.Body className=\"text-center\">\n                    <h3>{analytics?.division_stats?.data_mining_summary?.recommended_extensions || 0}</h3>\n                    <small>Rekomendasi Perpanjangan</small>\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={4} className=\"mb-3\">\n                <Card className=\"h-100\" style={{\n                  background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\n                  color: 'white'\n                }}>\n                  <Card.Body className=\"text-center\">\n                    <h3>{analytics?.division_stats?.data_mining_summary?.high_risk_employees || 0}</h3>\n                    <small>High Risk Employees</small>\n                  </Card.Body>\n                </Card>\n              </Col>\n            </Row>\n\n            <Row>\n              <Col md={6} className=\"mb-4\">\n                <Card>\n                  <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                    <h5 className=\"mb-0\">📊 Distribusi Tingkat Risiko</h5>\n                  </Card.Header>\n                  <Card.Body>\n                    <Doughnut data={getRiskLevelChart()} options={{\n                      responsive: true,\n                      plugins: {\n                        legend: { position: 'bottom' }\n                      }\n                    }} />\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={6} className=\"mb-4\">\n                <Card>\n                  <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                    <h5 className=\"mb-0\">📈 Rekomendasi Durasi Kontrak</h5>\n                  </Card.Header>\n                  <Card.Body>\n                    <Bar data={getContractRecommendationChart()} options={{\n                      responsive: true,\n                      plugins: {\n                        legend: { display: false }\n                      },\n                      scales: {\n                        y: { beginAtZero: true }\n                      }\n                    }} />\n                  </Card.Body>\n                </Card>\n              </Col>\n            </Row>\n\n            {/* Contract Intelligence Summary */}\n            <Card className=\"mb-4\">\n              <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                <h5 className=\"mb-0\">🧠 Contract Intelligence Summary</h5>\n              </Card.Header>\n              <Card.Body>\n                <Row>\n                  <Col md={4}>\n                    <div className=\"text-center p-3 border rounded\" style={{ backgroundColor: '#e3f2fd' }}>\n                      <h4 className=\"text-primary\">{analytics?.division_stats?.contract_summary?.probation_ready || 0}</h4>\n                      <small>Probation Ready for Review</small>\n                    </div>\n                  </Col>\n                  <Col md={4}>\n                    <div className=\"text-center p-3 border rounded\" style={{ backgroundColor: '#fff3e0' }}>\n                      <h4 className=\"text-warning\">{analytics?.division_stats?.contract_summary?.contracts_ending || 0}</h4>\n                      <small>Contracts Ending Soon</small>\n                    </div>\n                  </Col>\n                  <Col md={4}>\n                    <div className=\"text-center p-3 border rounded\" style={{ backgroundColor: '#e8f5e8' }}>\n                      <h4 className=\"text-success\">{analytics?.division_stats?.contract_summary?.permanent_eligible || 0}</h4>\n                      <small>Permanent Eligible</small>\n                    </div>\n                  </Col>\n                </Row>\n              </Card.Body>\n            </Card>\n          </Tab.Pane>\n\n          {/* Education Analysis Tab */}\n          <Tab.Pane eventKey=\"education\">\n            <Card>\n              <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                <h5 className=\"mb-0\">🎓 Analisis Kecocokan Pendidikan-Pekerjaan (Data Mining)</h5>\n              </Card.Header>\n              <Card.Body>\n                <Table responsive striped>\n                  <thead style={{ backgroundColor: '#007bff', color: 'white' }}>\n                    <tr>\n                      <th>Nama</th>\n                      <th>Pendidikan</th>\n                      <th>Posisi</th>\n                      <th>Status Match</th>\n                      <th>Rekomendasi Durasi</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {analytics?.employees?.map((emp, index) => (\n                      <tr key={index}>\n                        <td>\n                          <strong>{emp.name}</strong>\n                          <br />\n                          <small className=\"text-muted\">{emp.tenure_months} bulan</small>\n                        </td>\n                        <td>\n                          <div>{emp.major}</div>\n                          <small className=\"text-muted\">{emp.education_level}</small>\n                        </td>\n                        <td>{emp.role}</td>\n                        <td>\n                          <div className=\"d-flex align-items-center\">\n                            {getMatchLevelBadge(emp.education_job_match)}\n                          </div>\n                        </td>\n                        <td>\n                          {/* FIX: Proper recommendation display */}\n                          {emp.current_contract_type === 'permanent' ? (\n                            <span>-</span>\n                          ) : emp.education_job_match === 'Unmatch' ? (\n                            <Badge bg=\"warning\">\n                              {(() => {\n                                const duration = emp.data_mining_recommendation?.recommended_duration;\n                                if (duration && duration > 0) {\n                                  return `${duration} bulan (Evaluasi)`;\n                                } else {\n                                  return '6 bulan (Evaluasi)';\n                                }\n                              })()}\n                            </Badge>\n                          ) : (\n                          <Badge bg=\"success\">\n                            {(() => {\n                              const duration = emp.data_mining_recommendation?.recommended_duration;\n                              // FIX: Kontrak 3 dengan duration 0 = Permanent\n                              if ((emp.current_contract_type === '3' || emp.current_contract_type === 'kontrak3') && \n                                  (duration === 0 || duration === null)) {\n                                return 'Permanent';\n                              } else if (duration && duration > 0) {\n                                return `${duration} bulan`;\n                              } else {\n                                return '6 bulan (Default)';\n                              }\n                            })()}\n                          </Badge>\n                          )}\n                        </td>\n                      </tr>\n                    )) || []}\n                  </tbody>\n                </Table>\n              </Card.Body>\n            </Card>\n          </Tab.Pane>\n\n          {/* Employee Details Tab */}\n          <Tab.Pane eventKey=\"employees\">\n            <Card>\n              <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                <h5 className=\"mb-0\">👥 Detail Karyawan Divisi</h5>\n              </Card.Header>\n              <Card.Body>\n                <Table responsive hover>\n                  <thead style={{ backgroundColor: '#e3f2fd' }}>\n                    <tr>\n                      <th>Nama & Departemen</th>\n                      <th>Pendidikan</th>\n                      <th>Join Date</th>\n                                              <th>Years Of Service</th>\n                      <th>Status Kontrak</th>\n                      <th>Status Match</th>\n                      <th>Rekomendasi Kontrak</th>\n                      <th>Status Rekomendasi</th>\n                      <th>Action</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {analytics?.employees.map((emp, index) => (\n                      <tr key={index}>\n                        <td>\n                          <div>\n                            <strong>{emp.name}</strong>\n                            <>\n                              <br />\n                              <small className=\"text-muted\">{emp.role}</small>\n                            </>\n                          </div>\n                        </td>\n                        <td>\n                          {emp.major}\n                          <>\n                            <br />\n                            <small className=\"text-muted\">{emp.education_level}</small>\n                          </>\n                        </td>\n                        <td>{new Date(emp.join_date).toLocaleDateString('id-ID')}</td>\n                        <td>\n                          <Badge bg=\"info\">{emp.tenure_months} bulan</Badge>\n                        </td>\n                        <td>\n                          {getContractStatusBadge(emp.current_contract_type, emp.days_to_contract_end)}\n                        </td>\n                        <td>\n                          <div className=\"d-flex align-items-center\">\n                            {getMatchLevelBadge(emp.education_job_match)}\n                          </div>\n                        </td>\n                        <td>\n                          {/* FIX: Proper recommendation display */}\n                          {emp.current_contract_type === 'permanent' ? (\n                            <span>-</span>\n                          ) : emp.education_job_match === 'Unmatch' ? (\n                            <Badge bg=\"warning\">\n                              {(() => {\n                                const duration = emp.data_mining_recommendation?.recommended_duration;\n                                if (duration && duration > 0) {\n                                  return `${duration} bulan (Evaluasi)`;\n                                } else {\n                                  return '6 bulan (Evaluasi)';\n                                }\n                              })()}\n                            </Badge>\n                          ) : (\n                          <Badge bg=\"success\">\n                            {(() => {\n                              const duration = emp.data_mining_recommendation?.recommended_duration;\n                              // FIX: Kontrak 3 dengan duration 0 = Permanent\n                              if ((emp.current_contract_type === '3' || emp.current_contract_type === 'kontrak3') && \n                                  (duration === 0 || duration === null)) {\n                                return 'Permanent';\n                              } else if (duration && duration > 0) {\n                                return `${duration} bulan`;\n                              } else {\n                                return '6 bulan (Default)';\n                              }\n                            })()}\n                          </Badge>\n                          )}\n                        </td>\n                        <td>\n                          {getRecommendationStatusBadge(emp)}\n                        </td>\n                        <td>\n                          <div className=\"d-flex gap-1\">\n                            <Button \n                              size=\"sm\" \n                              variant=\"primary\"\n                              onClick={() => handleEmployeeDetail(emp)}\n                              title=\"Lihat detail analisis karyawan\"\n                            >\n                              Detail\n                            </Button>\n                            {/* Only permanent employees cannot be recommended */}\n                            {emp.current_contract_type === 'permanent' ? (\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline-danger\"\n                                disabled\n                                title=\"Karyawan memiliki kontrak permanent\"\n                                style={{ \n                                  backgroundColor: '#f8f9fa',\n                                  borderColor: '#dc3545',\n                                  color: '#dc3545',\n                                  cursor: 'not-allowed',\n                                  opacity: 0.7,\n                                  fontSize: '0.7rem',\n                                  padding: '0.25rem 0.4rem',\n                                  lineHeight: '1.2'\n                                }}\n                              >\n                                ❌ Tidak Dapat<br/>Direkomendasikan\n                              </Button>\n                            ) : (\n                              <Button \n                                size=\"sm\" \n                                variant=\"success\"\n                                onClick={() => handleCreateRecommendation(emp)}\n                                disabled={\n                                  emp.has_pending_recommendation || \n                                  emp.days_to_contract_end > 30\n                                }\n                                title={\n                                  emp.has_pending_recommendation ? 'Sudah ada rekomendasi pending' :\n                                  emp.days_to_contract_end > 30 ? `Kontrak masih berlaku ${emp.days_to_contract_end} hari lagi` :\n                                  'Buat rekomendasi untuk karyawan ini'\n                                }\n                              >\n                                Rekomendasi\n                              </Button>\n                            )}\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </Table>\n              </Card.Body>\n            </Card>\n          </Tab.Pane>\n\n          {/* Processed Recommendations Tab */}\n          <Tab.Pane eventKey=\"processed\">\n            <Card>\n              <Card.Header style={{ backgroundColor: '#28a745', color: 'white' }} className=\"d-flex justify-content-between align-items-center\">\n                <div>\n                  <h5 className=\"mb-0\">✅ Rekomendasi yang Sudah Diproses HR</h5>\n                  <small>Lihat status rekomendasi Anda dan kontrak yang telah diperpanjang</small>\n                </div>\n                <Button \n                  variant=\"outline-light\" \n                  size=\"sm\" \n                  onClick={fetchProcessedRecommendations}\n                  className=\"ms-2\"\n                >\n                  🔄 Refresh\n                </Button>\n              </Card.Header>\n              <Card.Body>\n                {processedRecommendations.length > 0 ? (\n                  <Table responsive hover>\n                    <thead style={{ backgroundColor: '#e8f5e8' }}>\n                      <tr>\n                        <th>Karyawan</th>\n                        <th>Rekomendasi Anda</th>\n                        <th>Status HR</th>\n                        <th>Kontrak Baru</th>\n                        <th>Tanggal Diproses</th>\n                        <th>Status</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {processedRecommendations.map((rec, index) => (\n                        <tr key={index}>\n                          <td>\n                            <div>\n                              <strong>{rec.employee.name}</strong>\n                              <br />\n                              <small className=\"text-muted\">{rec.employee.role}</small>\n                            </div>\n                          </td>\n                          <td>\n                            <Badge bg=\"primary\" className=\"me-1\">\n                              {rec.recommendation_type === 'kontrak1' ? 'Kontrak 1' :\n                               rec.recommendation_type === 'kontrak2' ? 'Kontrak 2' :\n                               rec.recommendation_type === 'kontrak3' ? 'Kontrak 3' : rec.recommendation_type}\n                            </Badge>\n                            <br />\n                            <small className=\"text-muted\">{rec.recommended_duration} bulan</small>\n                          </td>\n                          <td>\n                            {rec.status === 'approved' ? (\n                              <Badge bg=\"success\">✅ Disetujui</Badge>\n                            ) : (\n                              <Badge bg=\"danger\">❌ Ditolak</Badge>\n                            )}\n                          </td>\n                                                     <td>\n                             {rec.status === 'approved' && rec.new_contract?.is_created ? (\n                               <div>\n                                 <Badge bg=\"success\" className=\"mb-1\">{rec.new_contract.type}</Badge>\n                                 <br />\n                                 <small className=\"text-success\">\n                                   <strong>✅ Kontrak Aktif:</strong><br />\n                                   {rec.new_contract.end_date ? \n                                     `${new Date(rec.new_contract.start_date).toLocaleDateString('id-ID')} - ${new Date(rec.new_contract.end_date).toLocaleDateString('id-ID')}` : \n                                     `Mulai: ${new Date(rec.new_contract.start_date).toLocaleDateString('id-ID')} (Permanent)`\n                                   }\n                                   <br />\n                                   <span className=\"text-muted\">Durasi: {rec.recommended_duration === 'permanent' ? 'Permanent' : `${rec.recommended_duration} bulan`}</span>\n                                 </small>\n                               </div>\n                             ) : rec.status === 'approved' ? (\n                               <Badge bg=\"warning\">⏳ Kontrak sedang dibuat</Badge>\n                             ) : (\n                               <small className=\"text-muted\">Tidak ada kontrak baru</small>\n                             )}\n                           </td>\n                          <td>\n                            {new Date(rec.updated_at).toLocaleDateString('id-ID')}\n                          </td>\n                                                     <td>\n                             {rec.status === 'approved' && rec.new_contract?.is_created ? (\n                               <Badge bg=\"success\">🎉 Kontrak Berhasil Diperpanjang</Badge>\n                             ) : rec.status === 'approved' ? (\n                               <Badge bg=\"warning\">⏳ Sedang Memproses Kontrak</Badge>\n                             ) : (\n                               <Badge bg=\"danger\">❌ Rekomendasi Ditolak</Badge>\n                             )}\n                           </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </Table>\n                ) : (\n                  <div className=\"text-center py-5\">\n                    <div className=\"display-1 mb-3\">📋</div>\n                    <h5>Belum Ada Rekomendasi yang Diproses</h5>\n                    <p className=\"text-muted\">\n                      Rekomendasi yang Anda buat akan muncul di sini setelah diproses oleh HR.\n                    </p>\n                  </div>\n                )}\n              </Card.Body>\n            </Card>\n          </Tab.Pane>\n        </Tab.Content>\n      </Tab.Container>\n    </Container>\n  );\n};\n\nexport default ManagerDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}