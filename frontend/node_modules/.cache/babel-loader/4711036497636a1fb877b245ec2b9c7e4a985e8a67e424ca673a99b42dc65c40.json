{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ArcElement,PointElement,LineElement,Filler}from'chart.js';import{Bar,Doughnut}from'react-chartjs-2';import{useAuth}from'../App';import{Card,Container,Row,Col,Nav,Tab,Table,Badge,Button,Modal,Alert,Spinner,ProgressBar,Form}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,PointElement,LineElement,Title,Tooltip,Legend,ArcElement,Filler);const ManagerDashboard=()=>{var _analytics$division_s,_analytics$division_s2,_analytics$division_s3,_analytics$division_s4,_analytics$division_s5,_analytics$division_s6,_analytics$division_s7,_analytics$employees,_employeeDetail$dynam,_employeeDetail$dynam2,_employeeDetail$dynam3,_employeeDetail$emplo3,_employeeDetail$emplo4,_employeeDetail$emplo5,_employeeDetail$emplo6,_employeeDetail$emplo7;const[analytics,setAnalytics]=useState(null);const[educationAnalysis,setEducationAnalysis]=useState(null);const[divisionIntelligence,setDivisionIntelligence]=useState(null);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('overview');const{user}=useAuth();const[showEmployeeModal,setShowEmployeeModal]=useState(false);const[selectedEmployee,setSelectedEmployee]=useState(null);const[employeeDetail,setEmployeeDetail]=useState(null);const[loadingDetail,setLoadingDetail]=useState(false);const[autoRefresh,setAutoRefresh]=useState(false);// Auto-refresh disabled by default\nconst[refreshInterval,setRefreshInterval]=useState(null);const[lastRefresh,setLastRefresh]=useState(null);const[showAllProfiles,setShowAllProfiles]=useState(false);// Reset showAllProfiles when selectedEmployee changes\nuseEffect(()=>{setShowAllProfiles(false);},[selectedEmployee]);const[recommendationData,setRecommendationData]=useState({recommendation_type:'extend',recommended_duration:'',contract_start_date:'',reason:''});const[alert,setAlert]=useState({show:false,message:'',type:''});const[processedRecommendations,setProcessedRecommendations]=useState([]);// Handler for closing modal with data refresh\nconst handleCloseModal=()=>{console.log('üîÑ Closing modal and refreshing data...');setShowEmployeeModal(false);// Refresh data immediately to ensure latest contract status\nsetTimeout(()=>{fetchManagerData();fetchProcessedRecommendations();},500);// Small delay to ensure any backend processing is complete\n};useEffect(()=>{if((user===null||user===void 0?void 0:user.role)==='manager'){fetchManagerData();fetchProcessedRecommendations();}else if((user===null||user===void 0?void 0:user.role)==='hr'){showAlert('HR tidak dapat membuat rekomendasi. Hanya manager yang dapat membuat rekomendasi karyawan.','warning');}},[user]);// Separate useEffect for auto-refresh management\nuseEffect(()=>{if(autoRefresh&&(user===null||user===void 0?void 0:user.role)==='manager'){const interval=setInterval(()=>{console.log('üîÑ Auto-refreshing manager data and processed recommendations...');fetchManagerData();fetchProcessedRecommendations();},30000);// 30 seconds\nsetRefreshInterval(interval);return()=>{if(interval){clearInterval(interval);}};}else if(refreshInterval){clearInterval(refreshInterval);setRefreshInterval(null);}},[autoRefresh,user]);// Cleanup on component unmount\nuseEffect(()=>{return()=>{if(refreshInterval){clearInterval(refreshInterval);}};},[]);// Toggle auto-refresh function\nconst toggleAutoRefresh=()=>{setAutoRefresh(!autoRefresh);if(autoRefresh){console.log('üõë Auto-refresh disabled');}else{console.log('‚ñ∂Ô∏è Auto-refresh enabled (30 seconds)');}};// Manual refresh function  \nconst handleManualRefresh=()=>{console.log('üîÑ Manual refresh clicked');fetchManagerData();fetchProcessedRecommendations();};// Update recommendation form when employee detail is loaded\nuseEffect(()=>{if(employeeDetail&&employeeDetail.dynamic_intelligence&&selectedEmployee){const intelligence=employeeDetail.dynamic_intelligence;const duration=intelligence.optimal_duration;const category=intelligence.match_category;// PROPER FORM DEFAULTS based on dynamic intelligence\nlet defaultType='kontrak2';let defaultDuration=duration||6;// Check for Non-IT major elimination first\nconst nonItMajors=['kedokteran','farmasi','hukum','akuntansi','manajemen','ekonomi','psikologi','bahasa','sastra','pendidikan','sejarah','geografi','biologi','kimia','fisika','matematika','pertanian','kehutanan','perikanan','kedokteran hewan','arsitektur','sipil','mesin','elektro','industri','teknik','seni','desain','komunikasi','jurnalistik','sosiologi','antropologi','ilmu politik','hubungan internasional','administrasi','keperawatan','kebidanan','gizi','kesehatan masyarakat','olahraga','keolahragaan'];const employeeMajor=selectedEmployee.major?selectedEmployee.major.toLowerCase().trim():'';const isNonIT=nonItMajors.some(nonItMajor=>employeeMajor.includes(nonItMajor));if(isNonIT){// Automatic elimination for Non-IT majors\ndefaultType='terminate';defaultDuration=0;}// Untuk MATCH employees, ikuti dynamic intelligence\nelse if(selectedEmployee.education_job_match==='Match'){if(category==='Siap Permanent'||duration===0){defaultType='permanent';defaultDuration=0;}else if(category==='Berpotensi Kontrak 3'||duration>=18){defaultType='kontrak3';defaultDuration=duration||18;}else if(category==='Berpotensi Kontrak 2'||duration>=6){defaultType='kontrak2';defaultDuration=duration||12;}else{defaultType='kontrak2';defaultDuration=6;}}// UNMATCH employees - POLICY: Tetap evaluasi kontrak, tidak langsung permanent\nelse if(selectedEmployee.education_job_match==='Unmatch'){// UNMATCH - determine evaluation contract based on current contract\n// KONSISTEN dengan getRecommendationStatusBadge di tabel\nif(selectedEmployee.current_contract_type==='probation'){defaultType='kontrak2';defaultDuration=6;}else if(selectedEmployee.current_contract_type==='1'){defaultType='kontrak2';defaultDuration=6;}else if(selectedEmployee.current_contract_type==='2'){defaultType='kontrak3';defaultDuration=6;}else if(selectedEmployee.current_contract_type==='3'){// POLICY: Kontrak 3 unmatch tetap evaluasi kontrak 3, tidak langsung permanent\n// Meskipun dynamic intelligence suggest permanent, kita tetap konservatif\n// untuk unmatch employees karena tingginya risk resign\ndefaultType='kontrak3';defaultDuration=6;}else{defaultType='kontrak2';defaultDuration=6;}}// Special handling untuk reasoning text - kosong sesuai permintaan user\nlet reasonPrefix='';setRecommendationData({eid:selectedEmployee.eid,employee_name:selectedEmployee.name,recommendation_type:defaultType,recommended_duration:defaultDuration,reason:''});}},[employeeDetail,selectedEmployee]);const fetchManagerData=async()=>{try{setLoading(true);// Use the simplified API endpoint that works without dynamic intelligence\nconst timestamp=new Date().getTime();const analyticsRes=await axios.get(`/manager_analytics_simple.php?t=${timestamp}`,{withCredentials:true});console.log('üî• NEW API Response:',analyticsRes.data);if(analyticsRes.data.success){var _rawData$statistics,_rawData$statistics2,_rawData$statistics3,_rawData$statistics4,_rawData$employees;const rawData=analyticsRes.data.data;// Transform the data structure to match what the frontend expects\nconst transformedData={...rawData,division_stats:{total_employees:((_rawData$statistics=rawData.statistics)===null||_rawData$statistics===void 0?void 0:_rawData$statistics.total_employees)||0,data_mining_summary:{match_employees:((_rawData$statistics2=rawData.statistics)===null||_rawData$statistics2===void 0?void 0:_rawData$statistics2.match_employees)||0,recommended_extensions:((_rawData$statistics3=rawData.statistics)===null||_rawData$statistics3===void 0?void 0:_rawData$statistics3.extension_employees)||0,high_risk_employees:((_rawData$statistics4=rawData.statistics)===null||_rawData$statistics4===void 0?void 0:_rawData$statistics4.high_risk_employees)||0}}};setAnalytics(transformedData);console.log('‚úÖ Analytics data set:',transformedData);// Debug contract end dates\nconsole.log('üìÖ Contract End Dates Debug:',(_rawData$employees=rawData.employees)===null||_rawData$employees===void 0?void 0:_rawData$employees.slice(0,3).map(emp=>({name:emp.name,contract_type:emp.current_contract_type,contract_end:emp.contract_end,days_to_end:emp.days_to_contract_end})));// Use the same analytics data for education analysis\nif(rawData.employees){const employees=rawData.employees;const matchDistribution={'Match':employees.filter(emp=>emp.education_job_match==='Match').length,'Unmatch':employees.filter(emp=>emp.education_job_match==='Unmatch').length};setEducationAnalysis({education_analysis:employees,match_distribution:matchDistribution,contract_progression:employees.filter(emp=>emp.contract_status==='Ready for Review'||emp.tenure_months>=3).map(emp=>{var _emp$data_mining_reco;return{name:emp.name,status:emp.contract_status,recommendation:((_emp$data_mining_reco=emp.data_mining_recommendation)===null||_emp$data_mining_reco===void 0?void 0:_emp$data_mining_reco.reason)||'Standard review'};})});setDivisionIntelligence({performance_predictions:employees.map(emp=>{var _emp$intelligence_dat,_emp$intelligence_dat2;return{name:emp.name,success_probability:((_emp$intelligence_dat=emp.intelligence_data)===null||_emp$intelligence_dat===void 0?void 0:_emp$intelligence_dat.success_probability)||75,risk_level:((_emp$intelligence_dat2=emp.intelligence_data)===null||_emp$intelligence_dat2===void 0?void 0:_emp$intelligence_dat2.risk_level)||'Low',contract_recommendation:emp.data_mining_recommendation};}),urgent_contract_decisions:employees.filter(emp=>{var _emp$intelligence_dat3;return((_emp$intelligence_dat3=emp.intelligence_data)===null||_emp$intelligence_dat3===void 0?void 0:_emp$intelligence_dat3.risk_level)==='High'||emp.contract_status==='Ready for Review';})});}setLastRefresh(new Date());// Add this line to track last refresh\n}}catch(error){console.error('Error fetching manager data:',error);}finally{setLoading(false);}};const fetchProcessedRecommendations=async()=>{try{const response=await axios.get('http://localhost/web_srk_BI/backend/api/recommendations.php?action=processed',{withCredentials:true});if(response.data.success){setProcessedRecommendations(response.data.data);console.log('‚úÖ Processed recommendations loaded:',response.data.data);// Debug: Check mapping structure\nconsole.log('üîç Processed recommendations mapping debug:',response.data.data.map(rec=>{var _rec$employee,_rec$employee2;return{rec_id:rec.recommendation_id,employee_name:(_rec$employee=rec.employee)===null||_rec$employee===void 0?void 0:_rec$employee.name,employee_eid:(_rec$employee2=rec.employee)===null||_rec$employee2===void 0?void 0:_rec$employee2.eid,status:rec.status,duration:rec.recommended_duration};}));// Debug: Check for resign status\nconst resignRecs=response.data.data.filter(rec=>rec.status==='resign');if(resignRecs.length>0){console.log('üîç Found resign recommendations:',resignRecs);}}else{console.error('Failed to fetch processed recommendations:',response.data.error);}}catch(error){console.error('Error fetching processed recommendations:',error);}};const fetchEmployeeDetail=async eid=>{setLoadingDetail(true);try{console.log('Fetching employee detail for eid:',eid);const response=await fetch(`http://localhost/web_srk_BI/backend/api/employees.php?action=employee_data_mining_detail&eid=${eid}`,{credentials:'include',headers:{'Content-Type':'application/json'}});console.log('Response status:',response.status);console.log('Response OK:',response.ok);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`);}const responseText=await response.text();console.log('Raw response text (first 200 chars):',responseText.substring(0,200));let result;try{result=JSON.parse(responseText);}catch(jsonError){console.error('JSON Parse Error:',jsonError);console.log('Full response text:',responseText);throw new Error('Server returned invalid JSON. Check browser console for details.');}console.log('Employee detail API Response:',result);if(result.success){setEmployeeDetail(result.data);console.log('Employee detail loaded successfully');return result.data;// Return the data for await\n}else{console.error('API Error:',result.error);setEmployeeDetail(null);throw new Error(result.error||'Failed to load employee data');}}catch(error){console.error('Network/Parse error:',error);setEmployeeDetail(null);throw error;// Re-throw for handleEmployeeClick to catch\n}finally{setLoadingDetail(false);}};const handleEmployeeClick=async employee=>{console.log('üîç handleEmployeeClick called for:',employee.name,'EID:',employee.eid);setSelectedEmployee(employee);setLoadingDetail(true);// Always show the modal first (will show loading state)\nsetShowEmployeeModal(true);// Fetch fresh employee detail data\ntry{var _employeeData$employe,_employeeData$dynamic,_employeeData$dynamic2;console.log('‚è≥ Fetching employee detail...');const employeeData=await fetchEmployeeDetail(employee.eid);console.log('‚úÖ Employee data loaded, setting state');console.log('   - Employee Contract Type:',employeeData===null||employeeData===void 0?void 0:(_employeeData$employe=employeeData.employee)===null||_employeeData$employe===void 0?void 0:_employeeData$employe.current_contract_type);console.log('   - Dynamic Intelligence:',employeeData===null||employeeData===void 0?void 0:employeeData.dynamic_intelligence);console.log('   - Match Category:',employeeData===null||employeeData===void 0?void 0:(_employeeData$dynamic=employeeData.dynamic_intelligence)===null||_employeeData$dynamic===void 0?void 0:_employeeData$dynamic.match_category);console.log('   - Optimal Duration:',employeeData===null||employeeData===void 0?void 0:(_employeeData$dynamic2=employeeData.dynamic_intelligence)===null||_employeeData$dynamic2===void 0?void 0:_employeeData$dynamic2.optimal_duration);// Set the employee detail state\nsetEmployeeDetail(employeeData);setLoadingDetail(false);}catch(error){console.error('‚ùå Failed to fetch employee detail:',error);setLoadingDetail(false);// Don't close modal, show error in modal instead\nsetEmployeeDetail({error:true,errorMessage:error.message,employee:{name:employee.name,eid:employee.eid,current_contract_type:employee.current_contract_type}});}// Initialize recommendation data based on employee status - will be updated with dynamic intelligence later\nconst defaultType=employee.education_job_match==='Unmatch'?'kontrak2':'kontrak2';setRecommendationData({eid:employee.eid,employee_name:employee.name,recommendation_type:defaultType,recommended_duration:6,reason:'Rekomendasi akan diupdate berdasarkan dynamic intelligence analysis...'});};const handleCreateRecommendation=async employee=>{console.log('üîß handleCreateRecommendation called for:',employee.name,'Contract:',employee.current_contract_type);// Call the same function as handleEmployeeClick to open detail modal with form\nawait handleEmployeeClick(employee);};const submitRecommendation=async()=>{try{var _employeeDetail$emplo,_employeeDetail$emplo2;// Enhanced validation with fallback\nconst employeeEid=(employeeDetail===null||employeeDetail===void 0?void 0:(_employeeDetail$emplo=employeeDetail.employee)===null||_employeeDetail$emplo===void 0?void 0:_employeeDetail$emplo.eid)||(selectedEmployee===null||selectedEmployee===void 0?void 0:selectedEmployee.eid);const employeeName=(employeeDetail===null||employeeDetail===void 0?void 0:(_employeeDetail$emplo2=employeeDetail.employee)===null||_employeeDetail$emplo2===void 0?void 0:_employeeDetail$emplo2.name)||(selectedEmployee===null||selectedEmployee===void 0?void 0:selectedEmployee.name);if(!employeeEid){showAlert('Data karyawan tidak lengkap. Silakan muat ulang halaman.','danger');console.error('Employee EID not found. Employee detail:',employeeDetail,'Selected employee:',selectedEmployee);return;}if(!recommendationData.recommendation_type){showAlert('Pilih jenis rekomendasi terlebih dahulu','warning');return;}// Validasi reason dihapus - reason boleh kosong sesuai permintaan user\n// Validate duration for contracts that require it\nif(['kontrak2','kontrak3'].includes(recommendationData.recommendation_type)&&(!recommendationData.recommended_duration||recommendationData.recommended_duration==='0')){showAlert('Durasi kontrak harus diisi untuk jenis kontrak yang dipilih','warning');return;}// Show loading state\nshowAlert('Sedang mengirim rekomendasi...','info');const formData=new FormData();formData.append('action','create');formData.append('eid',employeeEid);formData.append('recommendation_type',recommendationData.recommendation_type);formData.append('recommended_duration',recommendationData.recommended_duration||'0');formData.append('contract_start_date',recommendationData.contract_start_date||'');formData.append('reason',recommendationData.reason||'');// Enhanced system recommendation with dynamic intelligence\nconst systemRec=employeeDetail!==null&&employeeDetail!==void 0&&employeeDetail.dynamic_intelligence?`Rekomendasi sistem: ${employeeDetail.dynamic_intelligence.match_category||'Analysis'} (${employeeDetail.dynamic_intelligence.optimal_duration||'N/A'} bulan), Confidence: ${employeeDetail.dynamic_intelligence.confidence_level||'Medium'}, Sample Size: ${employeeDetail.dynamic_intelligence.sample_size||0}`:`Rekomendasi sistem: ${recommendationData.recommendation_type} kontrak ${recommendationData.recommended_duration||'N/A'} bulan berdasarkan analisis data mining`;formData.append('system_recommendation',systemRec);console.log('=== SENDING RECOMMENDATION ===');console.log('Employee EID:',employeeEid);console.log('Employee Name:',employeeName);console.log('Recommendation Type:',recommendationData.recommendation_type);console.log('Recommended Duration:',recommendationData.recommended_duration);console.log('Reason:',recommendationData.reason);console.log('FormData contents:');for(let[key,value]of formData.entries()){console.log(`  ${key}: ${value}`);}console.log('Employee detail structure:',employeeDetail);console.log('Selected employee:',selectedEmployee);const response=await axios.post('http://localhost/web_srk_BI/backend/api/recommendations.php',formData,{withCredentials:true,headers:{'Content-Type':'multipart/form-data'},timeout:30000// 30 second timeout\n});console.log('=== RESPONSE RECEIVED ===');console.log('Response status:',response.status);console.log('Response data:',response.data);if(response.data.success){showAlert('Rekomendasi berhasil dibuat dan dikirim ke HR','success');handleCloseModal();// Reset form\nsetRecommendationData({recommendation_type:'',recommended_duration:'',contract_start_date:'',reason:''});// Refresh data after creating recommendation\nfetchManagerData();fetchProcessedRecommendations();}else{console.error('Server error response:',response.data);showAlert(response.data.error||'Gagal membuat rekomendasi','danger');}}catch(error){console.error('Error creating recommendation:',error);// Enhanced error handling\nif(error.response){var _error$response$data,_error$response$data2;// Server responded with error status\nconsole.error('Server error response:',error.response.data);console.error('Server error status:',error.response.status);const errorMsg=((_error$response$data=error.response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||((_error$response$data2=error.response.data)===null||_error$response$data2===void 0?void 0:_error$response$data2.message)||'Server error';showAlert(`Gagal membuat rekomendasi: ${errorMsg}`,'danger');}else if(error.request){// Request was made but no response received\nconsole.error('Network error - no response received:',error.request);showAlert('Tidak dapat terhubung ke server. Periksa koneksi internet Anda.','danger');}else{// Something happened in setting up the request\nconsole.error('Request setup error:',error.message);showAlert('Terjadi kesalahan saat mengirim rekomendasi. Silakan coba lagi.','danger');}}};const showAlert=(message,type)=>{setAlert({show:true,message,type});setTimeout(()=>setAlert({show:false,message:'',type:''}),5000);};const getMatchDistributionChart=()=>{if(!(educationAnalysis!==null&&educationAnalysis!==void 0&&educationAnalysis.match_distribution)){return{labels:['Match','Unmatch'],datasets:[{label:'Distribusi Kecocokan',data:[0,0],backgroundColor:['#28a745','#dc3545'],borderWidth:1}]};}const data=educationAnalysis.match_distribution;return{labels:['Match','Unmatch'],datasets:[{label:'Distribusi Kecocokan',data:[data.Match||0,data.Unmatch||0],backgroundColor:['#28a745','#dc3545'],borderWidth:1}]};};const getRiskLevelChart=()=>{if(!(analytics!==null&&analytics!==void 0&&analytics.employees)||analytics.employees.length===0){return{labels:['Low Risk','Medium Risk','High Risk'],datasets:[{label:'Distribusi Risk Level',data:[0,0,0],backgroundColor:['#28a745','#ffc107','#dc3545'],borderWidth:1}]};}const employees=analytics.employees;const lowRisk=employees.filter(emp=>{var _emp$intelligence_dat4;return((_emp$intelligence_dat4=emp.intelligence_data)===null||_emp$intelligence_dat4===void 0?void 0:_emp$intelligence_dat4.risk_level)==='Low';}).length;const mediumRisk=employees.filter(emp=>{var _emp$intelligence_dat5;return((_emp$intelligence_dat5=emp.intelligence_data)===null||_emp$intelligence_dat5===void 0?void 0:_emp$intelligence_dat5.risk_level)==='Medium';}).length;const highRisk=employees.filter(emp=>{var _emp$intelligence_dat6;return((_emp$intelligence_dat6=emp.intelligence_data)===null||_emp$intelligence_dat6===void 0?void 0:_emp$intelligence_dat6.risk_level)==='High';}).length;console.log('üîç Risk Level Debug:',{totalEmployees:employees.length,lowRisk,mediumRisk,highRisk,sampleData:employees.slice(0,3).map(emp=>{var _emp$intelligence_dat7;return{name:emp.name,risk_level:(_emp$intelligence_dat7=emp.intelligence_data)===null||_emp$intelligence_dat7===void 0?void 0:_emp$intelligence_dat7.risk_level};})});return{labels:['Low Risk','Medium Risk','High Risk'],datasets:[{label:'Distribusi Risk Level',data:[lowRisk,mediumRisk,highRisk],backgroundColor:['#28a745','#ffc107','#dc3545'],borderWidth:1}]};};const getContractRecommendationChart=()=>{if(!(analytics!==null&&analytics!==void 0&&analytics.employees)||analytics.employees.length===0){return{labels:['6 bulan','12 bulan','18 bulan','24 bulan','36 bulan'],datasets:[{label:'Jumlah Rekomendasi',data:[0,0,0,0,0],backgroundColor:'rgba(0, 123, 255, 0.8)',borderColor:'#007bff',borderWidth:2}]};}const employees=analytics.employees;const duration6=employees.filter(emp=>{var _emp$intelligence_dat8;return((_emp$intelligence_dat8=emp.intelligence_data)===null||_emp$intelligence_dat8===void 0?void 0:_emp$intelligence_dat8.recommended_duration)===6;}).length;const duration12=employees.filter(emp=>{var _emp$intelligence_dat9;return((_emp$intelligence_dat9=emp.intelligence_data)===null||_emp$intelligence_dat9===void 0?void 0:_emp$intelligence_dat9.recommended_duration)===12;}).length;const duration18=employees.filter(emp=>{var _emp$intelligence_dat0;return((_emp$intelligence_dat0=emp.intelligence_data)===null||_emp$intelligence_dat0===void 0?void 0:_emp$intelligence_dat0.recommended_duration)===18;}).length;const duration24=employees.filter(emp=>{var _emp$intelligence_dat1;return((_emp$intelligence_dat1=emp.intelligence_data)===null||_emp$intelligence_dat1===void 0?void 0:_emp$intelligence_dat1.recommended_duration)===24;}).length;const duration36=employees.filter(emp=>{var _emp$intelligence_dat10;return((_emp$intelligence_dat10=emp.intelligence_data)===null||_emp$intelligence_dat10===void 0?void 0:_emp$intelligence_dat10.recommended_duration)===36;}).length;return{labels:['6 bulan','12 bulan','18 bulan','24 bulan','36 bulan'],datasets:[{label:'Jumlah Rekomendasi',data:[duration6,duration12,duration18,duration24,duration36],backgroundColor:'rgba(0, 123, 255, 0.8)',borderColor:'#007bff',borderWidth:2}]};};// Fungsi untuk mendapatkan rekomendasi kontrak berdasarkan data mining\nconst getDataMiningRecommendation=employee=>{// Gunakan data mining recommendation dari backend\nif(employee.data_mining_recommendation){return{type:'data_mining',duration:`${employee.data_mining_recommendation.recommended_duration} bulan`,risk_level:employee.data_mining_recommendation.risk_level,confidence:employee.data_mining_recommendation.confidence_level,reasoning:employee.data_mining_recommendation.reasoning||[]};}// Fallback untuk backward compatibility\nconst matchStatus=employee.education_job_match||'Unmatch';const tenure=employee.tenure_months||0;const currentContract=employee.current_contract_type;if(currentContract==='probation'&&tenure>=3){if(matchStatus==='Match'){return{type:'permanent',reason:'Good education-job match',duration:'Permanent',confidence:'High'};}else{return{type:'review',reason:'No education-job match, need performance evaluation',duration:'Review diperlukan',confidence:'Low'};}}if(tenure>=12&&currentContract!=='permanent'){return{type:'extension',reason:'Long tenure with good performance',duration:'Extension recommended',confidence:'High'};}return{type:'monitor',reason:'Continue monitoring',duration:'Monitoring berkelanjutan',confidence:'Medium'};};// Function to calculate match status locally (same logic as detail modal)\nconst calculateMatchStatusLocal=employee=>{const major=(employee.major||'').toUpperCase();const role=(employee.role||'').toUpperCase();const designation=(employee.designation||'').toUpperCase();// IT Education Keywords (Updated to match backend)\nconst itEducationKeywords=['INFORMATION TECHNOLOGY','TEKNIK INFORMATIKA','ILMU KOMPUTER','SISTEM INFORMASI','COMPUTER SCIENCE','SOFTWARE ENGINEERING','INFORMATIKA','TEKNIK KOMPUTER','KOMPUTER','TEKNOLOGI INFORMASI','INFORMATION SYSTEM','INFORMATICS ENGINEERING','INFORMATIC ENGINEERING','COMPUTER ENGINEERING','INFORMATION MANAGEMENT','INFORMATICS MANAGEMENT','MANAGEMENT INFORMATIKA','SISTEM KOMPUTER','KOMPUTERISASI AKUNTANASI','COMPUTERIZED ACCOUNTING','COMPUTATIONAL SCIENCE','INFORMATICS','INFORMATICS TECHNOLOGY','COMPUTER AND INFORMATICS ENGINEERING','ENGINEERING INFORMATIC','INDUSTRIAL ENGINEERING_INFORMATIC',// New IT Education Majors from CSV Analysis\n'STATISTICS','TECHNOLOGY MANAGEMENT','ELECTRICAL ENGINEERING','ELECTRONICS ENGINEERING','MASTER IN INFORMATICS','ICT','COMPUTER SCIENCE & ELECTRONICS','COMPUTER TELECOMMUNICATION','TELECOMMUNICATION ENGINEERING','TELECOMMUNICATIONS ENGINEERING','TELECOMMUNICATION & MEDIA','TEKNIK ELEKTRO','COMPUTER SCINCE','COMPUTER SCIENCES & ENGINEERING','COMPUTER SYSTEM','COMPUTER SIENCE','COMPUTER TECHNOLOGY','COMPUTER SCINCE','INFORMASTION SYSTEM','INFORMATICS TECHNIQUE','INFORMATIOCS','INFORMATICS TECHNOLOGY','TEKNIK KOMPUTER & JARINGAN','INFORMATION ENGINEERING','SOFTWARE ENGINEERING TECHNOLOGY','DIGITAL MEDIA TECHNOLOGY','INFORMATIC ENGINEETING','INFORMATION SYTEM','INFORMASTION SYSTEM','MATERIALS ENGINEERING','NETWORK MANAGEMENT','INFORMATICS SYSTEM','BUSINESS INFORMATION SYSTEM','PHYSICS ENGINEERING','MANAGEMENT INFORMATION SYSTEM','TELECOMUNICATION ENGINEERING'];// IT Job Keywords (Updated to match backend)\nconst itJobKeywords=['DEVELOPER','PROGRAMMER','SOFTWARE','TECHNICAL','FRONTEND','BACKEND','FULLSTACK','FULL STACK','JAVA','NET','.NET','API','ETL','MOBILE','ANDROID','WEB','UI/UX','FRONT END','BACK END','PEGA','RPA','ANALYST','BUSINESS ANALYST','SYSTEM ANALYST','DATA ANALYST','DATA SCIENTIST','QUALITY ASSURANCE','QA','TESTER','TEST ENGINEER','CONSULTANT','IT CONSULTANT','TECHNOLOGY CONSULTANT','TECHNICAL CONSULTANT','PRODUCT OWNER','SCRUM MASTER','PMO','IT OPERATION','DEVOPS','SYSTEM ADMINISTRATOR','DATABASE ADMINISTRATOR','NETWORK','IT QUALITY ASSURANCE','TESTING ENGINEER','TESTER SUPPORT','JR TESTER','IT TESTER','TESTING SPECIALIST','TESTING COORDINATOR','QUALITY TESTER','JR QUALITY ASSURANCE','QUALITY ASSURANCE TESTER','TESTING ENGINEER SPECIALIST','APPRENTICE TESTER','JR TESTER LEVEL 1','LEAD QA','LEAD BACKEND DEVELOPER',// New IT Roles from CSV Analysis\n'PROJECT MANAGER','IT PROJECT MANAGER','TECHNICAL PROJECT MANAGER','ASSISTANT PROJECT MANAGER','BI DEVELOPER','BI COGNOS DEVELOPER','POWER BI DEVELOPER','SR. BI DEVELOPER','DATA MODELER','DATABASE REPORT ENGINEER','REPORT DESIGNER','MIDDLEWARE DEVELOPER','DATASTAGE DEVELOPER','ETL DATASTAGE DEVELOPER','IBM DATASTAGE','ODOO DEVELOPER','SR. ODOO DEVELOPER','TALEND CONSULTANT','MFT CONSULTANT','CYBER SECURITY OPERATION','IT SECURITY OPERATIONS','SECURITY ENGINEER','SENIOR SECURITY ENGINEER','CYBER SECURITY POLICY','IT INFRA & SECURITY OFFICER','INFRASTRUCTURE','LEAD BACKEND DEVELOPER','LEAD FRONTEND DEVELOPER','SR. TECHNOLOGY CONSULTANT','GRADUATE DEVELOPMENT PROGRAM','JUNIOR CONSULTANT','JR. CONSULTANT','JR CONSULTANT','TECHNICAL LEAD','TECH LEAD','SOLUTION ANALYST','DATA ENGINEER','IT SUPPORT','SYSTEM SUPPORT','PRODUCTION SUPPORT','HELPDESK','TECHNOLOGY CONSULTANT','SR. ETL DEVELOPER','JR. ETL CONSULTANT','TECHNICAL RESEARCH & DEVELOPMENT CONSULTANT','PRESALES','IT TRAINER','TECHNICAL TRAINER','ASSISTANT TRAINER','JAVA TRAINER','MOBILE DEVELOPER','ANDROID DEVELOPER','IOS DEVELOPER','FRONT END MOBILE DEVELOPER','WEB FRONT END DEVELOPER','FRONETEND DEVELOPER','FRONT END DEVELOPER','SR .NET DEVELOPER','JR .NET DEVELOPER','.NET DEVELOPER','SR. .NET DEVELOPER','FULL STACK DEVELOPER','FULLSTACK DEVELOPER','UI/UX DEVELOPER','RPA DEVELOPER','RPA TRAINEE','PEGA DEVELOPER','SR. PEGA DEVELOPER',// Additional keywords to match backend logic\n'ADMIN','ADMINISTRATOR','USER','END','HELP','DESK','SUPPORT','SERVICE'];// Check IT Education\nconst isItEducation=itEducationKeywords.some(keyword=>major.includes(keyword));// Check IT Job (check both role and designation)\nconst isItJob=itJobKeywords.some(keyword=>role.includes(keyword)||designation.includes(keyword));return isItEducation&&isItJob?'Match':'Unmatch';};const getMatchLevelBadge=employee=>{// Use local calculation instead of backend data to ensure consistency\nconst matchStatus=calculateMatchStatusLocal(employee);if(matchStatus==='Match')return/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Match\"});return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"Unmatch\"});};const getRiskLevelBadge=riskLevel=>{if(riskLevel==='Low')return/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Risiko Rendah\"});if(riskLevel==='Medium')return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"Risiko Sedang\"});return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"Risiko Tinggi\"});};const getContractStatusBadge=employee=>{const contractType=employee.current_contract_type;const contractEnd=employee.contract_end;const daysToEnd=employee.days_to_contract_end;const badges={'probation':{variant:'warning',text:'Probation'},'1':{variant:'info',text:'Kontrak 1'},'2':{variant:'primary',text:'Kontrak 2'},'3':{variant:'secondary',text:'Kontrak 3'},'permanent':{variant:'success',text:'Permanent'},null:{variant:'light',text:'N/A'}};const badge=badges[contractType]||badges[null];// Format tanggal berakhir kontrak\nlet endDateText='';if(contractEnd&&contractType!=='permanent'){const endDate=new Date(contractEnd);endDateText=` (berakhir: ${endDate.toLocaleDateString('id-ID')})`;// Tambahkan peringatan jika kontrak akan berakhir dalam 30 hari\nif(daysToEnd<=30&&daysToEnd>0){endDateText+=` - ${daysToEnd} hari lagi`;}}if(contractType==='probation'&&daysToEnd>=90){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"warning\",className:\"border border-danger\",children:\"Probation (Ready for Review)\"}),endDateText&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:endDateText})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:badge.variant,children:badge.text}),endDateText&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:endDateText})]});};// Function to get consistent duration recommendation for both sections\nconst getConsistentDurationRecommendation=employee=>{var _employee$intelligenc,_employee$intelligenc2;if(!employee)return'6 bulan';const duration=employee===null||employee===void 0?void 0:(_employee$intelligenc=employee.intelligence_data)===null||_employee$intelligenc===void 0?void 0:_employee$intelligenc.recommended_duration;const category=employee===null||employee===void 0?void 0:(_employee$intelligenc2=employee.intelligence_data)===null||_employee$intelligenc2===void 0?void 0:_employee$intelligenc2.match_category;// Check for Non-IT elimination first\nconst nonItMajors=['kedokteran','farmasi','hukum','akuntansi','manajemen','ekonomi','psikologi','bahasa','sastra','pendidikan','sejarah','geografi','biologi','kimia','fisika','matematika','pertanian','kehutanan','perikanan','kedokteran hewan','arsitektur','sipil','mesin','elektro','industri','teknik','seni','desain','komunikasi','jurnalistik','sosiologi','antropologi','ilmu politik','hubungan internasional','administrasi','keperawatan','kebidanan','gizi','kesehatan masyarakat','olahraga','keolahragaan'];const employeeMajor=employee.major?employee.major.toLowerCase().trim():'';const isNonIT=nonItMajors.some(nonItMajor=>employeeMajor.includes(nonItMajor));if(isNonIT||category==='Tidak Direkomendasikan'){return'Tidak Direkomendasikan';}else if(category==='Sudah Permanent'){return'Sudah Permanent';}// UNMATCH employees - evaluation contract\nelse if(employee.education_job_match==='Unmatch'){if(employee.current_contract_type==='3'){return'Kontrak 3 (Evaluasi)';}else if(employee.current_contract_type==='2'){return'Kontrak 3 (Evaluasi)';}else{return'Kontrak 2 (Evaluasi)';}}// MATCH employees - follow dynamic intelligence\nelse if(employee.education_job_match==='Match'){if(employee.current_contract_type==='3'&&(category==='Siap Permanent'||duration===0)){return'Permanent';}else if(duration===0&&category!=='Tidak Direkomendasikan'){return'Permanent';}else if(duration&&duration>0){return`${duration} bulan`;}else{return'6 bulan';// Default evaluation duration - matching the image\n}}else{return'6 bulan';// Default fallback duration - matching the image\n}};// Function to calculate consistent statistics for both Data Intelligence & Dynamic Intelligence sections\nconst getConsistentStatistics=(employee,employeeDetail)=>{var _employee$intelligenc3,_employee$intelligenc4;// Use actual historical patterns data from backend dynamic_intelligence.php\nconst dynamicIntelligence=employeeDetail===null||employeeDetail===void 0?void 0:employeeDetail.dynamic_intelligence;const historicalPatterns=dynamicIntelligence===null||dynamicIntelligence===void 0?void 0:dynamicIntelligence.historical_patterns;if(historicalPatterns&&historicalPatterns.sample_size>0){var _resignAnalysis$optim,_resignAnalysis$curre,_historicalPatterns$d,_historicalPatterns$d2;// Use EXACT data from backend calculations\nconst masihAktif=parseFloat(historicalPatterns.success_rate)||0;const sudahResign=parseFloat(historicalPatterns.resign_rate)||0;const earlyResignRate=parseFloat(historicalPatterns.early_resign_rate)||0;const avgTenure=parseFloat(historicalPatterns.avg_duration)||0;const sampleSize=parseInt(historicalPatterns.sample_size)||parseInt(historicalPatterns.total_similar)||0;// Get Early Resign Risk from resign analysis data\nconst resignAnalysis=dynamicIntelligence===null||dynamicIntelligence===void 0?void 0:dynamicIntelligence.resign_analysis;let earlyResignRisk=0;// Priority 1: Use optimal duration recommendation resign rate (but only if it's reasonable)\nif(resignAnalysis!==null&&resignAnalysis!==void 0&&(_resignAnalysis$optim=resignAnalysis.optimal_duration_recommendation)!==null&&_resignAnalysis$optim!==void 0&&_resignAnalysis$optim.early_resign_rate){const optimalRisk=parseFloat(resignAnalysis.optimal_duration_recommendation.early_resign_rate);// Only use if it's not the unreliable 100% default\nif(optimalRisk<90){earlyResignRisk=optimalRisk;}}// Priority 2: Use current contract analysis\nif(earlyResignRisk===0&&resignAnalysis!==null&&resignAnalysis!==void 0&&(_resignAnalysis$curre=resignAnalysis.current_contract_analysis)!==null&&_resignAnalysis$curre!==void 0&&_resignAnalysis$curre.early_resign_rate){earlyResignRisk=parseFloat(resignAnalysis.current_contract_analysis.early_resign_rate);}// Priority 3: Use data insights early resign analysis\nif(earlyResignRisk===0&&(_historicalPatterns$d=historicalPatterns.data_insights)!==null&&_historicalPatterns$d!==void 0&&(_historicalPatterns$d2=_historicalPatterns$d.early_resign_analysis)!==null&&_historicalPatterns$d2!==void 0&&_historicalPatterns$d2.rate){earlyResignRisk=parseFloat(historicalPatterns.data_insights.early_resign_analysis.rate);}// Priority 4: Use actual early resign rate from historical patterns\nif(earlyResignRisk===0&&earlyResignRate>0){earlyResignRisk=earlyResignRate;}// Fallback: Use reasonable estimate based on profile success rate\nif(earlyResignRisk===0){// Lower success rate = higher early resign risk\nearlyResignRisk=Math.max(5,Math.min(25,(100-masihAktif)*0.3));}return{masihAktif:Math.round(masihAktif*10)/10,sudahResign:Math.round(sudahResign*10)/10,earlyResignRate:Math.round(earlyResignRate*10)/10,earlyResignRisk:Math.round(earlyResignRisk*10)/10,avgTenure:Math.round(avgTenure*10)/10,sampleSize:sampleSize};}// Fallback when no historical patterns data available\nif(!employee){return{masihAktif:70,sudahResign:30,earlyResignRate:25,earlyResignRisk:33.8,avgTenure:17.6,sampleSize:15};}// Fallback calculation based on employee characteristics\nconst educationScore=((_employee$intelligenc3=employee.intelligence_data)===null||_employee$intelligenc3===void 0?void 0:_employee$intelligenc3.education_score)||0;const tenure=employee.tenure_months||0;const contractType=employee.current_contract_type;const sampleSize=((_employee$intelligenc4=employee.intelligence_data)===null||_employee$intelligenc4===void 0?void 0:_employee$intelligenc4.sample_size)||15;let masihAktif=educationScore>=3?70:educationScore>=2?70:45;if(contractType==='permanent')masihAktif=95;else if(contractType==='2')masihAktif=70;const sudahResign=100-masihAktif;const earlyResignRate=contractType==='2'?25:contractType==='permanent'?3:25;const earlyResignRisk=contractType==='2'?33.8:contractType==='permanent'?8.2:33.8;const avgTenure=contractType==='2'?17.6:contractType==='permanent'?36.2:17.6;return{masihAktif:Math.min(95,Math.max(30,masihAktif)),sudahResign:Math.min(70,Math.max(5,sudahResign)),earlyResignRate:Math.min(50,Math.max(3,earlyResignRate)),earlyResignRisk:Math.min(65.0,Math.max(5.0,earlyResignRisk)),avgTenure:Math.max(8.0,avgTenure),sampleSize:sampleSize};};// Function to get consistent contract recommendation (same as table)\nconst getConsistentContractRecommendation=employee=>{var _employee$intelligenc5,_employee$intelligenc6,_employee$intelligenc9;if(!employee)return'Loading...';// Use the same logic as getRecommendationStatusBadge but return text only\nif(employee.current_contract_type==='permanent'){return'Permanent';}// Check for Non-IT major elimination\nconst nonItMajors=['kedokteran','farmasi','hukum','akuntansi','manajemen','ekonomi','psikologi','bahasa','sastra','pendidikan','sejarah','geografi','biologi','kimia','fisika','matematika','pertanian','kehutanan','perikanan','kedokteran hewan','arsitektur','sipil','mesin','elektro','industri','teknik','seni','desain','komunikasi','jurnalistik','sosiologi','antropologi','ilmu politik','hubungan internasional','administrasi','keperawatan','kebidanan','gizi','kesehatan masyarakat','olahraga','keolahragaan'];const employeeMajor=employee.major?employee.major.toLowerCase().trim():'';const isNonIT=nonItMajors.some(nonItMajor=>employeeMajor.includes(nonItMajor));if(isNonIT){return'Tidak Direkomendasikan';}// If contract still has long time (>30 days), show waiting status\nif(employee.days_to_contract_end>30){return'Kontrak Masih Berlaku';}// If has pending recommendation\nif(employee.has_pending_recommendation){return'Menunggu Persetujuan HR';}// For Unmatch employees (education score < 2) - evaluation contract\nconst educationScore=((_employee$intelligenc5=employee.intelligence_data)===null||_employee$intelligenc5===void 0?void 0:_employee$intelligenc5.education_score)||0;if(educationScore<2){// Determine evaluation contract type based on current contract\nlet contractType='';switch(employee.current_contract_type){case'probation':contractType='Kontrak 2 (Evaluasi)';break;case'1':contractType='Kontrak 2 (Evaluasi)';break;case'2':contractType='Kontrak 3 (Evaluasi)';break;case'3':contractType='Kontrak 3 (Evaluasi)';break;default:contractType='Probation (Evaluasi)';break;}return contractType;}// For Match employees - show contract recommendation based on progression\nconst duration=(_employee$intelligenc6=employee.intelligence_data)===null||_employee$intelligenc6===void 0?void 0:_employee$intelligenc6.recommended_duration;// For Contract 3, duration 0 means Permanent\nif((employee.current_contract_type==='3'||employee.current_contract_type==='kontrak3')&&duration===0){return'Permanent';}// For probation employees - progression logic\nelse if(employee.current_contract_type==='probation'){var _employee$intelligenc7;// From probation, next contract should be Kontrak 2 (12 months) or Kontrak 3 based on evaluation\nconst educationScore=((_employee$intelligenc7=employee.intelligence_data)===null||_employee$intelligenc7===void 0?void 0:_employee$intelligenc7.education_score)||0;if(educationScore>=2){return'Kontrak 2';// Good match - standard 12 month contract\n}else{return'Kontrak 3 (Evaluasi)';// Poor match - evaluation contract\n}}else if(employee.current_contract_type==='1'||employee.current_contract_type==='2'){var _employee$intelligenc8;const recommendedType=((_employee$intelligenc8=employee.intelligence_data)===null||_employee$intelligenc8===void 0?void 0:_employee$intelligenc8.match_category)||'Kontrak 3';return recommendedType;}else if(employee.current_contract_type==='3'){return'Permanent';}// Default fallback\nreturn((_employee$intelligenc9=employee.intelligence_data)===null||_employee$intelligenc9===void 0?void 0:_employee$intelligenc9.match_category)||'Kontrak 2';};// Function to get recommended contract type based on dynamic intelligence\nconst getRecommendedContractType=employeeDetail=>{const employee=employeeDetail.employee;const dynamicIntelligence=employeeDetail.dynamic_intelligence;// If we have dynamic intelligence data\nif(dynamicIntelligence&&dynamicIntelligence.optimal_duration!==undefined){const duration=dynamicIntelligence.optimal_duration;const matchCategory=dynamicIntelligence.match_category;// If employee is not recommended\nif(matchCategory==='Tidak Direkomendasikan'){return'‚ùå Tidak Direkomendasikan';}// Based on current contract and recommended duration\nconst currentContract=employee.current_contract_type;// If permanent is recommended (duration = 0)\nif(duration===0){return'Permanent';}// If currently on probation\nif(currentContract==='probation'){if(duration<=6){return'Kontrak 1';}else if(duration<=12){return'Kontrak 2';}else{return'Kontrak 3';}}// If currently on Kontrak 1 or 2\nif(currentContract==='1'||currentContract==='2'){if(duration===0){return'Permanent';}else{return'Kontrak 3';}}// If currently on Kontrak 3\nif(currentContract==='3'){return'Permanent';}// Default based on duration\nif(duration<=6){return'Kontrak 1';}else if(duration<=12){return'Kontrak 2';}else if(duration<=24){return'Kontrak 3';}else{return'Permanent';}}// Fallback - use match category to determine recommendation\nconst matchStatus=employee.education_job_match||'Unmatch';const currentContract=employee.current_contract_type;if(matchStatus==='Match'){// Good match - recommend progression\nif(currentContract==='probation'){return'Kontrak 2';}else if(currentContract==='1'||currentContract==='2'){return'Kontrak 3';}else if(currentContract==='3'){return'Permanent';}return'2Ô∏è‚É£ Kontrak 2';}else{// Poor match - recommend review or short contract\nreturn'üîç Review Diperlukan';}};const getRecommendationStatusBadge=employee=>{var _employee$intelligenc0,_employee$intelligenc10;if(employee.current_contract_type==='permanent'){return/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"-\"});}// Check for Non-IT major elimination\nconst nonItMajors=['kedokteran','farmasi','hukum','akuntansi','manajemen','ekonomi','psikologi','bahasa','sastra','pendidikan','sejarah','geografi','biologi','kimia','fisika','matematika','pertanian','kehutanan','perikanan','kedokteran hewan','arsitektur','sipil','mesin','elektro','industri','teknik','seni','desain','komunikasi','jurnalistik','sosiologi','antropologi','ilmu politik','hubungan internasional','administrasi','keperawatan','kebidanan','gizi','kesehatan masyarakat','olahraga','keolahragaan'];const employeeMajor=employee.major?employee.major.toLowerCase().trim():'';const isNonIT=nonItMajors.some(nonItMajor=>employeeMajor.includes(nonItMajor));if(isNonIT){return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"TIDAK DIREKOMENDASIKAN\"});}// PRIORITAS: Tampilkan rekomendasi kontrak ke depannya, bukan status approval\n// Jika kontrak masih berlaku lama (>30 hari), tampilkan status tunggu\nif(employee.days_to_contract_end>30){return/*#__PURE__*/_jsx(Badge,{bg:\"light\",className:\"text-muted\",children:\"\\u23F3 Kontrak Masih Berlaku\"});}// Jika ada pending recommendation, tampilkan status pending\nif(employee.has_pending_recommendation){return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"\\uD83D\\uDD04 Menunggu Persetujuan HR\"});}// Untuk Unmatch employees (education score < 2) - evaluasi kontrak\nconst educationScore=((_employee$intelligenc0=employee.intelligence_data)===null||_employee$intelligenc0===void 0?void 0:_employee$intelligenc0.education_score)||0;if(educationScore<2){var _employee$intelligenc1;// POLICY: Unmatch employees tetap evaluasi kontrak, tidak langsung permanent\n// meskipun dynamic intelligence mengatakan \"Siap Permanent\"\n// Ini untuk memitigasi risk tingginya resign rate pada unmatch employees\nconst duration=((_employee$intelligenc1=employee.intelligence_data)===null||_employee$intelligenc1===void 0?void 0:_employee$intelligenc1.recommended_duration)||6;// Tentukan jenis kontrak evaluasi berdasarkan kontrak saat ini\nlet contractType='';switch(employee.current_contract_type){case'probation':contractType='Kontrak 2 (Evaluasi)';break;case'1':contractType='Kontrak 2 (Evaluasi)';break;case'2':contractType='Kontrak 3 (Evaluasi)';break;case'3':contractType='Kontrak 3 (Evaluasi)';break;default:contractType='Probation (Evaluasi)';break;}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:contractType}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block mt-1\",children:[\"Durasi: (\",duration,\" bulan)\"]})]});}// Untuk Match employees - tampilkan rekomendasi kontrak berdasarkan progression\nconst duration=(_employee$intelligenc10=employee.intelligence_data)===null||_employee$intelligenc10===void 0?void 0:_employee$intelligenc10.recommended_duration;let durationText='';if(duration&&duration>0){durationText=`(${duration} bulan)`;}// Untuk Kontrak 3, duration 0 berarti Permanent\nif((employee.current_contract_type==='3'||employee.current_contract_type==='kontrak3')&&duration===0){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"PERMANENT\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:\"Rekomendasi: Kontrak Tetap\"})]});}// Determine contract type based on backend recommendation (fixed consistency)\nelse if(employee.current_contract_type==='probation'){var _employee$intelligenc11;// From probation, progress to Kontrak 2 or Kontrak 3 (Evaluasi) - never Kontrak 1\nconst educationScore=((_employee$intelligenc11=employee.intelligence_data)===null||_employee$intelligenc11===void 0?void 0:_employee$intelligenc11.education_score)||0;let recommendedType,badgeVariant;if(educationScore>=2){recommendedType='Kontrak 2';// Good match - standard 12 month contract\nbadgeVariant='info';}else{recommendedType='Kontrak 3 (Evaluasi)';// Poor match - evaluation contract\nbadgeVariant='warning';}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:badgeVariant,children:recommendedType}),durationText&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block mt-1\",children:[\"Durasi: \",durationText]})]});}else if(employee.current_contract_type==='1'||employee.current_contract_type==='2'){var _employee$intelligenc12;// Use backend recommendation for progression contracts\nconst recommendedType=((_employee$intelligenc12=employee.intelligence_data)===null||_employee$intelligenc12===void 0?void 0:_employee$intelligenc12.match_category)||'Kontrak 3';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"primary\",children:recommendedType}),durationText&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block mt-1\",children:[\"Durasi: \",durationText]})]});}else if(employee.current_contract_type==='3'){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"PERMANENT\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:\"Rekomendasi: Kontrak Tetap\"})]});}else{var _employee$data_mining;// Use backend recommendation for default cases\nconst recommendedType=((_employee$data_mining=employee.data_mining_recommendation)===null||_employee$data_mining===void 0?void 0:_employee$data_mining.category)||'Kontrak 1';const badgeVariant=recommendedType.includes('Kontrak 1')?'primary':recommendedType.includes('Probation')?'warning':'secondary';return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:badgeVariant,children:recommendedType}),durationText&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block mt-1\",children:[\"Durasi: \",durationText]})]});}};const getApprovalStatusBadge=employee=>{// Debug logging for specific employee\nif(employee.name==='Ahmad Hamdi'){console.log('üîç Debug Ahmad Hamdi approval status:');console.log('Employee EID:',employee.eid);console.log('Processed recommendations:',processedRecommendations);console.log('Matching recs:',processedRecommendations.filter(rec=>{var _rec$employee3;return((_rec$employee3=rec.employee)===null||_rec$employee3===void 0?void 0:_rec$employee3.eid)===employee.eid;}));}// Check if employee has recent processed recommendation\nconst recentProcessedRec=processedRecommendations.find(rec=>{var _rec$employee4;return((_rec$employee4=rec.employee)===null||_rec$employee4===void 0?void 0:_rec$employee4.eid)===employee.eid;});if(recentProcessedRec){// Show processed recommendation status with duration info\nconst duration=recentProcessedRec.recommended_duration;let durationText='';if(duration&&duration>0){durationText=`(${duration} bulan)`;}else if(recentProcessedRec.recommendation_type==='permanent'){durationText='(Permanent)';}switch(recentProcessedRec.status){case'approved':case'extended':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"\\u2705 Disetujui\"}),durationText&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:durationText})]});case'rejected':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"\\u274C Ditolak\"}),durationText&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-block mt-1\",children:[\"Durasi yang ditolak: \",durationText]})]});case'resign':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"dark\",children:\"\\uD83D\\uDC4B Resign\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:\"Karyawan mengundurkan diri\"})]});default:return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"info\",children:\"\\uD83D\\uDD04 Diproses\"}),durationText&&/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mt-1\",children:durationText})]});}}// Jika ada pending recommendation\nif(employee.has_pending_recommendation){return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"\\u23F3 Menunggu HR\"});}// Jika belum ada recommendation\nreturn/*#__PURE__*/_jsx(Badge,{bg:\"light\",className:\"text-muted\",children:\"-\"});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"Memuat data intelligence...\"})]})});}return/*#__PURE__*/_jsxs(Container,{fluid:true,className:\"mt-3\",children:[alert.show&&/*#__PURE__*/_jsx(Alert,{variant:alert.type,dismissible:true,onClose:()=>setAlert({show:false,message:'',type:''}),children:alert.message}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 rounded\",style:{background:'linear-gradient(135deg, #007bff 0%, #0056b3 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manager Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"Manager Divisi \",user.division_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"small\",{children:\"Analisis Kecocokan Pendidikan & Rekomendasi Kontrak\"}),autoRefresh&&/*#__PURE__*/_jsxs(Badge,{bg:\"warning\",className:\"d-flex align-items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\",role:\"status\",\"aria-hidden\":\"true\"}),\"Auto-refresh aktif\"]}),lastRefresh&&/*#__PURE__*/_jsxs(\"small\",{className:\"text-light opacity-75\",children:[\"Terakhir diperbarui: \",lastRefresh.toLocaleTimeString('id-ID')]})]})]}),/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-end gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-end\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s=analytics.division_stats)===null||_analytics$division_s===void 0?void 0:_analytics$division_s.total_employees)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Karyawan Aktif\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-light\",size:\"sm\",onClick:handleManualRefresh,children:\"\\uD83D\\uDD04 Refresh\"}),/*#__PURE__*/_jsx(Button,{variant:autoRefresh?\"warning\":\"outline-light\",size:\"sm\",onClick:toggleAutoRefresh,title:autoRefresh?\"Auto-refresh aktif (30 detik)\":\"Auto-refresh tidak aktif\",children:autoRefresh?\"‚è∏Ô∏è Stop Auto\":\"‚ñ∂Ô∏è Auto\"})]})]})})]})}),/*#__PURE__*/_jsxs(Tab.Container,{activeKey:activeTab,onSelect:setActiveTab,children:[/*#__PURE__*/_jsxs(Nav,{variant:\"tabs\",className:\"mb-4\",children:[/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"overview\",style:{color:activeTab==='overview'?'#fff':'#007bff',backgroundColor:activeTab==='overview'?'#007bff':'transparent',borderColor:'#007bff'},children:\"Overview\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"education\",style:{color:activeTab==='education'?'#fff':'#007bff',backgroundColor:activeTab==='education'?'#007bff':'transparent',borderColor:'#007bff'},children:\"Analisis Pendidikan\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(Nav.Link,{eventKey:\"employees\",style:{color:activeTab==='employees'?'#fff':'#007bff',backgroundColor:activeTab==='employees'?'#007bff':'transparent',borderColor:'#007bff'},children:\"Detail Karyawan\"})}),/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsxs(Nav.Link,{eventKey:\"processed\",style:{color:activeTab==='processed'?'#fff':'#007bff',backgroundColor:activeTab==='processed'?'#007bff':'transparent',borderColor:'#007bff'},children:[\"Rekomendasi Diproses (\",processedRecommendations.length,\")\"]})})]}),/*#__PURE__*/_jsxs(Tab.Content,{children:[/*#__PURE__*/_jsxs(Tab.Pane,{eventKey:\"overview\",children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"h-100\",style:{background:'linear-gradient(135deg, #28a745 0%, #1e7e34 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s2=analytics.division_stats)===null||_analytics$division_s2===void 0?void 0:(_analytics$division_s3=_analytics$division_s2.data_mining_summary)===null||_analytics$division_s3===void 0?void 0:_analytics$division_s3.match_employees)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Match Employees\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"h-100\",style:{background:'linear-gradient(135deg, #ffc107 0%, #e0a800 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s4=analytics.division_stats)===null||_analytics$division_s4===void 0?void 0:(_analytics$division_s5=_analytics$division_s4.data_mining_summary)===null||_analytics$division_s5===void 0?void 0:_analytics$division_s5.recommended_extensions)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"Rekomendasi Perpanjangan\"})]})})}),/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Card,{className:\"h-100\",style:{background:'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',color:'white'},children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$division_s6=analytics.division_stats)===null||_analytics$division_s6===void 0?void 0:(_analytics$division_s7=_analytics$division_s6.data_mining_summary)===null||_analytics$division_s7===void 0?void 0:_analytics$division_s7.high_risk_employees)||0}),/*#__PURE__*/_jsx(\"small\",{children:\"High Risk Employees\"})]})})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83D\\uDCCA Distribusi Tingkat Risiko\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Doughnut,{data:getRiskLevelChart(),options:{responsive:true,plugins:{legend:{position:'bottom'}}}})})]})}),/*#__PURE__*/_jsx(Col,{md:6,className:\"mb-4\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83D\\uDCC8 Rekomendasi Durasi Kontrak\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Bar,{data:getContractRecommendationChart(),options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}})})]})})]})]}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"education\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83C\\uDF93 Analisis Kecocokan Pendidikan-Pekerjaan (Data Mining)\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:'#007bff',color:'white'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nama\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pendidikan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Posisi\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Match\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rekomendasi Durasi\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(analytics===null||analytics===void 0?void 0:(_analytics$employees=analytics.employees)===null||_analytics$employees===void 0?void 0:_analytics$employees.map((emp,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:emp.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[emp.tenure_months,\" bulan\"]})]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"div\",{children:emp.major}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:emp.education_level})]}),/*#__PURE__*/_jsx(\"td\",{children:emp.role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:getMatchLevelBadge(emp)})}),/*#__PURE__*/_jsx(\"td\",{children:emp.current_contract_type==='permanent'?/*#__PURE__*/_jsx(\"span\",{children:\"-\"}):(()=>{// Check for Non-IT elimination first\nconst nonItMajors=['kedokteran','farmasi','hukum','akuntansi','manajemen','ekonomi','psikologi','bahasa','sastra','pendidikan','sejarah','geografi','biologi','kimia','fisika','matematika','pertanian','kehutanan','perikanan','kedokteran hewan','arsitektur','sipil','mesin','elektro','industri','teknik','seni','desain','komunikasi','jurnalistik','sosiologi','antropologi','ilmu politik','hubungan internasional','administrasi','keperawatan','kebidanan','gizi','kesehatan masyarakat','olahraga','keolahragaan'];const employeeMajor=(emp.major||'').toLowerCase().trim();const isNonIT=nonItMajors.some(nonItMajor=>employeeMajor.includes(nonItMajor));if(isNonIT){return/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"TIDAK DIREKOMENDASIKAN\"});}else if(emp.education_job_match==='Unmatch'){// Unmatch - show contract type based on current contract\nswitch(emp.current_contract_type){case'probation':return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"Kontrak 2 (Evaluasi)\"});case'1':return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"Kontrak 2 (Evaluasi)\"});case'2':return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"Kontrak 3 (Evaluasi)\"});case'3':return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"Kontrak 3 (Evaluasi)\"});default:return/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"Probation (Evaluasi)\"});}}else{var _emp$intelligence_dat11;// Match - use intelligent recommendation based on profile and current contract\nlet recommendedType='Kontrak 1';let badgeVariant='primary';// Get employee's education score and current contract type\nconst educationScore=((_emp$intelligence_dat11=emp.intelligence_data)===null||_emp$intelligence_dat11===void 0?void 0:_emp$intelligence_dat11.education_score)||0;const currentContract=emp.current_contract_type;const major=(emp.major||'').toLowerCase();const role=(emp.role||'').toLowerCase();// Check if IT-related major\nconst isItMajor=major.includes('information')||major.includes('computer')||major.includes('informatic')||major.includes('teknik informatika')||major.includes('system')||major.includes('software');// Check role level\nconst isManager=role.includes('manager')||role.includes('head')||role.includes('director');const isSenior=role.includes('senior')||role.includes('sr.');const isJunior=role.includes('junior')||role.includes('jr.')||role.includes('trainee');// Determine recommendation based on profile and progression\nif(currentContract==='probation'){if(isManager||isSenior&&isItMajor){recommendedType='Kontrak 3';badgeVariant='secondary';}else if(isItMajor&&educationScore>=2){recommendedType='Kontrak 2';badgeVariant='info';}else{recommendedType='Kontrak 1';badgeVariant='primary';}}else if(currentContract==='1'){if(isManager||isSenior&&isItMajor){recommendedType='PERMANENT';badgeVariant='success';}else{recommendedType='Kontrak 2';badgeVariant='info';}}else if(currentContract==='2'){if(isJunior&&!isItMajor){recommendedType='Kontrak 3';badgeVariant='secondary';}else{recommendedType='PERMANENT';badgeVariant='success';}}else if(currentContract==='3'){recommendedType='PERMANENT';badgeVariant='success';}return/*#__PURE__*/_jsx(Badge,{bg:badgeVariant,children:recommendedType});}})()})]},index)))||[]})]})})]})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"employees\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{style:{backgroundColor:'#007bff',color:'white'},className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\uD83D\\uDC65 Detail Karyawan Divisi\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-light\",size:\"sm\",onClick:handleManualRefresh,children:\"\\uD83D\\uDD04 Refresh Data\"}),/*#__PURE__*/_jsx(Button,{variant:autoRefresh?\"warning\":\"outline-light\",size:\"sm\",onClick:toggleAutoRefresh,title:autoRefresh?\"Auto-refresh aktif (30 detik)\":\"Auto-refresh tidak aktif\",children:autoRefresh?\"‚è∏Ô∏è Stop Auto\":\"‚ñ∂Ô∏è Auto Refresh\"})]})]}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:'#e3f2fd'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nama & Departemen\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pendidikan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Join Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Years Of Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Kontrak\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Match\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rekomendasi Kontrak\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Approval\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:analytics===null||analytics===void 0?void 0:analytics.employees.map((emp,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:emp.name}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:emp.role})]})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[emp.major,/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:emp.education_level})]})]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(emp.join_date).toLocaleDateString('id-ID')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Badge,{bg:\"info\",children:[emp.tenure_months,\" bulan\"]})}),/*#__PURE__*/_jsx(\"td\",{children:getContractStatusBadge(emp)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:getMatchLevelBadge(emp)})}),/*#__PURE__*/_jsx(\"td\",{children:getRecommendationStatusBadge(emp)}),/*#__PURE__*/_jsx(\"td\",{children:getApprovalStatusBadge(emp)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex gap-2\",children:emp.current_contract_type==='permanent'?/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column gap-1\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline-primary\",onClick:()=>handleEmployeeClick(emp),children:\"Detail\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline-danger\",disabled:true,title:\"Karyawan memiliki kontrak permanent\",style:{backgroundColor:'#f8f9fa',borderColor:'#dc3545',color:'#dc3545',cursor:'not-allowed',opacity:0.7,fontSize:'0.7rem',padding:'0.25rem 0.4rem',lineHeight:'1.2'},children:\"\\u274C Tidak Dapat Direkomendasikan\"})]}):emp.has_pending_recommendation?/*#__PURE__*//* Employee has pending recommendation */_jsxs(\"div\",{className:\"d-flex flex-column gap-1\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline-primary\",onClick:()=>handleEmployeeClick(emp),children:\"Detail\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline-warning\",disabled:true,title:\"Rekomendasi sedang menunggu persetujuan HR. Tidak dapat membuat rekomendasi baru hingga HR memproses yang sebelumnya.\",style:{backgroundColor:'#fff3cd',borderColor:'#ffc107',color:'#856404',cursor:'not-allowed',fontSize:'0.7rem',padding:'0.25rem 0.4rem',lineHeight:'1.2'},children:\"\\u23F3 Menunggu HR\"})]}):/*#__PURE__*//* Normal case - can create recommendation */_jsx(Button,{size:\"sm\",variant:\"success\",onClick:()=>handleCreateRecommendation(emp),title:\"Lihat detail dan buat rekomendasi untuk karyawan ini\",children:\"Detail & Rekomendasi\"})})})]},index))})]})})]})}),/*#__PURE__*/_jsx(Tab.Pane,{eventKey:\"processed\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{style:{backgroundColor:'#28a745',color:'white'},className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"\\u2705 Rekomendasi yang Sudah Diproses HR\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Lihat status rekomendasi Anda dan kontrak yang telah diperpanjang\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-light\",size:\"sm\",onClick:fetchProcessedRecommendations,className:\"ms-2\",children:\"\\uD83D\\uDD04 Refresh\"})]}),/*#__PURE__*/_jsx(Card.Body,{children:processedRecommendations.length>0?/*#__PURE__*/_jsxs(Table,{responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:'#e8f5e8'},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Karyawan\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rekomendasi Anda\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status HR\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kontrak Baru\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tanggal Diproses\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:processedRecommendations.map((rec,index)=>{var _rec$new_contract,_rec$new_contract2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:rec.employee.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:rec.employee.role})]})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Badge,{bg:\"primary\",className:\"me-1\",children:rec.recommendation_type==='kontrak1'?'Kontrak 1':rec.recommendation_type==='kontrak2'?'Kontrak 2':rec.recommendation_type==='kontrak3'?'Kontrak 3':rec.recommendation_type}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[rec.recommended_duration,\" bulan\"]})]}),/*#__PURE__*/_jsx(\"td\",{children:rec.status==='approved'?/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"\\u2705 Disetujui\"}):rec.status==='extended'?/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"\\u2705 Sudah Diperpanjang\"}):rec.status==='resign'?/*#__PURE__*/_jsx(Badge,{bg:\"dark\",children:\"\\uD83D\\uDC4B Resign\"}):/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"\\u274C Ditolak\"})}),/*#__PURE__*/_jsx(\"td\",{children:rec.status==='resign'?/*#__PURE__*/_jsx(Badge,{bg:\"dark\",children:\"\\uD83D\\uDC4B Resign\"}):(rec.status==='approved'||rec.status==='extended')&&(_rec$new_contract=rec.new_contract)!==null&&_rec$new_contract!==void 0&&_rec$new_contract.is_created?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Badge,{bg:\"success\",className:\"mb-1\",children:[\"Kontrak \",rec.new_contract.type]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-success\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2705 Kontrak Aktif:\"}),/*#__PURE__*/_jsx(\"br\",{}),rec.new_contract.end_date?`${new Date(rec.new_contract.start_date).toLocaleDateString('id-ID')} - ${new Date(rec.new_contract.end_date).toLocaleDateString('id-ID')}`:`Mulai: ${new Date(rec.new_contract.start_date).toLocaleDateString('id-ID')} (Permanent)`,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",children:[\"Durasi: \",rec.recommended_duration==='permanent'?'Permanent':`${rec.recommended_duration} bulan`]})]})]}):rec.status==='approved'||rec.status==='extended'?/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"\\u23F3 Kontrak sedang dibuat\"}):/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Tidak ada kontrak baru\"})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(rec.updated_at).toLocaleDateString('id-ID')}),/*#__PURE__*/_jsx(\"td\",{children:rec.status==='resign'?/*#__PURE__*/_jsx(Badge,{bg:\"secondary\",children:\"\\uD83D\\uDEAB Tidak Dilanjutkan\"}):(rec.status==='approved'||rec.status==='extended')&&(_rec$new_contract2=rec.new_contract)!==null&&_rec$new_contract2!==void 0&&_rec$new_contract2.is_created?/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"\\uD83C\\uDF89 Kontrak Berhasil Diperpanjang\"}):rec.status==='approved'||rec.status==='extended'?/*#__PURE__*/_jsx(Badge,{bg:\"warning\",children:\"\\u23F3 Sedang Memproses Kontrak\"}):/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:\"\\u274C Rekomendasi Ditolak\"})})]},index);})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"display-1 mb-3\",children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"Belum Ada Rekomendasi yang Diproses\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Rekomendasi yang Anda buat akan muncul di sini setelah diproses oleh HR.\"})]})})]})})]})]}),showEmployeeModal&&selectedEmployee&&/*#__PURE__*/_jsx(\"div\",{className:\"modal active\",onClick:()=>handleCloseModal(),children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-xl\",style:{maxWidth:'90vw'},onClick:e=>e.stopPropagation(),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header py-3\",style:{background:'linear-gradient(135deg, #007bff 0%, #6610f2 100%)',color:'white'},children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-circle me-2\"}),selectedEmployee.name,\" - Detail dan Rekomendasi\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close btn-close-white\",onClick:()=>setShowEmployeeModal(false)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body p-3\",style:{maxHeight:'80vh',overflowY:'auto'},children:loadingDetail?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:\"Memuat detail karyawan...\"})]}):employeeDetail&&!employeeDetail.error?/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid p-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header py-3 bg-primary text-white\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user me-2\"}),\"Informasi Karyawan\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Nama\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-dark\",children:employeeDetail.employee.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Posisi\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-dark\",children:employeeDetail.employee.role})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Divisi\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-dark\",children:employeeDetail.employee.division_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Tenure\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-dark\",children:[Math.round(employeeDetail.employee.tenure_months),\" bulan\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Pendidikan\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-dark\",children:[employeeDetail.employee.education_level,\" - \",employeeDetail.employee.major]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Match Status\"}),/*#__PURE__*/_jsx(\"div\",{children:(_selectedEmployee$int=>{const educationScore=(selectedEmployee===null||selectedEmployee===void 0?void 0:(_selectedEmployee$int=selectedEmployee.intelligence_data)===null||_selectedEmployee$int===void 0?void 0:_selectedEmployee$int.education_score)||0;const matchStatus=educationScore>=2?'Match':'Unmatch';const badgeClass=matchStatus==='Match'?'bg-success':'bg-warning';return/*#__PURE__*/_jsx(\"span\",{className:`badge ${badgeClass}`,children:matchStatus});})()})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header py-3 bg-success text-white\",children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-brain me-2\"}),\"Data Intelligence & Statistics\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Tipe Kontrak\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-success\",children:getConsistentContractRecommendation(selectedEmployee)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Sample Size\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-dark\",children:(()=>{const stats=getConsistentStatistics(selectedEmployee,employeeDetail);return`${stats.sampleSize} profil`;})()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Rekomendasi\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-primary\",children:getConsistentDurationRecommendation(selectedEmployee)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:selectedEmployee?/*#__PURE__*/_jsx(\"div\",{children:(()=>{const stats=getConsistentStatistics(selectedEmployee,employeeDetail);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Masih Aktif\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-success\",children:[stats.masihAktif,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Sudah Resign\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-danger\",children:[stats.sudahResign,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Early Resign Risk\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-warning\",children:[stats.earlyResignRisk,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Avg Tenure\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold text-primary\",children:[stats.avgTenure,\" bulan\"]})]})]});})()}):/*#__PURE__*//* Fallback statistics */_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Masih Aktif\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-success\",children:\"60%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Sudah Resign\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-danger\",children:\"40%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Early Resign Risk\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-warning\",children:\"30.0%\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Avg Tenure\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-primary\",children:\"15.0 bulan\"})]})]})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header py-3\",style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white'},children:/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users me-2\"}),\"Profil Serupa (\",(()=>{const stats=getConsistentStatistics(selectedEmployee,employeeDetail);return stats.sampleSize;})(),\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-2\",style:{backgroundColor:'#f8f9fa'},children:((_employeeDetail$dynam=employeeDetail.dynamic_intelligence)===null||_employeeDetail$dynam===void 0?void 0:(_employeeDetail$dynam2=_employeeDetail$dynam.historical_patterns)===null||_employeeDetail$dynam2===void 0?void 0:(_employeeDetail$dynam3=_employeeDetail$dynam2.profiles)===null||_employeeDetail$dynam3===void 0?void 0:_employeeDetail$dynam3.length)>0?(()=>{const profiles=employeeDetail.dynamic_intelligence.historical_patterns.profiles;const displayProfiles=showAllProfiles?profiles:profiles.slice(0,8);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column gap-1\",style:{maxHeight:showAllProfiles?'none':'300px',overflowY:showAllProfiles?'visible':'auto'},children:displayProfiles.sort((a,b)=>{// Sort by status (Active/Permanent first), then by tenure\nconst aIsActive=a.outcome_status==='Currently_Active'||a.outcome_status==='Reached_Permanent';const bIsActive=b.outcome_status==='Currently_Active'||b.outcome_status==='Reached_Permanent';if(aIsActive&&!bIsActive)return-1;if(!aIsActive&&bIsActive)return 1;return(b.total_tenure_months||0)-(a.total_tenure_months||0);}).map((profile,idx)=>/*#__PURE__*/_jsx(\"div\",{className:`card border-0 shadow-sm ${profile.outcome_status==='Currently_Active'||profile.outcome_status==='Reached_Permanent'?'border-start border-success border-3':'border-start border-danger border-3'}`,style:{backgroundColor:'white',borderRadius:'4px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold text-truncate\",style:{fontSize:'0.75rem',color:profile.outcome_status==='Currently_Active'||profile.outcome_status==='Reached_Permanent'?'#198754':'#dc3545'},children:profile.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",style:{fontSize:'0.7rem'},children:[profile.major||'N/A',\" - \",profile.role||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-muted\",style:{fontSize:'0.7rem'},children:[profile.current_contract_type||'N/A',\" \\u2022 \",Math.round(profile.total_tenure_months||0),\"m\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:`badge ${profile.outcome_status==='Currently_Active'||profile.outcome_status==='Reached_Permanent'?'bg-success':'bg-danger'}`,style:{fontSize:'0.6rem'},children:profile.outcome_status==='Currently_Active'?'Aktif':profile.outcome_status==='Reached_Permanent'?'Permanent':profile.outcome_status==='Resigned'?'Resign':profile.outcome_status==='Terminated'?'Terminated':'Unknown'})]})})},profile.eid))}),profiles.length>8&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary\",onClick:()=>setShowAllProfiles(!showAllProfiles),style:{fontSize:'0.75rem'},children:showAllProfiles?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-up me-1\"}),\"Tampilkan Lebih Sedikit\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-down me-1\"}),\"Tampilkan Semua (\",profiles.length,\" profil)\"]})})})]});})():/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users fa-2x text-muted mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-muted small\",children:\"Tidak ada profil serupa\"})]})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header py-3\",style:{background:'linear-gradient(135deg, #fd7e14 0%, #ffc107 100%)',color:'white'},children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-signature me-2\"}),\"Form Rekomendasi Kontrak\"]}),/*#__PURE__*/_jsx(\"small\",{className:\"opacity-75\",children:\"Pilih tipe kontrak dan durasi yang sesuai berdasarkan analisis data\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4\",children:[employeeDetail.dynamic_intelligence&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info border-0 shadow-sm mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-brain fa-2x text-info me-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{className:\"alert-heading mb-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lightbulb me-1\"}),\"Dynamic Intelligence Suggestion\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Tipe Kontrak Direkomendasikan\"}),/*#__PURE__*/_jsx(\"strong\",{children:getConsistentContractRecommendation(selectedEmployee)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Durasi Optimal\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"text-primary\",children:getConsistentDurationRecommendation(selectedEmployee)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block\",children:\"Sample Size\"}),/*#__PURE__*/_jsx(\"strong\",{children:(()=>{const stats=getConsistentStatistics(selectedEmployee,employeeDetail);return`${stats.sampleSize} profil serupa`;})()})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"recommendation_type\",className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clipboard-list me-2\"}),\"Jenis Rekomendasi\"]}),/*#__PURE__*/_jsxs(\"select\",{id:\"recommendation_type\",name:\"recommendation_type\",className:\"form-select form-select-lg\",value:recommendationData.recommendation_type||'',onChange:e=>{const newType=e.target.value;setRecommendationData(prev=>({...prev,recommendation_type:newType,// Reset duration when changing contract type\nrecommended_duration:newType==='permanent'?0:newType==='terminate'?0:''}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Pilih Jenis Kontrak\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kontrak2\",children:\"Kontrak 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"kontrak3\",children:\"Kontrak 3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"permanent\",children:\"Permanent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"terminate\",children:recommendationData.reason&&recommendationData.reason.includes('ELIMINASI OTOMATIS')?'TIDAK DIREKOMENDASIKAN':'Tidak Diperpanjang'})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"recommended_duration_select\",className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-calendar-alt me-2\"}),\"Durasi Optimal (bulan)\"]}),recommendationData.recommendation_type==='kontrak2'||recommendationData.recommendation_type==='kontrak3'?/*#__PURE__*/_jsxs(\"select\",{id:\"recommended_duration_select\",name:\"recommended_duration_select\",className:\"form-select form-select-lg\",value:recommendationData.recommended_duration||'',onChange:e=>setRecommendationData(prev=>({...prev,recommended_duration:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Pilih durasi kontrak\"}),/*#__PURE__*/_jsx(\"option\",{value:\"6\",children:\"6 Bulan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"12\",children:\"12 Bulan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"18\",children:\"18 Bulan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"24\",children:\"24 Bulan\"})]}):/*#__PURE__*/_jsx(\"input\",{id:\"recommended_duration\",name:\"recommended_duration\",type:\"number\",className:\"form-control form-control-lg\",value:recommendationData.recommended_duration||'',onChange:e=>setRecommendationData(prev=>({...prev,recommended_duration:e.target.value})),disabled:recommendationData.recommendation_type==='permanent'||recommendationData.recommendation_type==='terminate',placeholder:\"Masukkan durasi dalam bulan\",min:\"1\",max:\"36\"}),(recommendationData.recommendation_type==='kontrak2'||recommendationData.recommendation_type==='kontrak3')&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-info\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-1\"}),\"Pilih durasi yang sesuai berdasarkan rekomendasi sistem dan performa karyawan\"]})}),recommendationData.recommendation_type==='permanent'&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-success\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-1\"}),\"Permanent - tidak memerlukan durasi\"]})}),recommendationData.recommendation_type==='terminate'&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-danger\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle me-1\"}),recommendationData.reason&&recommendationData.reason.includes('ELIMINASI OTOMATIS')?'ELIMINASI OTOMATIS - Jurusan Non-IT tidak direkomendasikan':'Tidak diperpanjang - kontrak berakhir']})})]})})]}),(recommendationData.recommendation_type==='kontrak2'||recommendationData.recommendation_type==='kontrak3'||recommendationData.recommendation_type==='permanent')&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"contract_start_date\",className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-calendar-check me-2\"}),\"Tanggal Mulai Kontrak Baru\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"contract_start_date\",name:\"contract_start_date\",type:\"date\",className:\"form-control form-control-lg\",value:recommendationData.contract_start_date||'',onChange:e=>setRecommendationData(prev=>({...prev,contract_start_date:e.target.value})),min:new Date().toISOString().split('T')[0]// Minimum today\n}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-text\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-1\"}),\"Tentukan kapan kontrak baru akan mulai berlaku. Membantu HR dalam perencanaan dan data intelligence yang lebih akurat.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"recommendationReason\",className:\"form-label fw-bold\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-comment-alt me-2\"}),\"Alasan Rekomendasi\"]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"recommendationReason\",name:\"recommendationReason\",className:\"form-control\",rows:\"4\",value:recommendationData.reason||'',onChange:e=>setRecommendationData(prev=>({...prev,reason:e.target.value})),placeholder:\"Jelaskan alasan rekomendasi berdasarkan analisis data, performa karyawan, dan kebutuhan perusahaan...\",style:{resize:'vertical'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-text\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lightbulb me-1\"}),\"Tip: Sertakan justifikasi berdasarkan match status, tenure, dan analisis data mining\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-success btn-lg px-5\",onClick:submitRecommendation,disabled:!(employeeDetail!==null&&employeeDetail!==void 0&&(_employeeDetail$emplo3=employeeDetail.employee)!==null&&_employeeDetail$emplo3!==void 0&&_employeeDetail$emplo3.eid||selectedEmployee!==null&&selectedEmployee!==void 0&&selectedEmployee.eid)||!recommendationData.recommendation_type||// Validate duration for kontrak2 and kontrak3\n['kontrak2','kontrak3'].includes(recommendationData.recommendation_type)&&(!recommendationData.recommended_duration||recommendationData.recommended_duration==='0')||// Validate contract start date for extension types\n['kontrak2','kontrak3','permanent'].includes(recommendationData.recommendation_type)&&!recommendationData.contract_start_date,title:!(employeeDetail!==null&&employeeDetail!==void 0&&(_employeeDetail$emplo4=employeeDetail.employee)!==null&&_employeeDetail$emplo4!==void 0&&_employeeDetail$emplo4.eid||selectedEmployee!==null&&selectedEmployee!==void 0&&selectedEmployee.eid)?'Data karyawan tidak lengkap':!recommendationData.recommendation_type?'Pilih jenis rekomendasi':['kontrak2','kontrak3'].includes(recommendationData.recommendation_type)&&(!recommendationData.recommended_duration||recommendationData.recommended_duration==='0')?'Pilih durasi kontrak':['kontrak2','kontrak3','permanent'].includes(recommendationData.recommendation_type)&&!recommendationData.contract_start_date?'Pilih tanggal mulai kontrak':'Kirim rekomendasi ke HR',children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane me-2\"}),\"Kirim Rekomendasi ke HR\"]})})]})]})})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger border-0 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"alert-heading\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle me-2\"}),\"Gagal memuat detail karyawan\"]}),employeeDetail!==null&&employeeDetail!==void 0&&employeeDetail.error?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",employeeDetail.errorMessage]}),/*#__PURE__*/_jsxs(\"details\",{children:[/*#__PURE__*/_jsx(\"summary\",{children:\"Debug Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Employee:\"}),\" \",(_employeeDetail$emplo5=employeeDetail.employee)===null||_employeeDetail$emplo5===void 0?void 0:_employeeDetail$emplo5.name,\" (EID: \",(_employeeDetail$emplo6=employeeDetail.employee)===null||_employeeDetail$emplo6===void 0?void 0:_employeeDetail$emplo6.eid,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Contract:\"}),\" \",(_employeeDetail$emplo7=employeeDetail.employee)===null||_employeeDetail$emplo7===void 0?void 0:_employeeDetail$emplo7.current_contract_type]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Possible causes:\"})}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Session expired - try refreshing the page\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Network connection issues\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Server configuration problems\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"small text-muted\",children:\"Check browser console for more details (F12 \\u2192 Console)\"})]})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Terjadi kesalahan saat mengambil data analisis karyawan. Silakan coba lagi atau hubungi administrator sistem.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer py-3 bg-light\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-secondary px-4\",onClick:()=>setShowEmployeeModal(false),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times me-2\"}),\"Tutup\"]})})]})})})]});};export default ManagerDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ArcElement","PointElement","LineElement","Filler","Bar","Doughnut","useAuth","Card","Container","Row","Col","Nav","Tab","Table","Badge","Button","Modal","Alert","Spinner","ProgressBar","Form","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","register","ManagerDashboard","_analytics$division_s","_analytics$division_s2","_analytics$division_s3","_analytics$division_s4","_analytics$division_s5","_analytics$division_s6","_analytics$division_s7","_analytics$employees","_employeeDetail$dynam","_employeeDetail$dynam2","_employeeDetail$dynam3","_employeeDetail$emplo3","_employeeDetail$emplo4","_employeeDetail$emplo5","_employeeDetail$emplo6","_employeeDetail$emplo7","analytics","setAnalytics","educationAnalysis","setEducationAnalysis","divisionIntelligence","setDivisionIntelligence","loading","setLoading","activeTab","setActiveTab","user","showEmployeeModal","setShowEmployeeModal","selectedEmployee","setSelectedEmployee","employeeDetail","setEmployeeDetail","loadingDetail","setLoadingDetail","autoRefresh","setAutoRefresh","refreshInterval","setRefreshInterval","lastRefresh","setLastRefresh","showAllProfiles","setShowAllProfiles","recommendationData","setRecommendationData","recommendation_type","recommended_duration","contract_start_date","reason","alert","setAlert","show","message","type","processedRecommendations","setProcessedRecommendations","handleCloseModal","console","log","setTimeout","fetchManagerData","fetchProcessedRecommendations","role","showAlert","interval","setInterval","clearInterval","toggleAutoRefresh","handleManualRefresh","dynamic_intelligence","intelligence","duration","optimal_duration","category","match_category","defaultType","defaultDuration","nonItMajors","employeeMajor","major","toLowerCase","trim","isNonIT","some","nonItMajor","includes","education_job_match","current_contract_type","reasonPrefix","eid","employee_name","name","timestamp","Date","getTime","analyticsRes","get","withCredentials","data","success","_rawData$statistics","_rawData$statistics2","_rawData$statistics3","_rawData$statistics4","_rawData$employees","rawData","transformedData","division_stats","total_employees","statistics","data_mining_summary","match_employees","recommended_extensions","extension_employees","high_risk_employees","employees","slice","map","emp","contract_type","contract_end","days_to_end","days_to_contract_end","matchDistribution","filter","length","education_analysis","match_distribution","contract_progression","contract_status","tenure_months","_emp$data_mining_reco","status","recommendation","data_mining_recommendation","performance_predictions","_emp$intelligence_dat","_emp$intelligence_dat2","success_probability","intelligence_data","risk_level","contract_recommendation","urgent_contract_decisions","_emp$intelligence_dat3","error","response","rec","_rec$employee","_rec$employee2","rec_id","recommendation_id","employee","employee_eid","resignRecs","fetchEmployeeDetail","fetch","credentials","headers","ok","Error","responseText","text","substring","result","JSON","parse","jsonError","handleEmployeeClick","_employeeData$employe","_employeeData$dynamic","_employeeData$dynamic2","employeeData","errorMessage","handleCreateRecommendation","submitRecommendation","_employeeDetail$emplo","_employeeDetail$emplo2","employeeEid","employeeName","formData","FormData","append","systemRec","confidence_level","sample_size","key","value","entries","post","timeout","_error$response$data","_error$response$data2","errorMsg","request","getMatchDistributionChart","labels","datasets","label","backgroundColor","borderWidth","Match","Unmatch","getRiskLevelChart","lowRisk","_emp$intelligence_dat4","mediumRisk","_emp$intelligence_dat5","highRisk","_emp$intelligence_dat6","totalEmployees","sampleData","_emp$intelligence_dat7","getContractRecommendationChart","borderColor","duration6","_emp$intelligence_dat8","duration12","_emp$intelligence_dat9","duration18","_emp$intelligence_dat0","duration24","_emp$intelligence_dat1","duration36","_emp$intelligence_dat10","getDataMiningRecommendation","confidence","reasoning","matchStatus","tenure","currentContract","calculateMatchStatusLocal","toUpperCase","designation","itEducationKeywords","itJobKeywords","isItEducation","keyword","isItJob","getMatchLevelBadge","bg","children","getRiskLevelBadge","riskLevel","getContractStatusBadge","contractType","contractEnd","daysToEnd","badges","variant","null","badge","endDateText","endDate","toLocaleDateString","className","getConsistentDurationRecommendation","_employee$intelligenc","_employee$intelligenc2","getConsistentStatistics","_employee$intelligenc3","_employee$intelligenc4","dynamicIntelligence","historicalPatterns","historical_patterns","_resignAnalysis$optim","_resignAnalysis$curre","_historicalPatterns$d","_historicalPatterns$d2","masihAktif","parseFloat","success_rate","sudahResign","resign_rate","earlyResignRate","early_resign_rate","avgTenure","avg_duration","sampleSize","parseInt","total_similar","resignAnalysis","resign_analysis","earlyResignRisk","optimal_duration_recommendation","optimalRisk","current_contract_analysis","data_insights","early_resign_analysis","rate","Math","max","min","round","educationScore","education_score","getConsistentContractRecommendation","_employee$intelligenc5","_employee$intelligenc6","_employee$intelligenc9","has_pending_recommendation","_employee$intelligenc7","_employee$intelligenc8","recommendedType","getRecommendedContractType","undefined","matchCategory","getRecommendationStatusBadge","_employee$intelligenc0","_employee$intelligenc10","_employee$intelligenc1","durationText","_employee$intelligenc11","badgeVariant","_employee$intelligenc12","_employee$data_mining","getApprovalStatusBadge","_rec$employee3","recentProcessedRec","find","_rec$employee4","fluid","dismissible","onClose","style","background","color","division_name","toLocaleTimeString","xs","size","onClick","title","activeKey","onSelect","Item","Link","eventKey","Content","Pane","md","Body","Header","options","responsive","plugins","legend","position","display","scales","y","beginAtZero","striped","index","education_level","_emp$intelligence_dat11","isItMajor","isManager","isSenior","isJunior","hover","join_date","disabled","cursor","opacity","fontSize","padding","lineHeight","_rec$new_contract","_rec$new_contract2","new_contract","is_created","end_date","start_date","updated_at","maxWidth","e","stopPropagation","maxHeight","overflowY","animation","_selectedEmployee$int","badgeClass","stats","profiles","displayProfiles","sort","a","b","aIsActive","outcome_status","bIsActive","total_tenure_months","profile","idx","borderRadius","htmlFor","id","onChange","newType","target","prev","placeholder","toISOString","split","rows","resize"],"sources":["C:/xampp/htdocs/web_srk_BI/frontend/src/pages/ManagerDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n  PointElement,\n  LineElement,\n  Filler,\n} from 'chart.js';\nimport { Bar, Doughnut } from 'react-chartjs-2';\nimport { useAuth } from '../App';\nimport { Card, Container, Row, Col, Nav, Tab, Table, Badge, Button, Modal, Alert, Spinner, ProgressBar, Form } from 'react-bootstrap';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  ArcElement,\n  Filler\n);\n\nconst ManagerDashboard = () => {\n  const [analytics, setAnalytics] = useState(null);\n  const [educationAnalysis, setEducationAnalysis] = useState(null);\n  const [divisionIntelligence, setDivisionIntelligence] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('overview');\n  const { user } = useAuth();\n  const [showEmployeeModal, setShowEmployeeModal] = useState(false);\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [employeeDetail, setEmployeeDetail] = useState(null);\n  const [loadingDetail, setLoadingDetail] = useState(false);\n  const [autoRefresh, setAutoRefresh] = useState(false); // Auto-refresh disabled by default\n  const [refreshInterval, setRefreshInterval] = useState(null);\n  const [lastRefresh, setLastRefresh] = useState(null);\n\n  const [showAllProfiles, setShowAllProfiles] = useState(false);\n  \n  // Reset showAllProfiles when selectedEmployee changes\n  useEffect(() => {\n    setShowAllProfiles(false);\n  }, [selectedEmployee]);\n\n  const [recommendationData, setRecommendationData] = useState({\n    recommendation_type: 'extend',\n    recommended_duration: '',\n    contract_start_date: '',\n    reason: ''\n  });\n  const [alert, setAlert] = useState({ show: false, message: '', type: '' });\n  const [processedRecommendations, setProcessedRecommendations] = useState([]);\n\n  // Handler for closing modal with data refresh\n  const handleCloseModal = () => {\n    console.log('üîÑ Closing modal and refreshing data...');\n    setShowEmployeeModal(false);\n    // Refresh data immediately to ensure latest contract status\n    setTimeout(() => {\n      fetchManagerData();\n      fetchProcessedRecommendations();\n    }, 500); // Small delay to ensure any backend processing is complete\n  };\n\n  useEffect(() => {\n    if (user?.role === 'manager') {\n      fetchManagerData();\n      fetchProcessedRecommendations();\n    } else if (user?.role === 'hr') {\n      showAlert('HR tidak dapat membuat rekomendasi. Hanya manager yang dapat membuat rekomendasi karyawan.', 'warning');\n    }\n  }, [user]);\n\n  // Separate useEffect for auto-refresh management\n  useEffect(() => {\n    if (autoRefresh && user?.role === 'manager') {\n      const interval = setInterval(() => {\n        console.log('üîÑ Auto-refreshing manager data and processed recommendations...');\n        fetchManagerData();\n        fetchProcessedRecommendations();\n      }, 30000); // 30 seconds\n      \n      setRefreshInterval(interval);\n      \n      return () => {\n        if (interval) {\n          clearInterval(interval);\n        }\n      };\n    } else if (refreshInterval) {\n      clearInterval(refreshInterval);\n      setRefreshInterval(null);\n    }\n  }, [autoRefresh, user]);\n\n  // Cleanup on component unmount\n  useEffect(() => {\n    return () => {\n      if (refreshInterval) {\n        clearInterval(refreshInterval);\n      }\n    };\n  }, []);\n\n  // Toggle auto-refresh function\n  const toggleAutoRefresh = () => {\n    setAutoRefresh(!autoRefresh);\n    if (autoRefresh) {\n      console.log('üõë Auto-refresh disabled');\n    } else {\n      console.log('‚ñ∂Ô∏è Auto-refresh enabled (30 seconds)');\n    }\n  };\n\n  // Manual refresh function  \n  const handleManualRefresh = () => {\n    console.log('üîÑ Manual refresh clicked');\n    fetchManagerData();\n    fetchProcessedRecommendations();\n  };\n\n  // Update recommendation form when employee detail is loaded\n  useEffect(() => {\n    if (employeeDetail && employeeDetail.dynamic_intelligence && selectedEmployee) {\n      const intelligence = employeeDetail.dynamic_intelligence;\n      const duration = intelligence.optimal_duration;\n      const category = intelligence.match_category;\n      \n      // PROPER FORM DEFAULTS based on dynamic intelligence\n      let defaultType = 'kontrak2';\n      let defaultDuration = duration || 6;\n      \n      // Check for Non-IT major elimination first\n      const nonItMajors = [\n        'kedokteran', 'farmasi', 'hukum', 'akuntansi', 'manajemen', 'ekonomi',\n        'psikologi', 'bahasa', 'sastra', 'pendidikan', 'sejarah', 'geografi',\n        'biologi', 'kimia', 'fisika', 'matematika', 'pertanian', 'kehutanan',\n        'perikanan', 'kedokteran hewan', 'arsitektur', 'sipil', 'mesin',\n        'elektro', 'industri', 'teknik', 'seni', 'desain', 'komunikasi',\n        'jurnalistik', 'sosiologi', 'antropologi', 'ilmu politik',\n        'hubungan internasional', 'administrasi', 'keperawatan', 'kebidanan',\n        'gizi', 'kesehatan masyarakat', 'olahraga', 'keolahragaan'\n      ];\n      \n      const employeeMajor = selectedEmployee.major ? selectedEmployee.major.toLowerCase().trim() : '';\n      const isNonIT = nonItMajors.some(nonItMajor => employeeMajor.includes(nonItMajor));\n      \n      if (isNonIT) {\n        // Automatic elimination for Non-IT majors\n        defaultType = 'terminate';\n        defaultDuration = 0;\n      }\n      // Untuk MATCH employees, ikuti dynamic intelligence\n      else if (selectedEmployee.education_job_match === 'Match') {\n        if (category === 'Siap Permanent' || duration === 0) {\n          defaultType = 'permanent';\n          defaultDuration = 0;\n        } else if (category === 'Berpotensi Kontrak 3' || duration >= 18) {\n          defaultType = 'kontrak3';\n          defaultDuration = duration || 18;\n        } else if (category === 'Berpotensi Kontrak 2' || duration >= 6) {\n          defaultType = 'kontrak2';\n          defaultDuration = duration || 12;\n        } else {\n          defaultType = 'kontrak2';\n          defaultDuration = 6;\n        }\n      } \n      // UNMATCH employees - POLICY: Tetap evaluasi kontrak, tidak langsung permanent\n      else if (selectedEmployee.education_job_match === 'Unmatch') {\n        // UNMATCH - determine evaluation contract based on current contract\n        // KONSISTEN dengan getRecommendationStatusBadge di tabel\n        if (selectedEmployee.current_contract_type === 'probation') {\n          defaultType = 'kontrak2';\n          defaultDuration = 6;\n        } else if (selectedEmployee.current_contract_type === '1') {\n          defaultType = 'kontrak2';\n          defaultDuration = 6;\n        } else if (selectedEmployee.current_contract_type === '2') {\n          defaultType = 'kontrak3';\n          defaultDuration = 6;\n        } else if (selectedEmployee.current_contract_type === '3') {\n          // POLICY: Kontrak 3 unmatch tetap evaluasi kontrak 3, tidak langsung permanent\n          // Meskipun dynamic intelligence suggest permanent, kita tetap konservatif\n          // untuk unmatch employees karena tingginya risk resign\n          defaultType = 'kontrak3';\n          defaultDuration = 6;\n        } else {\n          defaultType = 'kontrak2';\n          defaultDuration = 6;\n        }\n      }\n      \n      // Special handling untuk reasoning text - kosong sesuai permintaan user\n      let reasonPrefix = '';\n      \n      setRecommendationData({\n        eid: selectedEmployee.eid,\n        employee_name: selectedEmployee.name,\n        recommendation_type: defaultType,\n        recommended_duration: defaultDuration,\n        reason: ''\n      });\n    }\n  }, [employeeDetail, selectedEmployee]);\n\n  const fetchManagerData = async () => {\n    try {\n      setLoading(true);\n      \n      // Use the simplified API endpoint that works without dynamic intelligence\n      const timestamp = new Date().getTime();\n      const analyticsRes = await axios.get(`/manager_analytics_simple.php?t=${timestamp}`, {\n        withCredentials: true\n      });\n\n      console.log('üî• NEW API Response:', analyticsRes.data);\n      \n      if (analyticsRes.data.success) {\n        const rawData = analyticsRes.data.data;\n        \n        // Transform the data structure to match what the frontend expects\n        const transformedData = {\n          ...rawData,\n          division_stats: {\n            total_employees: rawData.statistics?.total_employees || 0,\n            data_mining_summary: {\n              match_employees: rawData.statistics?.match_employees || 0,\n              recommended_extensions: rawData.statistics?.extension_employees || 0,\n              high_risk_employees: rawData.statistics?.high_risk_employees || 0\n            },\n\n          }\n        };\n        \n        setAnalytics(transformedData);\n        console.log('‚úÖ Analytics data set:', transformedData);\n        \n        // Debug contract end dates\n        console.log('üìÖ Contract End Dates Debug:', rawData.employees?.slice(0, 3).map(emp => ({\n          name: emp.name,\n          contract_type: emp.current_contract_type,\n          contract_end: emp.contract_end,\n          days_to_end: emp.days_to_contract_end\n        })));\n        \n\n        \n        // Use the same analytics data for education analysis\n        if (rawData.employees) {\n          const employees = rawData.employees;\n          const matchDistribution = {\n            'Match': employees.filter(emp => emp.education_job_match === 'Match').length,\n            'Unmatch': employees.filter(emp => emp.education_job_match === 'Unmatch').length\n          };\n          \n          setEducationAnalysis({\n            education_analysis: employees,\n            match_distribution: matchDistribution,\n            contract_progression: employees.filter(emp => \n              emp.contract_status === 'Ready for Review' || \n              emp.tenure_months >= 3\n            ).map(emp => ({\n              name: emp.name,\n              status: emp.contract_status,\n              recommendation: emp.data_mining_recommendation?.reason || 'Standard review'\n            }))\n          });\n          \n          setDivisionIntelligence({\n            performance_predictions: employees.map(emp => ({\n              name: emp.name,\n              success_probability: emp.intelligence_data?.success_probability || 75,\n              risk_level: emp.intelligence_data?.risk_level || 'Low',\n              contract_recommendation: emp.data_mining_recommendation\n            })),\n            urgent_contract_decisions: employees.filter(emp => \n              emp.intelligence_data?.risk_level === 'High' ||\n              emp.contract_status === 'Ready for Review'\n            )\n          });\n        }\n        setLastRefresh(new Date()); // Add this line to track last refresh\n      }\n      \n    } catch (error) {\n      console.error('Error fetching manager data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchProcessedRecommendations = async () => {\n    try {\n      const response = await axios.get('http://localhost/web_srk_BI/backend/api/recommendations.php?action=processed', {\n        withCredentials: true\n      });\n\n      if (response.data.success) {\n        setProcessedRecommendations(response.data.data);\n        console.log('‚úÖ Processed recommendations loaded:', response.data.data);\n        \n        // Debug: Check mapping structure\n        console.log('üîç Processed recommendations mapping debug:', response.data.data.map(rec => ({\n          rec_id: rec.recommendation_id,\n          employee_name: rec.employee?.name,\n          employee_eid: rec.employee?.eid,\n          status: rec.status,\n          duration: rec.recommended_duration\n        })));\n        \n        // Debug: Check for resign status\n        const resignRecs = response.data.data.filter(rec => rec.status === 'resign');\n        if (resignRecs.length > 0) {\n          console.log('üîç Found resign recommendations:', resignRecs);\n        }\n      } else {\n        console.error('Failed to fetch processed recommendations:', response.data.error);\n      }\n    } catch (error) {\n      console.error('Error fetching processed recommendations:', error);\n    }\n  };\n\n  const fetchEmployeeDetail = async (eid) => {\n    setLoadingDetail(true);\n    try {\n      console.log('Fetching employee detail for eid:', eid);\n      const response = await fetch(`http://localhost/web_srk_BI/backend/api/employees.php?action=employee_data_mining_detail&eid=${eid}`, {\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n      \n      console.log('Response status:', response.status);\n      console.log('Response OK:', response.ok);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      const responseText = await response.text();\n      console.log('Raw response text (first 200 chars):', responseText.substring(0, 200));\n      \n      let result;\n      try {\n        result = JSON.parse(responseText);\n      } catch (jsonError) {\n        console.error('JSON Parse Error:', jsonError);\n        console.log('Full response text:', responseText);\n        throw new Error('Server returned invalid JSON. Check browser console for details.');\n      }\n      \n      console.log('Employee detail API Response:', result);\n      \n      if (result.success) {\n        setEmployeeDetail(result.data);\n        console.log('Employee detail loaded successfully');\n        return result.data; // Return the data for await\n      } else {\n        console.error('API Error:', result.error);\n        setEmployeeDetail(null);\n        throw new Error(result.error || 'Failed to load employee data');\n      }\n    } catch (error) {\n      console.error('Network/Parse error:', error);\n      setEmployeeDetail(null);\n      throw error; // Re-throw for handleEmployeeClick to catch\n    } finally {\n      setLoadingDetail(false);\n    }\n  };\n\n  const handleEmployeeClick = async (employee) => {\n    console.log('üîç handleEmployeeClick called for:', employee.name, 'EID:', employee.eid);\n    setSelectedEmployee(employee);\n    setLoadingDetail(true);\n    \n    // Always show the modal first (will show loading state)\n    setShowEmployeeModal(true);\n    \n    // Fetch fresh employee detail data\n    try {\n      console.log('‚è≥ Fetching employee detail...');\n      const employeeData = await fetchEmployeeDetail(employee.eid);\n      console.log('‚úÖ Employee data loaded, setting state');\n      console.log('   - Employee Contract Type:', employeeData?.employee?.current_contract_type);\n      console.log('   - Dynamic Intelligence:', employeeData?.dynamic_intelligence);\n      console.log('   - Match Category:', employeeData?.dynamic_intelligence?.match_category);\n      console.log('   - Optimal Duration:', employeeData?.dynamic_intelligence?.optimal_duration);\n      \n      // Set the employee detail state\n      setEmployeeDetail(employeeData);\n      setLoadingDetail(false);\n    } catch (error) {\n      console.error('‚ùå Failed to fetch employee detail:', error);\n      setLoadingDetail(false);\n      // Don't close modal, show error in modal instead\n      setEmployeeDetail({\n        error: true,\n        errorMessage: error.message,\n        employee: {\n          name: employee.name,\n          eid: employee.eid,\n          current_contract_type: employee.current_contract_type\n        }\n      });\n    }\n    \n    // Initialize recommendation data based on employee status - will be updated with dynamic intelligence later\n    const defaultType = employee.education_job_match === 'Unmatch' ? 'kontrak2' : 'kontrak2';\n    setRecommendationData({\n      eid: employee.eid,\n      employee_name: employee.name,\n      recommendation_type: defaultType,\n      recommended_duration: 6,\n      reason: 'Rekomendasi akan diupdate berdasarkan dynamic intelligence analysis...'\n    });\n  };\n\n  const handleCreateRecommendation = async (employee) => {\n    console.log('üîß handleCreateRecommendation called for:', employee.name, 'Contract:', employee.current_contract_type);\n    \n    // Call the same function as handleEmployeeClick to open detail modal with form\n    await handleEmployeeClick(employee);\n  };\n\n  const submitRecommendation = async () => {\n    try {\n      // Enhanced validation with fallback\n      const employeeEid = employeeDetail?.employee?.eid || selectedEmployee?.eid;\n      const employeeName = employeeDetail?.employee?.name || selectedEmployee?.name;\n      \n      if (!employeeEid) {\n        showAlert('Data karyawan tidak lengkap. Silakan muat ulang halaman.', 'danger');\n        console.error('Employee EID not found. Employee detail:', employeeDetail, 'Selected employee:', selectedEmployee);\n        return;\n      }\n\n      if (!recommendationData.recommendation_type) {\n        showAlert('Pilih jenis rekomendasi terlebih dahulu', 'warning');\n        return;\n      }\n\n      // Validasi reason dihapus - reason boleh kosong sesuai permintaan user\n\n      // Validate duration for contracts that require it\n      if (['kontrak2', 'kontrak3'].includes(recommendationData.recommendation_type) && \n          (!recommendationData.recommended_duration || recommendationData.recommended_duration === '0')) {\n        showAlert('Durasi kontrak harus diisi untuk jenis kontrak yang dipilih', 'warning');\n        return;\n      }\n\n      // Show loading state\n      showAlert('Sedang mengirim rekomendasi...', 'info');\n\n      const formData = new FormData();\n      formData.append('action', 'create');\n      formData.append('eid', employeeEid);\n      formData.append('recommendation_type', recommendationData.recommendation_type);\n      formData.append('recommended_duration', recommendationData.recommended_duration || '0');\n      formData.append('contract_start_date', recommendationData.contract_start_date || '');\n      formData.append('reason', recommendationData.reason || '');\n      \n      // Enhanced system recommendation with dynamic intelligence\n      const systemRec = employeeDetail?.dynamic_intelligence ? \n        `Rekomendasi sistem: ${employeeDetail.dynamic_intelligence.match_category || 'Analysis'} (${employeeDetail.dynamic_intelligence.optimal_duration || 'N/A'} bulan), Confidence: ${employeeDetail.dynamic_intelligence.confidence_level || 'Medium'}, Sample Size: ${employeeDetail.dynamic_intelligence.sample_size || 0}` :\n        `Rekomendasi sistem: ${recommendationData.recommendation_type} kontrak ${recommendationData.recommended_duration || 'N/A'} bulan berdasarkan analisis data mining`;\n      \n      formData.append('system_recommendation', systemRec);\n\n      console.log('=== SENDING RECOMMENDATION ===');\n      console.log('Employee EID:', employeeEid);\n      console.log('Employee Name:', employeeName);\n      console.log('Recommendation Type:', recommendationData.recommendation_type);\n      console.log('Recommended Duration:', recommendationData.recommended_duration);\n      console.log('Reason:', recommendationData.reason);\n      console.log('FormData contents:');\n      for (let [key, value] of formData.entries()) {\n        console.log(`  ${key}: ${value}`);\n      }\n      console.log('Employee detail structure:', employeeDetail);\n      console.log('Selected employee:', selectedEmployee);\n\n      const response = await axios.post('http://localhost/web_srk_BI/backend/api/recommendations.php', formData, {\n        withCredentials: true,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        timeout: 30000 // 30 second timeout\n      });\n\n      console.log('=== RESPONSE RECEIVED ===');\n      console.log('Response status:', response.status);\n      console.log('Response data:', response.data);\n\n      if (response.data.success) {\n        showAlert('Rekomendasi berhasil dibuat dan dikirim ke HR', 'success');\n        handleCloseModal();\n        // Reset form\n        setRecommendationData({\n          recommendation_type: '',\n          recommended_duration: '',\n          contract_start_date: '',\n          reason: ''\n        });\n        // Refresh data after creating recommendation\n        fetchManagerData();\n        fetchProcessedRecommendations();\n      } else {\n        console.error('Server error response:', response.data);\n        showAlert(response.data.error || 'Gagal membuat rekomendasi', 'danger');\n      }\n    } catch (error) {\n      console.error('Error creating recommendation:', error);\n      \n      // Enhanced error handling\n      if (error.response) {\n        // Server responded with error status\n        console.error('Server error response:', error.response.data);\n        console.error('Server error status:', error.response.status);\n        const errorMsg = error.response.data?.error || error.response.data?.message || 'Server error';\n        showAlert(`Gagal membuat rekomendasi: ${errorMsg}`, 'danger');\n      } else if (error.request) {\n        // Request was made but no response received\n        console.error('Network error - no response received:', error.request);\n        showAlert('Tidak dapat terhubung ke server. Periksa koneksi internet Anda.', 'danger');\n      } else {\n        // Something happened in setting up the request\n        console.error('Request setup error:', error.message);\n        showAlert('Terjadi kesalahan saat mengirim rekomendasi. Silakan coba lagi.', 'danger');\n      }\n    }\n  };\n\n  const showAlert = (message, type) => {\n    setAlert({ show: true, message, type });\n    setTimeout(() => setAlert({ show: false, message: '', type: '' }), 5000);\n  };\n\n  const getMatchDistributionChart = () => {\n    if (!educationAnalysis?.match_distribution) {\n      return {\n        labels: ['Match', 'Unmatch'],\n        datasets: [{\n          label: 'Distribusi Kecocokan',\n          data: [0, 0],\n          backgroundColor: ['#28a745', '#dc3545'],\n          borderWidth: 1\n        }]\n      };\n    }\n\n    const data = educationAnalysis.match_distribution;\n    return {\n      labels: ['Match', 'Unmatch'],\n      datasets: [{\n        label: 'Distribusi Kecocokan',\n        data: [data.Match || 0, data.Unmatch || 0],\n        backgroundColor: ['#28a745', '#dc3545'],\n        borderWidth: 1\n      }]\n    };\n  };\n\n\n\n  const getRiskLevelChart = () => {\n    if (!analytics?.employees || analytics.employees.length === 0) {\n      return {\n        labels: ['Low Risk', 'Medium Risk', 'High Risk'],\n        datasets: [{\n          label: 'Distribusi Risk Level',\n          data: [0, 0, 0],\n          backgroundColor: ['#28a745', '#ffc107', '#dc3545'],\n          borderWidth: 1\n        }]\n      };\n    }\n\n    const employees = analytics.employees;\n    const lowRisk = employees.filter(emp => emp.intelligence_data?.risk_level === 'Low').length;\n    const mediumRisk = employees.filter(emp => emp.intelligence_data?.risk_level === 'Medium').length;\n    const highRisk = employees.filter(emp => emp.intelligence_data?.risk_level === 'High').length;\n    \n    console.log('üîç Risk Level Debug:', { \n      totalEmployees: employees.length,\n      lowRisk, \n      mediumRisk, \n      highRisk,\n      sampleData: employees.slice(0, 3).map(emp => ({\n        name: emp.name,\n        risk_level: emp.intelligence_data?.risk_level\n      }))\n    });\n\n    return {\n      labels: ['Low Risk', 'Medium Risk', 'High Risk'],\n      datasets: [{\n        label: 'Distribusi Risk Level',\n        data: [lowRisk, mediumRisk, highRisk],\n        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],\n        borderWidth: 1\n      }]\n    };\n  };\n\n  const getContractRecommendationChart = () => {\n    if (!analytics?.employees || analytics.employees.length === 0) {\n      return {\n        labels: ['6 bulan', '12 bulan', '18 bulan', '24 bulan', '36 bulan'],\n        datasets: [{\n          label: 'Jumlah Rekomendasi',\n          data: [0, 0, 0, 0, 0],\n          backgroundColor: 'rgba(0, 123, 255, 0.8)',\n          borderColor: '#007bff',\n          borderWidth: 2\n        }]\n      };\n    }\n\n    const employees = analytics.employees;\n    const duration6 = employees.filter(emp => emp.intelligence_data?.recommended_duration === 6).length;\n    const duration12 = employees.filter(emp => emp.intelligence_data?.recommended_duration === 12).length;\n    const duration18 = employees.filter(emp => emp.intelligence_data?.recommended_duration === 18).length;\n    const duration24 = employees.filter(emp => emp.intelligence_data?.recommended_duration === 24).length;\n    const duration36 = employees.filter(emp => emp.intelligence_data?.recommended_duration === 36).length;\n\n    return {\n      labels: ['6 bulan', '12 bulan', '18 bulan', '24 bulan', '36 bulan'],\n      datasets: [{\n        label: 'Jumlah Rekomendasi',\n        data: [duration6, duration12, duration18, duration24, duration36],\n        backgroundColor: 'rgba(0, 123, 255, 0.8)',\n        borderColor: '#007bff',\n        borderWidth: 2\n      }]\n    };\n  };\n\n  // Fungsi untuk mendapatkan rekomendasi kontrak berdasarkan data mining\n  const getDataMiningRecommendation = (employee) => {\n    // Gunakan data mining recommendation dari backend\n    if (employee.data_mining_recommendation) {\n      return {\n        type: 'data_mining',\n        duration: `${employee.data_mining_recommendation.recommended_duration} bulan`,\n        risk_level: employee.data_mining_recommendation.risk_level,\n        confidence: employee.data_mining_recommendation.confidence_level,\n        reasoning: employee.data_mining_recommendation.reasoning || []\n      };\n    }\n\n    // Fallback untuk backward compatibility\n    const matchStatus = employee.education_job_match || 'Unmatch';\n    const tenure = employee.tenure_months || 0;\n    const currentContract = employee.current_contract_type;\n\n    if (currentContract === 'probation' && tenure >= 3) {\n      if (matchStatus === 'Match') {\n        return {\n          type: 'permanent',\n          reason: 'Good education-job match',\n          duration: 'Permanent',\n          confidence: 'High'\n        };\n      } else {\n        return {\n          type: 'review',\n          reason: 'No education-job match, need performance evaluation',\n          duration: 'Review diperlukan',\n          confidence: 'Low'\n        };\n      }\n    }\n\n    if (tenure >= 12 && currentContract !== 'permanent') {\n      return {\n        type: 'extension',\n        reason: 'Long tenure with good performance',\n        duration: 'Extension recommended',\n        confidence: 'High'\n      };\n    }\n\n    return {\n      type: 'monitor',\n      reason: 'Continue monitoring',\n      duration: 'Monitoring berkelanjutan',\n      confidence: 'Medium'\n    };\n  };\n\n  // Function to calculate match status locally (same logic as detail modal)\n  const calculateMatchStatusLocal = (employee) => {\n    const major = (employee.major || '').toUpperCase();\n    const role = (employee.role || '').toUpperCase();\n    const designation = (employee.designation || '').toUpperCase();\n    \n    // IT Education Keywords (Updated to match backend)\n    const itEducationKeywords = [\n      'INFORMATION TECHNOLOGY', 'TEKNIK INFORMATIKA', 'ILMU KOMPUTER', 'SISTEM INFORMASI',\n      'COMPUTER SCIENCE', 'SOFTWARE ENGINEERING', 'INFORMATIKA', 'TEKNIK KOMPUTER',\n      'KOMPUTER', 'TEKNOLOGI INFORMASI', 'INFORMATION SYSTEM', 'INFORMATICS ENGINEERING',\n      'INFORMATIC ENGINEERING', 'COMPUTER ENGINEERING', 'INFORMATION MANAGEMENT',\n      'INFORMATICS MANAGEMENT', 'MANAGEMENT INFORMATIKA', 'SISTEM KOMPUTER',\n      'KOMPUTERISASI AKUNTANASI', 'COMPUTERIZED ACCOUNTING', 'COMPUTATIONAL SCIENCE',\n      'INFORMATICS', 'INFORMATICS TECHNOLOGY', 'COMPUTER AND INFORMATICS ENGINEERING',\n      'ENGINEERING INFORMATIC', 'INDUSTRIAL ENGINEERING_INFORMATIC',\n      // New IT Education Majors from CSV Analysis\n      'STATISTICS', 'TECHNOLOGY MANAGEMENT', 'ELECTRICAL ENGINEERING', 'ELECTRONICS ENGINEERING',\n      'MASTER IN INFORMATICS', 'ICT', 'COMPUTER SCIENCE & ELECTRONICS', 'COMPUTER TELECOMMUNICATION',\n      'TELECOMMUNICATION ENGINEERING', 'TELECOMMUNICATIONS ENGINEERING', 'TELECOMMUNICATION & MEDIA',\n      'TEKNIK ELEKTRO', 'COMPUTER SCINCE', 'COMPUTER SCIENCES & ENGINEERING', 'COMPUTER SYSTEM',\n      'COMPUTER SIENCE', 'COMPUTER TECHNOLOGY', 'COMPUTER SCINCE', 'INFORMASTION SYSTEM',\n      'INFORMATICS TECHNIQUE', 'INFORMATIOCS', 'INFORMATICS TECHNOLOGY', 'TEKNIK KOMPUTER & JARINGAN',\n      'INFORMATION ENGINEERING', 'SOFTWARE ENGINEERING TECHNOLOGY', 'DIGITAL MEDIA TECHNOLOGY',\n      'INFORMATIC ENGINEETING', 'INFORMATION SYTEM', 'INFORMASTION SYSTEM', 'MATERIALS ENGINEERING',\n      'NETWORK MANAGEMENT', 'INFORMATICS SYSTEM', 'BUSINESS INFORMATION SYSTEM', 'PHYSICS ENGINEERING',\n      'MANAGEMENT INFORMATION SYSTEM', 'TELECOMUNICATION ENGINEERING'\n    ];\n    \n    // IT Job Keywords (Updated to match backend)\n    const itJobKeywords = [\n      'DEVELOPER', 'PROGRAMMER', 'SOFTWARE', 'TECHNICAL', 'FRONTEND', 'BACKEND', \n      'FULLSTACK', 'FULL STACK', 'JAVA', 'NET', '.NET', 'API', 'ETL', 'MOBILE',\n      'ANDROID', 'WEB', 'UI/UX', 'FRONT END', 'BACK END', 'PEGA', 'RPA',\n      'ANALYST', 'BUSINESS ANALYST', 'SYSTEM ANALYST', 'DATA ANALYST', 'DATA SCIENTIST',\n      'QUALITY ASSURANCE', 'QA', 'TESTER', 'TEST ENGINEER', 'CONSULTANT',\n      'IT CONSULTANT', 'TECHNOLOGY CONSULTANT', 'TECHNICAL CONSULTANT',\n      'PRODUCT OWNER', 'SCRUM MASTER', 'PMO', 'IT OPERATION', 'DEVOPS',\n      'SYSTEM ADMINISTRATOR', 'DATABASE ADMINISTRATOR', 'NETWORK',\n      'IT QUALITY ASSURANCE', 'TESTING ENGINEER', 'TESTER SUPPORT', 'JR TESTER',\n      'IT TESTER', 'TESTING SPECIALIST', 'TESTING COORDINATOR', 'QUALITY TESTER',\n      'JR QUALITY ASSURANCE', 'QUALITY ASSURANCE TESTER', 'TESTING ENGINEER SPECIALIST',\n      'APPRENTICE TESTER', 'JR TESTER LEVEL 1', 'LEAD QA', 'LEAD BACKEND DEVELOPER',\n      // New IT Roles from CSV Analysis\n      'PROJECT MANAGER', 'IT PROJECT MANAGER', 'TECHNICAL PROJECT MANAGER', 'ASSISTANT PROJECT MANAGER',\n      'BI DEVELOPER', 'BI COGNOS DEVELOPER', 'POWER BI DEVELOPER', 'SR. BI DEVELOPER',\n      'DATA MODELER', 'DATABASE REPORT ENGINEER', 'REPORT DESIGNER',\n      'MIDDLEWARE DEVELOPER', 'DATASTAGE DEVELOPER', 'ETL DATASTAGE DEVELOPER', 'IBM DATASTAGE',\n      'ODOO DEVELOPER', 'SR. ODOO DEVELOPER', 'TALEND CONSULTANT', 'MFT CONSULTANT',\n      'CYBER SECURITY OPERATION', 'IT SECURITY OPERATIONS', 'SECURITY ENGINEER', 'SENIOR SECURITY ENGINEER',\n      'CYBER SECURITY POLICY', 'IT INFRA & SECURITY OFFICER', 'INFRASTRUCTURE',\n      'LEAD BACKEND DEVELOPER', 'LEAD FRONTEND DEVELOPER', 'SR. TECHNOLOGY CONSULTANT',\n      'GRADUATE DEVELOPMENT PROGRAM', 'JUNIOR CONSULTANT', 'JR. CONSULTANT', 'JR CONSULTANT',\n      'TECHNICAL LEAD', 'TECH LEAD', 'SOLUTION ANALYST', 'DATA ENGINEER',\n      'IT SUPPORT', 'SYSTEM SUPPORT', 'PRODUCTION SUPPORT', 'HELPDESK',\n      'TECHNOLOGY CONSULTANT', 'SR. ETL DEVELOPER', 'JR. ETL CONSULTANT',\n      'TECHNICAL RESEARCH & DEVELOPMENT CONSULTANT', 'PRESALES', 'IT TRAINER',\n      'TECHNICAL TRAINER', 'ASSISTANT TRAINER', 'JAVA TRAINER',\n      'MOBILE DEVELOPER', 'ANDROID DEVELOPER', 'IOS DEVELOPER', 'FRONT END MOBILE DEVELOPER',\n      'WEB FRONT END DEVELOPER', 'FRONETEND DEVELOPER', 'FRONT END DEVELOPER',\n      'SR .NET DEVELOPER', 'JR .NET DEVELOPER', '.NET DEVELOPER', 'SR. .NET DEVELOPER',\n      'FULL STACK DEVELOPER', 'FULLSTACK DEVELOPER', 'UI/UX DEVELOPER',\n      'RPA DEVELOPER', 'RPA TRAINEE', 'PEGA DEVELOPER', 'SR. PEGA DEVELOPER',\n      // Additional keywords to match backend logic\n      'ADMIN', 'ADMINISTRATOR', 'USER', 'END', 'HELP', 'DESK', 'SUPPORT', 'SERVICE'\n    ];\n    \n    // Check IT Education\n    const isItEducation = itEducationKeywords.some(keyword => major.includes(keyword));\n    \n    // Check IT Job (check both role and designation)\n    const isItJob = itJobKeywords.some(keyword => \n      role.includes(keyword) || designation.includes(keyword)\n    );\n    \n    return (isItEducation && isItJob) ? 'Match' : 'Unmatch';\n  };\n\n  const getMatchLevelBadge = (employee) => {\n    // Use local calculation instead of backend data to ensure consistency\n    const matchStatus = calculateMatchStatusLocal(employee);\n    if (matchStatus === 'Match') return <Badge bg=\"success\">Match</Badge>;\n    return <Badge bg=\"danger\">Unmatch</Badge>;\n  };\n\n  const getRiskLevelBadge = (riskLevel) => {\n    if (riskLevel === 'Low') return <Badge bg=\"success\">Risiko Rendah</Badge>;\n    if (riskLevel === 'Medium') return <Badge bg=\"warning\">Risiko Sedang</Badge>;\n    return <Badge bg=\"danger\">Risiko Tinggi</Badge>;\n  };\n\n  const getContractStatusBadge = (employee) => {\n    const contractType = employee.current_contract_type;\n    const contractEnd = employee.contract_end;\n    const daysToEnd = employee.days_to_contract_end;\n    \n    const badges = {\n      'probation': { variant: 'warning', text: 'Probation' },\n      '1': { variant: 'info', text: 'Kontrak 1' },\n      '2': { variant: 'primary', text: 'Kontrak 2' },\n      '3': { variant: 'secondary', text: 'Kontrak 3' },\n      'permanent': { variant: 'success', text: 'Permanent' },\n      null: { variant: 'light', text: 'N/A' }\n    };\n\n    const badge = badges[contractType] || badges[null];\n    \n    // Format tanggal berakhir kontrak\n    let endDateText = '';\n    if (contractEnd && contractType !== 'permanent') {\n      const endDate = new Date(contractEnd);\n      endDateText = ` (berakhir: ${endDate.toLocaleDateString('id-ID')})`;\n      \n      // Tambahkan peringatan jika kontrak akan berakhir dalam 30 hari\n      if (daysToEnd <= 30 && daysToEnd > 0) {\n        endDateText += ` - ${daysToEnd} hari lagi`;\n      }\n    }\n    \n    if (contractType === 'probation' && daysToEnd >= 90) {\n      return (\n        <div>\n          <Badge bg=\"warning\" className=\"border border-danger\">\n            Probation (Ready for Review)\n          </Badge>\n          {endDateText && <small className=\"text-muted d-block mt-1\">{endDateText}</small>}\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <Badge bg={badge.variant}>{badge.text}</Badge>\n        {endDateText && <small className=\"text-muted d-block mt-1\">{endDateText}</small>}\n      </div>\n    );\n  };\n\n  // Function to get consistent duration recommendation for both sections\n  const getConsistentDurationRecommendation = (employee) => {\n    if (!employee) return '6 bulan';\n    \n    const duration = employee?.intelligence_data?.recommended_duration;\n    const category = employee?.intelligence_data?.match_category;\n    \n    // Check for Non-IT elimination first\n    const nonItMajors = [\n      'kedokteran', 'farmasi', 'hukum', 'akuntansi', 'manajemen', 'ekonomi',\n      'psikologi', 'bahasa', 'sastra', 'pendidikan', 'sejarah', 'geografi',\n      'biologi', 'kimia', 'fisika', 'matematika', 'pertanian', 'kehutanan',\n      'perikanan', 'kedokteran hewan', 'arsitektur', 'sipil', 'mesin',\n      'elektro', 'industri', 'teknik', 'seni', 'desain', 'komunikasi',\n      'jurnalistik', 'sosiologi', 'antropologi', 'ilmu politik',\n      'hubungan internasional', 'administrasi', 'keperawatan', 'kebidanan',\n      'gizi', 'kesehatan masyarakat', 'olahraga', 'keolahragaan'\n    ];\n    \n    const employeeMajor = employee.major ? employee.major.toLowerCase().trim() : '';\n    const isNonIT = nonItMajors.some(nonItMajor => employeeMajor.includes(nonItMajor));\n    \n    if (isNonIT || category === 'Tidak Direkomendasikan') {\n      return 'Tidak Direkomendasikan';\n    } else if (category === 'Sudah Permanent') {\n      return 'Sudah Permanent';\n    }\n    // UNMATCH employees - evaluation contract\n    else if (employee.education_job_match === 'Unmatch') {\n      if (employee.current_contract_type === '3') {\n        return 'Kontrak 3 (Evaluasi)';\n      } else if (employee.current_contract_type === '2') {\n        return 'Kontrak 3 (Evaluasi)';\n      } else {\n        return 'Kontrak 2 (Evaluasi)';\n      }\n    }\n    // MATCH employees - follow dynamic intelligence\n    else if (employee.education_job_match === 'Match') {\n      if (employee.current_contract_type === '3' && \n          (category === 'Siap Permanent' || duration === 0)) {\n        return 'Permanent';\n      } else if (duration === 0 && category !== 'Tidak Direkomendasikan') {\n        return 'Permanent';\n      } else if (duration && duration > 0) {\n        return `${duration} bulan`;\n      } else {\n        return '6 bulan'; // Default evaluation duration - matching the image\n      }\n    } else {\n      return '6 bulan'; // Default fallback duration - matching the image\n    }\n  };\n\n  // Function to calculate consistent statistics for both Data Intelligence & Dynamic Intelligence sections\n  const getConsistentStatistics = (employee, employeeDetail) => {\n    // Use actual historical patterns data from backend dynamic_intelligence.php\n    const dynamicIntelligence = employeeDetail?.dynamic_intelligence;\n    const historicalPatterns = dynamicIntelligence?.historical_patterns;\n    \n\n    \n          if (historicalPatterns && historicalPatterns.sample_size > 0) {\n        // Use EXACT data from backend calculations\n        const masihAktif = parseFloat(historicalPatterns.success_rate) || 0;\n        const sudahResign = parseFloat(historicalPatterns.resign_rate) || 0;\n        const earlyResignRate = parseFloat(historicalPatterns.early_resign_rate) || 0;\n        const avgTenure = parseFloat(historicalPatterns.avg_duration) || 0;\n        const sampleSize = parseInt(historicalPatterns.sample_size) || parseInt(historicalPatterns.total_similar) || 0;\n        \n        // Get Early Resign Risk from resign analysis data\n        const resignAnalysis = dynamicIntelligence?.resign_analysis;\n        let earlyResignRisk = 0;\n        \n        // Priority 1: Use optimal duration recommendation resign rate (but only if it's reasonable)\n        if (resignAnalysis?.optimal_duration_recommendation?.early_resign_rate) {\n          const optimalRisk = parseFloat(resignAnalysis.optimal_duration_recommendation.early_resign_rate);\n          // Only use if it's not the unreliable 100% default\n          if (optimalRisk < 90) {\n            earlyResignRisk = optimalRisk;\n          }\n        } \n        \n        // Priority 2: Use current contract analysis\n        if (earlyResignRisk === 0 && resignAnalysis?.current_contract_analysis?.early_resign_rate) {\n          earlyResignRisk = parseFloat(resignAnalysis.current_contract_analysis.early_resign_rate);\n        }\n        \n        // Priority 3: Use data insights early resign analysis\n        if (earlyResignRisk === 0 && historicalPatterns.data_insights?.early_resign_analysis?.rate) {\n          earlyResignRisk = parseFloat(historicalPatterns.data_insights.early_resign_analysis.rate);\n        }\n        \n        // Priority 4: Use actual early resign rate from historical patterns\n        if (earlyResignRisk === 0 && earlyResignRate > 0) {\n          earlyResignRisk = earlyResignRate;\n        }\n        \n        // Fallback: Use reasonable estimate based on profile success rate\n        if (earlyResignRisk === 0) {\n          // Lower success rate = higher early resign risk\n          earlyResignRisk = Math.max(5, Math.min(25, (100 - masihAktif) * 0.3));\n        }\n        \n\n        \n        return {\n          masihAktif: Math.round(masihAktif * 10) / 10,\n          sudahResign: Math.round(sudahResign * 10) / 10,\n          earlyResignRate: Math.round(earlyResignRate * 10) / 10,\n          earlyResignRisk: Math.round(earlyResignRisk * 10) / 10,\n          avgTenure: Math.round(avgTenure * 10) / 10,\n          sampleSize: sampleSize\n        };\n      }\n    \n    // Fallback when no historical patterns data available\n    if (!employee) {\n\n      return {\n        masihAktif: 70,\n        sudahResign: 30,\n        earlyResignRate: 25,\n        earlyResignRisk: 33.8,\n        avgTenure: 17.6,\n        sampleSize: 15\n      };\n    }\n\n    // Fallback calculation based on employee characteristics\n    const educationScore = employee.intelligence_data?.education_score || 0;\n    const tenure = employee.tenure_months || 0;\n    const contractType = employee.current_contract_type;\n    const sampleSize = employee.intelligence_data?.sample_size || 15;\n    \n    let masihAktif = educationScore >= 3 ? 70 : educationScore >= 2 ? 70 : 45;\n    if (contractType === 'permanent') masihAktif = 95;\n    else if (contractType === '2') masihAktif = 70;\n    \n    const sudahResign = 100 - masihAktif;\n    const earlyResignRate = contractType === '2' ? 25 : (contractType === 'permanent' ? 3 : 25);\n    const earlyResignRisk = contractType === '2' ? 33.8 : (contractType === 'permanent' ? 8.2 : 33.8);\n    const avgTenure = contractType === '2' ? 17.6 : (contractType === 'permanent' ? 36.2 : 17.6);\n    \n\n    \n    return {\n      masihAktif: Math.min(95, Math.max(30, masihAktif)),\n      sudahResign: Math.min(70, Math.max(5, sudahResign)),\n      earlyResignRate: Math.min(50, Math.max(3, earlyResignRate)),\n      earlyResignRisk: Math.min(65.0, Math.max(5.0, earlyResignRisk)),\n      avgTenure: Math.max(8.0, avgTenure),\n      sampleSize: sampleSize\n    };\n  };\n\n  // Function to get consistent contract recommendation (same as table)\n  const getConsistentContractRecommendation = (employee) => {\n    if (!employee) return 'Loading...';\n    \n    // Use the same logic as getRecommendationStatusBadge but return text only\n    if (employee.current_contract_type === 'permanent') {\n      return 'Permanent';\n    }\n    \n    // Check for Non-IT major elimination\n    const nonItMajors = [\n      'kedokteran', 'farmasi', 'hukum', 'akuntansi', 'manajemen', 'ekonomi',\n      'psikologi', 'bahasa', 'sastra', 'pendidikan', 'sejarah', 'geografi',\n      'biologi', 'kimia', 'fisika', 'matematika', 'pertanian', 'kehutanan',\n      'perikanan', 'kedokteran hewan', 'arsitektur', 'sipil', 'mesin',\n      'elektro', 'industri', 'teknik', 'seni', 'desain', 'komunikasi',\n      'jurnalistik', 'sosiologi', 'antropologi', 'ilmu politik',\n      'hubungan internasional', 'administrasi', 'keperawatan', 'kebidanan',\n      'gizi', 'kesehatan masyarakat', 'olahraga', 'keolahragaan'\n    ];\n    \n    const employeeMajor = employee.major ? employee.major.toLowerCase().trim() : '';\n    const isNonIT = nonItMajors.some(nonItMajor => employeeMajor.includes(nonItMajor));\n    \n    if (isNonIT) {\n      return 'Tidak Direkomendasikan';\n    }\n    \n    // If contract still has long time (>30 days), show waiting status\n    if (employee.days_to_contract_end > 30) {\n      return 'Kontrak Masih Berlaku';\n    }\n    \n    // If has pending recommendation\n    if (employee.has_pending_recommendation) {\n      return 'Menunggu Persetujuan HR';\n    }\n    \n    // For Unmatch employees (education score < 2) - evaluation contract\n    const educationScore = employee.intelligence_data?.education_score || 0;\n    if (educationScore < 2) {\n      // Determine evaluation contract type based on current contract\n      let contractType = '';\n      switch (employee.current_contract_type) {\n        case 'probation':\n          contractType = 'Kontrak 2 (Evaluasi)';\n          break;\n        case '1':\n          contractType = 'Kontrak 2 (Evaluasi)';\n          break;\n        case '2':\n          contractType = 'Kontrak 3 (Evaluasi)';\n          break;\n        case '3':\n          contractType = 'Kontrak 3 (Evaluasi)';\n          break;\n        default:\n          contractType = 'Probation (Evaluasi)';\n          break;\n      }\n      return contractType;\n    }\n    \n    // For Match employees - show contract recommendation based on progression\n    const duration = employee.intelligence_data?.recommended_duration;\n    \n    // For Contract 3, duration 0 means Permanent\n    if ((employee.current_contract_type === '3' || employee.current_contract_type === 'kontrak3') && duration === 0) {\n      return 'Permanent';\n    }\n              // For probation employees - progression logic\n     else if (employee.current_contract_type === 'probation') {\n       // From probation, next contract should be Kontrak 2 (12 months) or Kontrak 3 based on evaluation\n       const educationScore = employee.intelligence_data?.education_score || 0;\n       if (educationScore >= 2) {\n         return 'Kontrak 2'; // Good match - standard 12 month contract\n       } else {\n         return 'Kontrak 3 (Evaluasi)'; // Poor match - evaluation contract\n       }\n     } else if (employee.current_contract_type === '1' || employee.current_contract_type === '2') {\n       const recommendedType = employee.intelligence_data?.match_category || 'Kontrak 3';\n       return recommendedType;\n     } else if (employee.current_contract_type === '3') {\n       return 'Permanent';\n     }\n    \n    // Default fallback\n    return employee.intelligence_data?.match_category || 'Kontrak 2';\n  };\n\n  // Function to get recommended contract type based on dynamic intelligence\n  const getRecommendedContractType = (employeeDetail) => {\n    const employee = employeeDetail.employee;\n    const dynamicIntelligence = employeeDetail.dynamic_intelligence;\n    \n    // If we have dynamic intelligence data\n    if (dynamicIntelligence && dynamicIntelligence.optimal_duration !== undefined) {\n      const duration = dynamicIntelligence.optimal_duration;\n      const matchCategory = dynamicIntelligence.match_category;\n      \n      // If employee is not recommended\n      if (matchCategory === 'Tidak Direkomendasikan') {\n        return '‚ùå Tidak Direkomendasikan';\n      }\n      \n      // Based on current contract and recommended duration\n      const currentContract = employee.current_contract_type;\n      \n      // If permanent is recommended (duration = 0)\n      if (duration === 0) {\n        return 'Permanent';\n      }\n      \n      // If currently on probation\n      if (currentContract === 'probation') {\n        if (duration <= 6) {\n          return 'Kontrak 1';\n        } else if (duration <= 12) {\n          return 'Kontrak 2';\n        } else {\n          return 'Kontrak 3';\n        }\n      }\n      \n      // If currently on Kontrak 1 or 2\n      if (currentContract === '1' || currentContract === '2') {\n        if (duration === 0) {\n          return 'Permanent';\n        } else {\n          return 'Kontrak 3';\n        }\n      }\n      \n      // If currently on Kontrak 3\n      if (currentContract === '3') {\n        return 'Permanent';\n      }\n      \n      // Default based on duration\n      if (duration <= 6) {\n        return 'Kontrak 1';\n      } else if (duration <= 12) {\n        return 'Kontrak 2';\n      } else if (duration <= 24) {\n        return 'Kontrak 3';\n      } else {\n        return 'Permanent';\n      }\n    }\n    \n    // Fallback - use match category to determine recommendation\n    const matchStatus = employee.education_job_match || 'Unmatch';\n    const currentContract = employee.current_contract_type;\n    \n    if (matchStatus === 'Match') {\n      // Good match - recommend progression\n      if (currentContract === 'probation') {\n        return 'Kontrak 2';\n      } else if (currentContract === '1' || currentContract === '2') {\n        return 'Kontrak 3';\n      } else if (currentContract === '3') {\n        return 'Permanent';\n      }\n      return '2Ô∏è‚É£ Kontrak 2';\n    } else {\n      // Poor match - recommend review or short contract\n      return 'üîç Review Diperlukan';\n    }\n  };\n\n  const getRecommendationStatusBadge = (employee) => {\n    if (employee.current_contract_type === 'permanent') {\n      return <Badge bg=\"secondary\">-</Badge>;\n    } \n    \n    // Check for Non-IT major elimination\n    const nonItMajors = [\n      'kedokteran', 'farmasi', 'hukum', 'akuntansi', 'manajemen', 'ekonomi',\n      'psikologi', 'bahasa', 'sastra', 'pendidikan', 'sejarah', 'geografi',\n      'biologi', 'kimia', 'fisika', 'matematika', 'pertanian', 'kehutanan',\n      'perikanan', 'kedokteran hewan', 'arsitektur', 'sipil', 'mesin',\n      'elektro', 'industri', 'teknik', 'seni', 'desain', 'komunikasi',\n      'jurnalistik', 'sosiologi', 'antropologi', 'ilmu politik',\n      'hubungan internasional', 'administrasi', 'keperawatan', 'kebidanan',\n      'gizi', 'kesehatan masyarakat', 'olahraga', 'keolahragaan'\n    ];\n    \n    const employeeMajor = employee.major ? employee.major.toLowerCase().trim() : '';\n    const isNonIT = nonItMajors.some(nonItMajor => employeeMajor.includes(nonItMajor));\n    \n    if (isNonIT) {\n      return <Badge bg=\"danger\">TIDAK DIREKOMENDASIKAN</Badge>;\n    }\n    \n    // PRIORITAS: Tampilkan rekomendasi kontrak ke depannya, bukan status approval\n    \n    // Jika kontrak masih berlaku lama (>30 hari), tampilkan status tunggu\n    if (employee.days_to_contract_end > 30) {\n      return <Badge bg=\"light\" className=\"text-muted\">‚è≥ Kontrak Masih Berlaku</Badge>;\n    }\n    \n    // Jika ada pending recommendation, tampilkan status pending\n    if (employee.has_pending_recommendation) {\n      return <Badge bg=\"warning\">üîÑ Menunggu Persetujuan HR</Badge>;\n    }\n    \n              // Untuk Unmatch employees (education score < 2) - evaluasi kontrak\n    const educationScore = employee.intelligence_data?.education_score || 0;\n    if (educationScore < 2) {\n        // POLICY: Unmatch employees tetap evaluasi kontrak, tidak langsung permanent\n        // meskipun dynamic intelligence mengatakan \"Siap Permanent\"\n        // Ini untuk memitigasi risk tingginya resign rate pada unmatch employees\n        \n        const duration = employee.intelligence_data?.recommended_duration || 6;\n      \n      // Tentukan jenis kontrak evaluasi berdasarkan kontrak saat ini\n      let contractType = '';\n      switch (employee.current_contract_type) {\n        case 'probation':\n          contractType = 'Kontrak 2 (Evaluasi)';\n          break;\n        case '1':\n          contractType = 'Kontrak 2 (Evaluasi)';\n          break;\n        case '2':\n          contractType = 'Kontrak 3 (Evaluasi)';\n          break;\n        case '3':\n          contractType = 'Kontrak 3 (Evaluasi)';\n          break;\n        default:\n          contractType = 'Probation (Evaluasi)';\n          break;\n      }\n      return (\n        <div>\n          <Badge bg=\"warning\">{contractType}</Badge>\n          <small className=\"text-muted d-block mt-1\">Durasi: ({duration} bulan)</small>\n        </div>\n      );\n    } \n    \n    // Untuk Match employees - tampilkan rekomendasi kontrak berdasarkan progression\n    const duration = employee.intelligence_data?.recommended_duration;\n    let durationText = '';\n    \n    if (duration && duration > 0) {\n      durationText = `(${duration} bulan)`;\n    }\n    \n    // Untuk Kontrak 3, duration 0 berarti Permanent\n    if ((employee.current_contract_type === '3' || employee.current_contract_type === 'kontrak3') && duration === 0) {\n      return (\n        <div>\n          <Badge bg=\"success\">PERMANENT</Badge>\n          <small className=\"text-muted d-block mt-1\">Rekomendasi: Kontrak Tetap</small>\n        </div>\n      );\n    }\n    // Determine contract type based on backend recommendation (fixed consistency)\n    else if (employee.current_contract_type === 'probation') {\n      // From probation, progress to Kontrak 2 or Kontrak 3 (Evaluasi) - never Kontrak 1\n      const educationScore = employee.intelligence_data?.education_score || 0;\n      let recommendedType, badgeVariant;\n      \n      if (educationScore >= 2) {\n        recommendedType = 'Kontrak 2'; // Good match - standard 12 month contract\n        badgeVariant = 'info';\n      } else {\n        recommendedType = 'Kontrak 3 (Evaluasi)'; // Poor match - evaluation contract\n        badgeVariant = 'warning';\n      }\n      \n      return (\n        <div>\n          <Badge bg={badgeVariant}>{recommendedType}</Badge>\n          {durationText && <small className=\"text-muted d-block mt-1\">Durasi: {durationText}</small>}\n        </div>\n      );\n    } else if (employee.current_contract_type === '1' || employee.current_contract_type === '2') {\n      // Use backend recommendation for progression contracts\n      const recommendedType = employee.intelligence_data?.match_category || 'Kontrak 3';\n      return (\n        <div>\n          <Badge bg=\"primary\">{recommendedType}</Badge>\n          {durationText && <small className=\"text-muted d-block mt-1\">Durasi: {durationText}</small>}\n        </div>\n      );\n    } else if (employee.current_contract_type === '3') {\n      return (\n        <div>\n          <Badge bg=\"success\">PERMANENT</Badge>\n          <small className=\"text-muted d-block mt-1\">Rekomendasi: Kontrak Tetap</small>\n        </div>\n      );\n    } else {\n      // Use backend recommendation for default cases\n      const recommendedType = employee.data_mining_recommendation?.category || 'Kontrak 1';\n      const badgeVariant = recommendedType.includes('Kontrak 1') ? 'primary' : \n                          recommendedType.includes('Probation') ? 'warning' : 'secondary';\n      return (\n        <div>\n          <Badge bg={badgeVariant}>{recommendedType}</Badge>\n          {durationText && <small className=\"text-muted d-block mt-1\">Durasi: {durationText}</small>}\n        </div>\n      );\n    }\n  };\n\n  const getApprovalStatusBadge = (employee) => {\n    // Debug logging for specific employee\n    if (employee.name === 'Ahmad Hamdi') {\n      console.log('üîç Debug Ahmad Hamdi approval status:');\n      console.log('Employee EID:', employee.eid);\n      console.log('Processed recommendations:', processedRecommendations);\n      console.log('Matching recs:', processedRecommendations.filter(rec => rec.employee?.eid === employee.eid));\n    }\n    \n    // Check if employee has recent processed recommendation\n    const recentProcessedRec = processedRecommendations.find(rec => \n      (rec.employee?.eid === employee.eid)\n    );\n    \n    if (recentProcessedRec) {\n      // Show processed recommendation status with duration info\n      const duration = recentProcessedRec.recommended_duration;\n      let durationText = '';\n      \n      if (duration && duration > 0) {\n        durationText = `(${duration} bulan)`;\n      } else if (recentProcessedRec.recommendation_type === 'permanent') {\n        durationText = '(Permanent)';\n      }\n      \n      switch (recentProcessedRec.status) {\n        case 'approved':\n        case 'extended':\n          return (\n            <div>\n              <Badge bg=\"success\">‚úÖ Disetujui</Badge>\n              {durationText && <small className=\"text-muted d-block mt-1\">{durationText}</small>}\n            </div>\n          );\n        case 'rejected':\n          return (\n            <div>\n              <Badge bg=\"danger\">‚ùå Ditolak</Badge>\n              {durationText && <small className=\"text-muted d-block mt-1\">Durasi yang ditolak: {durationText}</small>}\n            </div>\n          );\n        case 'resign':\n          return (\n            <div>\n              <Badge bg=\"dark\">üëã Resign</Badge>\n              <small className=\"text-muted d-block mt-1\">Karyawan mengundurkan diri</small>\n            </div>\n          );\n        default:\n          return (\n            <div>\n              <Badge bg=\"info\">üîÑ Diproses</Badge>\n              {durationText && <small className=\"text-muted d-block mt-1\">{durationText}</small>}\n            </div>\n          );\n      }\n    }\n    \n    // Jika ada pending recommendation\n    if (employee.has_pending_recommendation) {\n      return <Badge bg=\"warning\">‚è≥ Menunggu HR</Badge>;\n    }\n    \n    // Jika belum ada recommendation\n    return <Badge bg=\"light\" className=\"text-muted\">-</Badge>;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container-fluid mt-4\">\n        <div className=\"text-center\">\n          <div className=\"spinner-border text-primary\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n          <p className=\"mt-2\">Memuat data intelligence...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Container fluid className=\"mt-3\">\n      {alert.show && (\n        <Alert variant={alert.type} dismissible onClose={() => setAlert({ show: false, message: '', type: '' })}>\n          {alert.message}\n        </Alert>\n      )}\n      \n      {/* Header dengan tema biru konsisten */}\n      <div className=\"mb-4 p-4 rounded\" style={{\n        background: 'linear-gradient(135deg, #007bff 0%, #0056b3 100%)',\n        color: 'white'\n      }}>\n        <Row className=\"align-items-center\">\n          <Col>\n            <h2>Manager Dashboard</h2>\n            <p className=\"mb-0\">Manager Divisi {user.division_name}</p>\n            <div className=\"d-flex align-items-center gap-2\">\n              <small>Analisis Kecocokan Pendidikan & Rekomendasi Kontrak</small>\n              {autoRefresh && (\n                <Badge bg=\"warning\" className=\"d-flex align-items-center gap-1\">\n                  <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                  Auto-refresh aktif\n                </Badge>\n              )}\n              {lastRefresh && (\n                <small className=\"text-light opacity-75\">\n                  Terakhir diperbarui: {lastRefresh.toLocaleTimeString('id-ID')}\n                </small>\n              )}\n            </div>\n          </Col>\n          <Col xs=\"auto\">\n            <div className=\"d-flex flex-column align-items-end gap-2\">\n              <div className=\"text-end\">\n                <h3 className=\"mb-0\">{analytics?.division_stats?.total_employees || 0}</h3>\n                <small>Karyawan Aktif</small>\n              </div>\n              <div className=\"d-flex gap-2\">\n                <Button \n                  variant=\"outline-light\" \n                  size=\"sm\" \n                  onClick={handleManualRefresh}\n                >\n                  üîÑ Refresh\n                </Button>\n                <Button \n                  variant={autoRefresh ? \"warning\" : \"outline-light\"} \n                  size=\"sm\" \n                  onClick={toggleAutoRefresh}\n                  title={autoRefresh ? \"Auto-refresh aktif (30 detik)\" : \"Auto-refresh tidak aktif\"}\n                >\n                  {autoRefresh ? \"‚è∏Ô∏è Stop Auto\" : \"‚ñ∂Ô∏è Auto\"}\n                </Button>\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </div>\n\n      {/* Navigation Tabs dengan tema biru */}\n      <Tab.Container activeKey={activeTab} onSelect={setActiveTab}>\n        <Nav variant=\"tabs\" className=\"mb-4\">\n          <Nav.Item>\n            <Nav.Link eventKey=\"overview\" style={{\n              color: activeTab === 'overview' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'overview' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Overview\n            </Nav.Link>\n          </Nav.Item>\n          <Nav.Item>\n            <Nav.Link eventKey=\"education\" style={{\n              color: activeTab === 'education' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'education' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Analisis Pendidikan\n            </Nav.Link>\n          </Nav.Item>\n\n          <Nav.Item>\n            <Nav.Link eventKey=\"employees\" style={{\n              color: activeTab === 'employees' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'employees' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Detail Karyawan\n            </Nav.Link>\n          </Nav.Item>\n          <Nav.Item>\n            <Nav.Link eventKey=\"processed\" style={{\n              color: activeTab === 'processed' ? '#fff' : '#007bff',\n              backgroundColor: activeTab === 'processed' ? '#007bff' : 'transparent',\n              borderColor: '#007bff'\n            }}>\n              Rekomendasi Diproses ({processedRecommendations.length})\n            </Nav.Link>\n          </Nav.Item>\n        </Nav>\n\n        <Tab.Content>\n          {/* Overview Tab */}\n          <Tab.Pane eventKey=\"overview\">\n            <Row className=\"mb-4\">\n              {/* Key Metrics Cards dengan gradient biru */}\n              <Col md={4} className=\"mb-3\">\n                <Card className=\"h-100\" style={{\n                  background: 'linear-gradient(135deg, #28a745 0%, #1e7e34 100%)',\n                  color: 'white'\n                }}>\n                  <Card.Body className=\"text-center\">\n                    <h3>{analytics?.division_stats?.data_mining_summary?.match_employees || 0}</h3>\n                    <small>Match Employees</small>\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={4} className=\"mb-3\">\n                <Card className=\"h-100\" style={{\n                  background: 'linear-gradient(135deg, #ffc107 0%, #e0a800 100%)',\n                  color: 'white'\n                }}>\n                  <Card.Body className=\"text-center\">\n                    <h3>{analytics?.division_stats?.data_mining_summary?.recommended_extensions || 0}</h3>\n                    <small>Rekomendasi Perpanjangan</small>\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={4} className=\"mb-3\">\n                <Card className=\"h-100\" style={{\n                  background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\n                  color: 'white'\n                }}>\n                  <Card.Body className=\"text-center\">\n                    <h3>{analytics?.division_stats?.data_mining_summary?.high_risk_employees || 0}</h3>\n                    <small>High Risk Employees</small>\n                  </Card.Body>\n                </Card>\n              </Col>\n            </Row>\n\n            <Row>\n              <Col md={6} className=\"mb-4\">\n                <Card>\n                  <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                    <h5 className=\"mb-0\">üìä Distribusi Tingkat Risiko</h5>\n                  </Card.Header>\n                  <Card.Body>\n                    <Doughnut data={getRiskLevelChart()} options={{\n                      responsive: true,\n                      plugins: {\n                        legend: { position: 'bottom' }\n                      }\n                    }} />\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={6} className=\"mb-4\">\n                <Card>\n                  <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                    <h5 className=\"mb-0\">üìà Rekomendasi Durasi Kontrak</h5>\n                  </Card.Header>\n                  <Card.Body>\n                    <Bar data={getContractRecommendationChart()} options={{\n                      responsive: true,\n                      plugins: {\n                        legend: { display: false }\n                      },\n                      scales: {\n                        y: { beginAtZero: true }\n                      }\n                    }} />\n                  </Card.Body>\n                </Card>\n              </Col>\n            </Row>\n\n\n          </Tab.Pane>\n\n          {/* Education Analysis Tab */}\n          <Tab.Pane eventKey=\"education\">\n            <Card>\n              <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }}>\n                <h5 className=\"mb-0\">üéì Analisis Kecocokan Pendidikan-Pekerjaan (Data Mining)</h5>\n              </Card.Header>\n              <Card.Body>\n                <Table responsive striped>\n                  <thead style={{ backgroundColor: '#007bff', color: 'white' }}>\n                    <tr>\n                      <th>Nama</th>\n                      <th>Pendidikan</th>\n                      <th>Posisi</th>\n                      <th>Status Match</th>\n                      <th>Rekomendasi Durasi</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {analytics?.employees?.map((emp, index) => (\n                      <tr key={index}>\n                        <td>\n                          <strong>{emp.name}</strong>\n                          <br />\n                          <small className=\"text-muted\">{emp.tenure_months} bulan</small>\n                        </td>\n                        <td>\n                          <div>{emp.major}</div>\n                          <small className=\"text-muted\">{emp.education_level}</small>\n                        </td>\n                        <td>{emp.role}</td>\n                        <td>\n                          <div className=\"d-flex align-items-center\">\n                            {getMatchLevelBadge(emp)}\n                          </div>\n                        </td>\n                        <td>\n                          {/* FIX: Proper recommendation display with Non-IT check */}\n                          {emp.current_contract_type === 'permanent' ? (\n                            <span>-</span>\n                          ) : (() => {\n                            // Check for Non-IT elimination first\n                            const nonItMajors = [\n                              'kedokteran', 'farmasi', 'hukum', 'akuntansi', 'manajemen', 'ekonomi',\n                              'psikologi', 'bahasa', 'sastra', 'pendidikan', 'sejarah', 'geografi',\n                              'biologi', 'kimia', 'fisika', 'matematika', 'pertanian', 'kehutanan',\n                              'perikanan', 'kedokteran hewan', 'arsitektur', 'sipil', 'mesin',\n                              'elektro', 'industri', 'teknik', 'seni', 'desain', 'komunikasi',\n                              'jurnalistik', 'sosiologi', 'antropologi', 'ilmu politik',\n                              'hubungan internasional', 'administrasi', 'keperawatan', 'kebidanan',\n                              'gizi', 'kesehatan masyarakat', 'olahraga', 'keolahragaan'\n                            ];\n                            const employeeMajor = (emp.major || '').toLowerCase().trim();\n                            const isNonIT = nonItMajors.some(nonItMajor => employeeMajor.includes(nonItMajor));\n                            \n                            if (isNonIT) {\n                              return <Badge bg=\"danger\">TIDAK DIREKOMENDASIKAN</Badge>;\n                            } else if (emp.education_job_match === 'Unmatch') {\n                              // Unmatch - show contract type based on current contract\n                              switch (emp.current_contract_type) {\n                                case 'probation':\n                                  return <Badge bg=\"warning\">Kontrak 2 (Evaluasi)</Badge>;\n                                case '1':\n                                  return <Badge bg=\"warning\">Kontrak 2 (Evaluasi)</Badge>;\n                                case '2':\n                                  return <Badge bg=\"warning\">Kontrak 3 (Evaluasi)</Badge>;\n                                case '3':\n                                  return <Badge bg=\"warning\">Kontrak 3 (Evaluasi)</Badge>;\n                                default:\n                                  return <Badge bg=\"warning\">Probation (Evaluasi)</Badge>;\n                              }\n                            } else {\n                              // Match - use intelligent recommendation based on profile and current contract\n                              let recommendedType = 'Kontrak 1';\n                              let badgeVariant = 'primary';\n                              \n                              // Get employee's education score and current contract type\n                              const educationScore = emp.intelligence_data?.education_score || 0;\n                              const currentContract = emp.current_contract_type;\n                              const major = (emp.major || '').toLowerCase();\n                              const role = (emp.role || '').toLowerCase();\n                              \n                              // Check if IT-related major\n                              const isItMajor = major.includes('information') || major.includes('computer') || \n                                              major.includes('informatic') || major.includes('teknik informatika') ||\n                                              major.includes('system') || major.includes('software');\n                              \n                              // Check role level\n                              const isManager = role.includes('manager') || role.includes('head') || role.includes('director');\n                              const isSenior = role.includes('senior') || role.includes('sr.');\n                              const isJunior = role.includes('junior') || role.includes('jr.') || role.includes('trainee');\n                              \n                              // Determine recommendation based on profile and progression\n                              if (currentContract === 'probation') {\n                                if (isManager || (isSenior && isItMajor)) {\n                                  recommendedType = 'Kontrak 3';\n                                  badgeVariant = 'secondary';\n                                } else if (isItMajor && educationScore >= 2) {\n                                  recommendedType = 'Kontrak 2';\n                                  badgeVariant = 'info';\n                                } else {\n                                  recommendedType = 'Kontrak 1';\n                                  badgeVariant = 'primary';\n                                }\n                              } else if (currentContract === '1') {\n                                if (isManager || (isSenior && isItMajor)) {\n                                  recommendedType = 'PERMANENT';\n                                  badgeVariant = 'success';\n                                } else {\n                                  recommendedType = 'Kontrak 2';\n                                  badgeVariant = 'info';\n                                }\n                              } else if (currentContract === '2') {\n                                if (isJunior && !isItMajor) {\n                                  recommendedType = 'Kontrak 3';\n                                  badgeVariant = 'secondary';\n                                } else {\n                                  recommendedType = 'PERMANENT';\n                                  badgeVariant = 'success';\n                                }\n                              } else if (currentContract === '3') {\n                                recommendedType = 'PERMANENT';\n                                badgeVariant = 'success';\n                              }\n                              \n                              return <Badge bg={badgeVariant}>{recommendedType}</Badge>;\n                            }\n                          })()}\n                        </td>\n                      </tr>\n                    )) || []}\n                  </tbody>\n                </Table>\n              </Card.Body>\n            </Card>\n          </Tab.Pane>\n\n\n\n          {/* Employee Details Tab */}\n          <Tab.Pane eventKey=\"employees\">\n            <Card>\n              <Card.Header style={{ backgroundColor: '#007bff', color: 'white' }} className=\"d-flex justify-content-between align-items-center\">\n                <h5 className=\"mb-0\">üë• Detail Karyawan Divisi</h5>\n                <div className=\"d-flex gap-2\">\n                  <Button \n                    variant=\"outline-light\" \n                    size=\"sm\" \n                    onClick={handleManualRefresh}\n                  >\n                    üîÑ Refresh Data\n                  </Button>\n                  <Button \n                    variant={autoRefresh ? \"warning\" : \"outline-light\"} \n                    size=\"sm\" \n                    onClick={toggleAutoRefresh}\n                    title={autoRefresh ? \"Auto-refresh aktif (30 detik)\" : \"Auto-refresh tidak aktif\"}\n                  >\n                    {autoRefresh ? \"‚è∏Ô∏è Stop Auto\" : \"‚ñ∂Ô∏è Auto Refresh\"}\n                  </Button>\n                </div>\n              </Card.Header>\n              <Card.Body>\n                <Table responsive hover>\n                  <thead style={{ backgroundColor: '#e3f2fd' }}>\n                    <tr>\n                      <th>Nama & Departemen</th>\n                      <th>Pendidikan</th>\n                      <th>Join Date</th>\n                                              <th>Years Of Service</th>\n                      <th>Status Kontrak</th>\n                      <th>Status Match</th>\n                      <th>Rekomendasi Kontrak</th>\n                      <th>Status Approval</th>\n                      <th>Action</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {analytics?.employees.map((emp, index) => (\n                      <tr key={index}>\n                        <td>\n                          <div>\n                            <strong>{emp.name}</strong>\n                            <>\n                              <br />\n                              <small className=\"text-muted\">{emp.role}</small>\n                            </>\n                          </div>\n                        </td>\n                        <td>\n                          {emp.major}\n                          <>\n                            <br />\n                            <small className=\"text-muted\">{emp.education_level}</small>\n                          </>\n                        </td>\n                        <td>{new Date(emp.join_date).toLocaleDateString('id-ID')}</td>\n                        <td>\n                          <Badge bg=\"info\">{emp.tenure_months} bulan</Badge>\n                        </td>\n                        <td>\n                          {getContractStatusBadge(emp)}\n                        </td>\n                        <td>\n                          <div className=\"d-flex align-items-center\">\n                            {getMatchLevelBadge(emp)}\n                          </div>\n                        </td>\n                        <td>\n                          {getRecommendationStatusBadge(emp)}\n                        </td>\n                        <td>\n                          {getApprovalStatusBadge(emp)}\n                        </td>\n                        <td>\n                          <div className=\"d-flex gap-2\">\n                            {/* Only permanent employees cannot be recommended */}\n                            {emp.current_contract_type === 'permanent' ? (\n                              <div className=\"d-flex flex-column gap-1\">\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline-primary\"\n                                  onClick={() => handleEmployeeClick(emp)}\n                                >\n                                  Detail\n                                </Button>\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline-danger\"\n                                  disabled\n                                  title=\"Karyawan memiliki kontrak permanent\"\n                                  style={{ \n                                    backgroundColor: '#f8f9fa',\n                                    borderColor: '#dc3545',\n                                    color: '#dc3545',\n                                    cursor: 'not-allowed',\n                                    opacity: 0.7,\n                                    fontSize: '0.7rem',\n                                    padding: '0.25rem 0.4rem',\n                                    lineHeight: '1.2'\n                                  }}\n                                >\n                                  ‚ùå Tidak Dapat Direkomendasikan\n                                </Button>\n                              </div>\n                            ) : emp.has_pending_recommendation ? (\n                              /* Employee has pending recommendation */\n                              <div className=\"d-flex flex-column gap-1\">\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline-primary\"\n                                  onClick={() => handleEmployeeClick(emp)}\n                                >\n                                  Detail\n                                </Button>\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline-warning\"\n                                  disabled\n                                  title=\"Rekomendasi sedang menunggu persetujuan HR. Tidak dapat membuat rekomendasi baru hingga HR memproses yang sebelumnya.\"\n                                  style={{ \n                                    backgroundColor: '#fff3cd',\n                                    borderColor: '#ffc107',\n                                    color: '#856404',\n                                    cursor: 'not-allowed',\n                                    fontSize: '0.7rem',\n                                    padding: '0.25rem 0.4rem',\n                                    lineHeight: '1.2'\n                                  }}\n                                >\n                                  ‚è≥ Menunggu HR\n                                </Button>\n                              </div>\n                            ) : (\n                              /* Normal case - can create recommendation */\n                              <Button \n                                size=\"sm\" \n                                variant=\"success\"\n                                onClick={() => handleCreateRecommendation(emp)}\n                                title=\"Lihat detail dan buat rekomendasi untuk karyawan ini\"\n                              >\n                                Detail & Rekomendasi\n                              </Button>\n                            )}\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </Table>\n              </Card.Body>\n            </Card>\n          </Tab.Pane>\n\n          {/* Processed Recommendations Tab */}\n          <Tab.Pane eventKey=\"processed\">\n            <Card>\n              <Card.Header style={{ backgroundColor: '#28a745', color: 'white' }} className=\"d-flex justify-content-between align-items-center\">\n                <div>\n                  <h5 className=\"mb-0\">‚úÖ Rekomendasi yang Sudah Diproses HR</h5>\n                  <small>Lihat status rekomendasi Anda dan kontrak yang telah diperpanjang</small>\n                </div>\n                <Button \n                  variant=\"outline-light\" \n                  size=\"sm\" \n                  onClick={fetchProcessedRecommendations}\n                  className=\"ms-2\"\n                >\n                  üîÑ Refresh\n                </Button>\n              </Card.Header>\n              <Card.Body>\n                {processedRecommendations.length > 0 ? (\n                  <Table responsive hover>\n                    <thead style={{ backgroundColor: '#e8f5e8' }}>\n                      <tr>\n                        <th>Karyawan</th>\n                        <th>Rekomendasi Anda</th>\n                        <th>Status HR</th>\n                        <th>Kontrak Baru</th>\n                        <th>Tanggal Diproses</th>\n                        <th>Status</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {processedRecommendations.map((rec, index) => (\n                        <tr key={index}>\n                          <td>\n                            <div>\n                              <strong>{rec.employee.name}</strong>\n                              <br />\n                              <small className=\"text-muted\">{rec.employee.role}</small>\n                            </div>\n                          </td>\n                          <td>\n                            <Badge bg=\"primary\" className=\"me-1\">\n                              {rec.recommendation_type === 'kontrak1' ? 'Kontrak 1' :\n                               rec.recommendation_type === 'kontrak2' ? 'Kontrak 2' :\n                               rec.recommendation_type === 'kontrak3' ? 'Kontrak 3' : rec.recommendation_type}\n                            </Badge>\n                            <br />\n                            <small className=\"text-muted\">{rec.recommended_duration} bulan</small>\n                          </td>\n                          <td>\n                            {rec.status === 'approved' ? (\n                              <Badge bg=\"success\">‚úÖ Disetujui</Badge>\n                            ) : rec.status === 'extended' ? (\n                              <Badge bg=\"success\">‚úÖ Sudah Diperpanjang</Badge>\n                            ) : rec.status === 'resign' ? (\n                              <Badge bg=\"dark\">üëã Resign</Badge>\n                            ) : (\n                              <Badge bg=\"danger\">‚ùå Ditolak</Badge>\n                            )}\n                          </td>\n                                                     <td>\n                             {rec.status === 'resign' ? (\n                               <Badge bg=\"dark\">üëã Resign</Badge>\n                             ) : (rec.status === 'approved' || rec.status === 'extended') && rec.new_contract?.is_created ? (\n                               <div>\n                                 <Badge bg=\"success\" className=\"mb-1\">Kontrak {rec.new_contract.type}</Badge>\n                                 <br />\n                                 <small className=\"text-success\">\n                                   <strong>‚úÖ Kontrak Aktif:</strong><br />\n                                   {rec.new_contract.end_date ? \n                                     `${new Date(rec.new_contract.start_date).toLocaleDateString('id-ID')} - ${new Date(rec.new_contract.end_date).toLocaleDateString('id-ID')}` : \n                                     `Mulai: ${new Date(rec.new_contract.start_date).toLocaleDateString('id-ID')} (Permanent)`\n                                   }\n                                   <br />\n                                   <span className=\"text-muted\">Durasi: {rec.recommended_duration === 'permanent' ? 'Permanent' : `${rec.recommended_duration} bulan`}</span>\n                                 </small>\n                               </div>\n                             ) : (rec.status === 'approved' || rec.status === 'extended') ? (\n                               <Badge bg=\"warning\">‚è≥ Kontrak sedang dibuat</Badge>\n                             ) : (\n                               <small className=\"text-muted\">Tidak ada kontrak baru</small>\n                             )}\n                           </td>\n                          <td>\n                            {new Date(rec.updated_at).toLocaleDateString('id-ID')}\n                          </td>\n                                                     <td>\n                             {rec.status === 'resign' ? (\n                               <Badge bg=\"secondary\">üö´ Tidak Dilanjutkan</Badge>\n                             ) : (rec.status === 'approved' || rec.status === 'extended') && rec.new_contract?.is_created ? (\n                               <Badge bg=\"success\">üéâ Kontrak Berhasil Diperpanjang</Badge>\n                             ) : (rec.status === 'approved' || rec.status === 'extended') ? (\n                               <Badge bg=\"warning\">‚è≥ Sedang Memproses Kontrak</Badge>\n                             ) : (\n                               <Badge bg=\"danger\">‚ùå Rekomendasi Ditolak</Badge>\n                             )}\n                           </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </Table>\n                ) : (\n                  <div className=\"text-center py-5\">\n                    <div className=\"display-1 mb-3\">üìã</div>\n                    <h5>Belum Ada Rekomendasi yang Diproses</h5>\n                    <p className=\"text-muted\">\n                      Rekomendasi yang Anda buat akan muncul di sini setelah diproses oleh HR.\n                    </p>\n                  </div>\n                )}\n              </Card.Body>\n            </Card>\n          </Tab.Pane>\n        </Tab.Content>\n      </Tab.Container>\n\n      {/* Employee Detail Modal */}\n      {showEmployeeModal && selectedEmployee && (\n                          <div className=\"modal active\" onClick={() => handleCloseModal()}>\n          <div className=\"modal-dialog modal-xl\" style={{ maxWidth: '90vw' }} onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-content\">\n              <div className=\"modal-header py-3\" style={{ background: 'linear-gradient(135deg, #007bff 0%, #6610f2 100%)', color: 'white' }}>\n                <h5 className=\"modal-title\">\n                  <i className=\"fas fa-user-circle me-2\"></i>\n                  {selectedEmployee.name} - Detail dan Rekomendasi\n                </h5>\n                <button \n                  type=\"button\" \n                  className=\"btn-close btn-close-white\"\n                  onClick={() => setShowEmployeeModal(false)}\n                ></button>\n              </div>\n              \n              <div className=\"modal-body p-3\" style={{ maxHeight: '80vh', overflowY: 'auto' }}>\n                {loadingDetail ? (\n                  <div className=\"text-center py-5\">\n                    <Spinner animation=\"border\" variant=\"primary\" />\n                    <div className=\"mt-3\">Memuat detail karyawan...</div>\n                  </div>\n                ) : employeeDetail && !employeeDetail.error ? (\n                  <div className=\"container-fluid p-0\">\n                    {/* TOP ROW - Basic Info + Key Intelligence + Sample Profiles */}\n                    <div className=\"row mb-4\">\n                      {/* Basic Info */}\n                      <div className=\"col-lg-4\">\n                        <div className=\"card h-100 border-0 shadow-sm\">\n                          <div className=\"card-header py-3 bg-primary text-white\">\n                            <h6 className=\"mb-0\">\n                              <i className=\"fas fa-user me-2\"></i>\n                              Informasi Karyawan\n                            </h6>\n                          </div>\n                          <div className=\"card-body p-3\">\n                            <div className=\"mb-3\">\n                              <small className=\"text-muted d-block\">Nama</small>\n                              <div className=\"fw-bold text-dark\">{employeeDetail.employee.name}</div>\n                            </div>\n                            <div className=\"mb-3\">\n                              <small className=\"text-muted d-block\">Posisi</small>\n                              <div className=\"fw-bold text-dark\">{employeeDetail.employee.role}</div>\n                            </div>\n                            <div className=\"mb-3\">\n                              <small className=\"text-muted d-block\">Divisi</small>\n                              <div className=\"fw-bold text-dark\">{employeeDetail.employee.division_name}</div>\n                            </div>\n                            <div className=\"mb-3\">\n                              <small className=\"text-muted d-block\">Tenure</small>\n                              <div className=\"fw-bold text-dark\">{Math.round(employeeDetail.employee.tenure_months)} bulan</div>\n                            </div>\n                            <div className=\"mb-3\">\n                              <small className=\"text-muted d-block\">Pendidikan</small>\n                              <div className=\"fw-bold text-dark\">{employeeDetail.employee.education_level} - {employeeDetail.employee.major}</div>\n                            </div>\n                            <div className=\"mb-3\">\n                              <small className=\"text-muted d-block\">Match Status</small>\n                              <div>\n                                {(() => {\n                                  const educationScore = selectedEmployee?.intelligence_data?.education_score || 0;\n                                  const matchStatus = educationScore >= 2 ? 'Match' : 'Unmatch';\n                                  const badgeClass = matchStatus === 'Match' ? 'bg-success' : 'bg-warning';\n                                  \n                                  return (\n                                    <span className={`badge ${badgeClass}`}>\n                                      {matchStatus}\n                                    </span>\n                                  );\n                                })()}\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Key Intelligence */}\n                      <div className=\"col-lg-4\">\n                        <div className=\"card h-100 border-0 shadow-sm\">\n                          <div className=\"card-header py-3 bg-success text-white\">\n                            <h6 className=\"mb-0\">\n                              <i className=\"fas fa-brain me-2\"></i>\n                              Data Intelligence & Statistics\n                            </h6>\n                          </div>\n                          <div className=\"card-body p-3\">\n                            <div className=\"row\">\n                              <div className=\"col-6\">\n                                <div className=\"mb-3\">\n                                  <small className=\"text-muted d-block\">Tipe Kontrak</small>\n                                  <div className=\"fw-bold text-success\">{getConsistentContractRecommendation(selectedEmployee)}</div>\n                                </div>\n                                <div className=\"mb-3\">\n                                  <small className=\"text-muted d-block\">Sample Size</small>\n                                  <div className=\"fw-bold text-dark\">\n                                    {(() => {\n                                      const stats = getConsistentStatistics(selectedEmployee, employeeDetail);\n                                      return `${stats.sampleSize} profil`;\n                                    })()}\n                                  </div>\n                                </div>\n                                                                  <div className=\"mb-3\">\n                                  <small className=\"text-muted d-block\">Rekomendasi</small>\n                                  <div className=\"fw-bold text-primary\">\n                                    {getConsistentDurationRecommendation(selectedEmployee)}\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"col-6\">\n                                {/* Combined Historical & Resign Intelligence Data */}\n                                {/* Use consistent statistics based on employee data */}\n                                                                  {selectedEmployee ? (\n                                  <div>\n                                    {(() => {\n                                      const stats = getConsistentStatistics(selectedEmployee, employeeDetail);\n                                      return (\n                                        <>\n                                          <div className=\"mb-2\">\n                                            <small className=\"text-muted d-block\">Masih Aktif</small>\n                                            <div className=\"fw-bold text-success\">{stats.masihAktif}%</div>\n                                          </div>\n                                          <div className=\"mb-2\">\n                                            <small className=\"text-muted d-block\">Sudah Resign</small>\n                                            <div className=\"fw-bold text-danger\">{stats.sudahResign}%</div>\n                                          </div>\n\n                                          <div className=\"mb-2\">\n                                            <small className=\"text-muted d-block\">Early Resign Risk</small>\n                                            <div className=\"fw-bold text-warning\">{stats.earlyResignRisk}%</div>\n                                          </div>\n                                          <div className=\"mb-2\">\n                                            <small className=\"text-muted d-block\">Avg Tenure</small>\n                                            <div className=\"fw-bold text-primary\">{stats.avgTenure} bulan</div>\n                                          </div>\n                                        </>\n                                      );\n                                    })()}\n                                  </div>\n                                ) : (\n                                  /* Fallback statistics */\n                                  <div>\n                                    <div className=\"mb-2\">\n                                      <small className=\"text-muted d-block\">Masih Aktif</small>\n                                      <div className=\"fw-bold text-success\">60%</div>\n                                    </div>\n                                    <div className=\"mb-2\">\n                                      <small className=\"text-muted d-block\">Sudah Resign</small>\n                                      <div className=\"fw-bold text-danger\">40%</div>\n                                    </div>\n\n                                    <div className=\"mb-2\">\n                                      <small className=\"text-muted d-block\">Early Resign Risk</small>\n                                      <div className=\"fw-bold text-warning\">30.0%</div>\n                                    </div>\n                                    <div className=\"mb-2\">\n                                      <small className=\"text-muted d-block\">Avg Tenure</small>\n                                      <div className=\"fw-bold text-primary\">15.0 bulan</div>\n                                    </div>\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Sample Profiles - COMPACT & EFFICIENT */}\n                      <div className=\"col-lg-4\">\n                        <div className=\"card h-100 border-0 shadow-sm\">\n                          <div className=\"card-header py-3\" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', color: 'white' }}>\n                            <h6 className=\"mb-0\">\n                              <i className=\"fas fa-users me-2\"></i>\n                              Profil Serupa ({(() => {\n                                const stats = getConsistentStatistics(selectedEmployee, employeeDetail);\n                                return stats.sampleSize;\n                              })()})\n                            </h6>\n                          </div>\n                          <div className=\"card-body p-2\" style={{ backgroundColor: '#f8f9fa' }}>\n                            {employeeDetail.dynamic_intelligence?.historical_patterns?.profiles?.length > 0 ? (\n                              (() => {\n                                const profiles = employeeDetail.dynamic_intelligence.historical_patterns.profiles;\n                                const displayProfiles = showAllProfiles ? profiles : profiles.slice(0, 8);\n                                \n                                return (\n                                  <div>\n                                    <div className=\"d-flex flex-column gap-1\" style={{ maxHeight: showAllProfiles ? 'none' : '300px', overflowY: showAllProfiles ? 'visible' : 'auto' }}>\n                                      {displayProfiles\n                                        .sort((a, b) => {\n                                          // Sort by status (Active/Permanent first), then by tenure\n                                          const aIsActive = a.outcome_status === 'Currently_Active' || a.outcome_status === 'Reached_Permanent';\n                                          const bIsActive = b.outcome_status === 'Currently_Active' || b.outcome_status === 'Reached_Permanent';\n                                          \n                                          if (aIsActive && !bIsActive) return -1;\n                                          if (!aIsActive && bIsActive) return 1;\n                                          return (b.total_tenure_months || 0) - (a.total_tenure_months || 0);\n                                        })\n                                        .map((profile, idx) => (\n                                        <div key={profile.eid} className={`card border-0 shadow-sm ${(profile.outcome_status === 'Currently_Active' || profile.outcome_status === 'Reached_Permanent') ? 'border-start border-success border-3' : 'border-start border-danger border-3'}`} style={{ backgroundColor: 'white', borderRadius: '4px' }}>\n                                          <div className=\"card-body p-2\">\n                                            <div className=\"d-flex justify-content-between align-items-center\">\n                                              <div className=\"flex-grow-1\">\n                                                <div className=\"fw-bold text-truncate\" style={{ fontSize: '0.75rem', color: (profile.outcome_status === 'Currently_Active' || profile.outcome_status === 'Reached_Permanent') ? '#198754' : '#dc3545' }}>\n                                                  {profile.name}\n                                                </div>\n                                                <div className=\"text-muted\" style={{ fontSize: '0.7rem' }}>\n                                                  {profile.major || 'N/A'} - {profile.role || 'N/A'}\n                                                </div>\n                                                <div className=\"text-muted\" style={{ fontSize: '0.7rem' }}>\n                                                  {profile.current_contract_type || 'N/A'} ‚Ä¢ {Math.round(profile.total_tenure_months || 0)}m\n                                                </div>\n                                              </div>\n                                              <div className={`badge ${(profile.outcome_status === 'Currently_Active' || profile.outcome_status === 'Reached_Permanent') ? 'bg-success' : 'bg-danger'}`} style={{ fontSize: '0.6rem' }}>\n                                                {profile.outcome_status === 'Currently_Active' ? 'Aktif' : \n                                                 profile.outcome_status === 'Reached_Permanent' ? 'Permanent' :\n                                                 profile.outcome_status === 'Resigned' ? 'Resign' :\n                                                 profile.outcome_status === 'Terminated' ? 'Terminated' : 'Unknown'}\n                                              </div>\n                                            </div>\n                                          </div>\n                                        </div>\n                                      ))}\n                                    </div>\n                                    {profiles.length > 8 && (\n                                      <div className=\"text-center mt-2\">\n                                        <button \n                                          className=\"btn btn-sm btn-outline-primary\"\n                                          onClick={() => setShowAllProfiles(!showAllProfiles)}\n                                          style={{ fontSize: '0.75rem' }}\n                                        >\n                                          {showAllProfiles ? (\n                                            <>\n                                              <i className=\"fas fa-chevron-up me-1\"></i>\n                                              Tampilkan Lebih Sedikit\n                                            </>\n                                          ) : (\n                                            <>\n                                              <i className=\"fas fa-chevron-down me-1\"></i>\n                                              Tampilkan Semua ({profiles.length} profil)\n                                            </>\n                                          )}\n                                        </button>\n                                      </div>\n                                    )}\n                                  </div>\n                                );\n                              })()\n                            ) : (\n                              <div className=\"text-center py-3\">\n                                <i className=\"fas fa-users fa-2x text-muted mb-2\"></i>\n                                <div className=\"text-muted small\">Tidak ada profil serupa</div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  \n                    {/* FORM REKOMENDASI KONTRAK - MOVED HERE */}\n                    <div className=\"row\">\n                      <div className=\"col-12\">\n                        <div className=\"card border-0 shadow-sm\">\n                          <div className=\"card-header py-3\" style={{ background: 'linear-gradient(135deg, #fd7e14 0%, #ffc107 100%)', color: 'white' }}>\n                            <h6 className=\"mb-0\">\n                              <i className=\"fas fa-file-signature me-2\"></i>\n                              Form Rekomendasi Kontrak\n                            </h6>\n                            <small className=\"opacity-75\">Pilih tipe kontrak dan durasi yang sesuai berdasarkan analisis data</small>\n                          </div>\n                          <div className=\"card-body p-4\">\n                            {/* Dynamic Intelligence Suggestion */}\n                            {employeeDetail.dynamic_intelligence && (\n                              <div className=\"alert alert-info border-0 shadow-sm mb-4\">\n                                <div className=\"d-flex align-items-center\">\n                                  <i className=\"fas fa-brain fa-2x text-info me-3\"></i>\n                                  <div>\n                                    <h6 className=\"alert-heading mb-2\">\n                                      <i className=\"fas fa-lightbulb me-1\"></i>\n                                      Dynamic Intelligence Suggestion\n                                    </h6>\n                                    <div className=\"row\">\n                                      <div className=\"col-md-4\">\n                                        <small className=\"text-muted d-block\">Tipe Kontrak Direkomendasikan</small>\n                                        <strong>{getConsistentContractRecommendation(selectedEmployee)}</strong>\n                                      </div>\n                                      <div className=\"col-md-4\">\n                                        <small className=\"text-muted d-block\">Durasi Optimal</small>\n                                                                <strong className=\"text-primary\">\n                          {getConsistentDurationRecommendation(selectedEmployee)}\n                        </strong>\n                                      </div>\n                                      <div className=\"col-md-4\">\n                                        <small className=\"text-muted d-block\">Sample Size</small>\n                                        <strong>\n                                          {(() => {\n                                            const stats = getConsistentStatistics(selectedEmployee, employeeDetail);\n                                            return `${stats.sampleSize} profil serupa`;\n                                          })()}\n                                        </strong>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            )}\n\n                            <div className=\"row\">\n                              <div className=\"col-md-6\">\n                                <div className=\"mb-4\">\n                                  <label htmlFor=\"recommendation_type\" className=\"form-label fw-bold\">\n                                    <i className=\"fas fa-clipboard-list me-2\"></i>\n                                    Jenis Rekomendasi\n                                  </label>\n                                  <select \n                                    id=\"recommendation_type\"\n                                    name=\"recommendation_type\"\n                                    className=\"form-select form-select-lg\"\n                                    value={recommendationData.recommendation_type || ''}\n                                    onChange={(e) => {\n                                      const newType = e.target.value;\n                                      setRecommendationData(prev => ({\n                                        ...prev,\n                                        recommendation_type: newType,\n                                        // Reset duration when changing contract type\n                                        recommended_duration: newType === 'permanent' ? 0 : (newType === 'terminate' ? 0 : '')\n                                      }));\n                                    }}\n                                  >\n                                    <option value=\"\">Pilih Jenis Kontrak</option>\n                                    <option value=\"kontrak2\">Kontrak 2</option>\n                                    <option value=\"kontrak3\">Kontrak 3</option>\n                                    <option value=\"permanent\">Permanent</option>\n                                    <option value=\"terminate\">\n                                      {recommendationData.reason && recommendationData.reason.includes('ELIMINASI OTOMATIS') \n                                        ? 'TIDAK DIREKOMENDASIKAN' \n                                        : 'Tidak Diperpanjang'}\n                                    </option>\n                                  </select>\n                                </div>\n                              </div>\n                              <div className=\"col-md-6\">\n                                <div className=\"mb-4\">\n                                  <label htmlFor=\"recommended_duration_select\" className=\"form-label fw-bold\">\n                                    <i className=\"fas fa-calendar-alt me-2\"></i>\n                                    Durasi Optimal (bulan)\n                                  </label>\n                                  \n                                  {/* Show dropdown for Kontrak 2 and Kontrak 3 */}\n                                  {(recommendationData.recommendation_type === 'kontrak2' || recommendationData.recommendation_type === 'kontrak3') ? (\n                                    <select\n                                      id=\"recommended_duration_select\"\n                                      name=\"recommended_duration_select\"\n                                      className=\"form-select form-select-lg\"\n                                      value={recommendationData.recommended_duration || ''}\n                                      onChange={(e) => setRecommendationData(prev => ({\n                                        ...prev,\n                                        recommended_duration: e.target.value\n                                      }))}\n                                    >\n                                      <option value=\"\">Pilih durasi kontrak</option>\n                                      <option value=\"6\">6 Bulan</option>\n                                      <option value=\"12\">12 Bulan</option>\n                                      <option value=\"18\">18 Bulan</option>\n                                      <option value=\"24\">24 Bulan</option>\n                                    </select>\n                                  ) : (\n                                    <input\n                                      id=\"recommended_duration\"\n                                      name=\"recommended_duration\"\n                                      type=\"number\"\n                                      className=\"form-control form-control-lg\"\n                                      value={recommendationData.recommended_duration || ''}\n                                      onChange={(e) => setRecommendationData(prev => ({\n                                        ...prev,\n                                        recommended_duration: e.target.value\n                                      }))}\n                                      disabled={recommendationData.recommendation_type === 'permanent' || recommendationData.recommendation_type === 'terminate'}\n                                      placeholder=\"Masukkan durasi dalam bulan\"\n                                      min=\"1\"\n                                      max=\"36\"\n                                    />\n                                  )}\n                                  \n                                  {/* Helper text for different contract types */}\n                                  {(recommendationData.recommendation_type === 'kontrak2' || recommendationData.recommendation_type === 'kontrak3') && (\n                                    <div className=\"mt-2\">\n                                      <small className=\"text-info\">\n                                        <i className=\"fas fa-info-circle me-1\"></i>\n                                        Pilih durasi yang sesuai berdasarkan rekomendasi sistem dan performa karyawan\n                                      </small>\n                                    </div>\n                                  )}\n                                  {recommendationData.recommendation_type === 'permanent' && (\n                                    <div className=\"mt-2\">\n                                      <small className=\"text-success\">\n                                        <i className=\"fas fa-info-circle me-1\"></i>\n                                        Permanent - tidak memerlukan durasi\n                                      </small>\n                                    </div>\n                                  )}\n                                  {recommendationData.recommendation_type === 'terminate' && (\n                                    <div className=\"mt-2\">\n                                      <small className=\"text-danger\">\n                                        <i className=\"fas fa-exclamation-triangle me-1\"></i>\n                                        {recommendationData.reason && recommendationData.reason.includes('ELIMINASI OTOMATIS') \n                                          ? 'ELIMINASI OTOMATIS - Jurusan Non-IT tidak direkomendasikan' \n                                          : 'Tidak diperpanjang - kontrak berakhir'}\n                                      </small>\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                            \n                            {/* Contract Start Date Field - Only show for extension types */}\n                            {(recommendationData.recommendation_type === 'kontrak2' || \n                              recommendationData.recommendation_type === 'kontrak3' || \n                              recommendationData.recommendation_type === 'permanent') && (\n                              <div className=\"mb-4\">\n                                <label htmlFor=\"contract_start_date\" className=\"form-label fw-bold\">\n                                  <i className=\"fas fa-calendar-check me-2\"></i>\n                                  Tanggal Mulai Kontrak Baru\n                                </label>\n                                <input\n                                  id=\"contract_start_date\"\n                                  name=\"contract_start_date\"\n                                  type=\"date\"\n                                  className=\"form-control form-control-lg\"\n                                  value={recommendationData.contract_start_date || ''}\n                                  onChange={(e) => setRecommendationData(prev => ({\n                                    ...prev,\n                                    contract_start_date: e.target.value\n                                  }))}\n                                  min={new Date().toISOString().split('T')[0]} // Minimum today\n                                />\n                                <div className=\"form-text\">\n                                  <i className=\"fas fa-info-circle me-1\"></i>\n                                  Tentukan kapan kontrak baru akan mulai berlaku. Membantu HR dalam perencanaan dan data intelligence yang lebih akurat.\n                                </div>\n                              </div>\n                            )}\n                            \n                            <div className=\"mb-4\">\n                              <label htmlFor=\"recommendationReason\" className=\"form-label fw-bold\">\n                                <i className=\"fas fa-comment-alt me-2\"></i>\n                                Alasan Rekomendasi\n                              </label>\n                              <textarea\n                                id=\"recommendationReason\"\n                                name=\"recommendationReason\"\n                                className=\"form-control\"\n                                rows=\"4\"\n                                value={recommendationData.reason || ''}\n                                onChange={(e) => setRecommendationData(prev => ({\n                                  ...prev,\n                                  reason: e.target.value\n                                }))}\n                                placeholder=\"Jelaskan alasan rekomendasi berdasarkan analisis data, performa karyawan, dan kebutuhan perusahaan...\"\n                                style={{ resize: 'vertical' }}\n                              />\n                              <div className=\"form-text\">\n                                <i className=\"fas fa-lightbulb me-1\"></i>\n                                Tip: Sertakan justifikasi berdasarkan match status, tenure, dan analisis data mining\n                              </div>\n                            </div>\n\n                            <div className=\"text-center\">\n                              <button \n                                type=\"button\" \n                                className=\"btn btn-success btn-lg px-5\"\n                                onClick={submitRecommendation}\n                                                                disabled={\n                                  !(employeeDetail?.employee?.eid || selectedEmployee?.eid) || \n                                  !recommendationData.recommendation_type || \n                                  // Validate duration for kontrak2 and kontrak3\n                                  (['kontrak2', 'kontrak3'].includes(recommendationData.recommendation_type) && \n                                   (!recommendationData.recommended_duration || recommendationData.recommended_duration === '0')) ||\n                                  // Validate contract start date for extension types\n                                  (['kontrak2', 'kontrak3', 'permanent'].includes(recommendationData.recommendation_type) && \n                                   !recommendationData.contract_start_date)\n                                }\n                                title={\n                                  !(employeeDetail?.employee?.eid || selectedEmployee?.eid) ? 'Data karyawan tidak lengkap' :\n                                  !recommendationData.recommendation_type ? 'Pilih jenis rekomendasi' :\n                                  (['kontrak2', 'kontrak3'].includes(recommendationData.recommendation_type) && \n                                   (!recommendationData.recommended_duration || recommendationData.recommended_duration === '0')) ? 'Pilih durasi kontrak' :\n                                  (['kontrak2', 'kontrak3', 'permanent'].includes(recommendationData.recommendation_type) && \n                                   !recommendationData.contract_start_date) ? 'Pilih tanggal mulai kontrak' :\n                                  'Kirim rekomendasi ke HR'\n                                }\n                              >\n                                <i className=\"fas fa-paper-plane me-2\"></i>\n                                Kirim Rekomendasi ke HR\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"alert alert-danger border-0 shadow-sm\">\n                    <h4 className=\"alert-heading\">\n                      <i className=\"fas fa-exclamation-triangle me-2\"></i>\n                      Gagal memuat detail karyawan\n                    </h4>\n                    {employeeDetail?.error ? (\n                      <div>\n                        <p><strong>Error:</strong> {employeeDetail.errorMessage}</p>\n                        <details>\n                          <summary>Debug Information</summary>\n                          <div className=\"mt-2\">\n                            <p><strong>Employee:</strong> {employeeDetail.employee?.name} (EID: {employeeDetail.employee?.eid})</p>\n                            <p><strong>Contract:</strong> {employeeDetail.employee?.current_contract_type}</p>\n                            <p><strong>Possible causes:</strong></p>\n                            <ul>\n                              <li>Session expired - try refreshing the page</li>\n                              <li>Network connection issues</li>\n                              <li>Server configuration problems</li>\n                            </ul>\n                            <p className=\"small text-muted\">Check browser console for more details (F12 ‚Üí Console)</p>\n                          </div>\n                        </details>\n                      </div>\n                    ) : (\n                      <p>Terjadi kesalahan saat mengambil data analisis karyawan. Silakan coba lagi atau hubungi administrator sistem.</p>\n                    )}\n                  </div>\n                )}\n              </div>\n              <div className=\"modal-footer py-3 bg-light\">\n                <button \n                  type=\"button\" \n                  className=\"btn btn-secondary px-4\"\n                  onClick={() => setShowEmployeeModal(false)}\n                >\n                  <i className=\"fas fa-times me-2\"></i>\n                  Tutup\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </Container>\n  );\n};\n\nexport default ManagerDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}